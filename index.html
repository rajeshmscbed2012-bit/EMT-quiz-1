<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <meta name="theme-color" content="#3b82f6"/>
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
  <meta name="apple-mobile-web-app-title" content="EMT Quiz"/>
  <link rel="manifest" href="manifest.json"/>
  <link rel="apple-touch-icon" href="icon-192.svg"/>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Sora:wght@500;700;800&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  <title>EMT Quiz App</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}
    html,body,#root{height:100%;min-height:100%}
    body{background:#f1f5f9;overflow-x:hidden;font-family:'DM Sans',sans-serif}
    button{font-family:'DM Sans',sans-serif;-webkit-appearance:none}
    :root{
      --blue:#3b82f6;--indigo:#6366f1;--green:#10b981;--amber:#f59e0b;
      --red:#ef4444;--rose:#f43f5e;--purple:#8b5cf6;
      --slate-50:#f8fafc;--slate-100:#f1f5f9;--slate-200:#e2e8f0;
      --slate-300:#cbd5e1;--slate-400:#94a3b8;--slate-500:#64748b;
      --slate-600:#475569;--slate-700:#334155;--slate-800:#1e293b;--slate-900:#0f172a;
      --radius-sm:10px;--radius-md:16px;--radius-lg:22px;--radius-xl:28px;
      --shadow-sm:0 1px 3px rgba(0,0,0,.06),0 1px 2px rgba(0,0,0,.04);
      --shadow-md:0 4px 12px rgba(0,0,0,.08),0 2px 4px rgba(0,0,0,.04);
      --shadow-lg:0 10px 30px rgba(0,0,0,.1),0 4px 8px rgba(0,0,0,.06);
    }
    @keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:none}}
    @keyframes fadeIn{from{opacity:0}to{opacity:1}}
    @keyframes slideR{from{opacity:0;transform:translateX(-16px)}to{opacity:1;transform:none}}
    @keyframes popIn{from{opacity:0;transform:scale(.92)}to{opacity:1;transform:scale(1)}}
    @keyframes ringFill{from{stroke-dashoffset:251.2}}
    @keyframes grow{from{transform:scaleX(0)}to{transform:scaleX(1)}}
    @keyframes fall{0%{transform:translateY(-20px) rotate(0);opacity:1}100%{transform:translateY(100vh) rotate(720deg);opacity:0}}
    @keyframes toast-in{from{opacity:0;transform:translateX(-50%) translateY(24px)}to{opacity:1;transform:translateX(-50%) translateY(0)}}
    @keyframes toast-out{to{opacity:0;transform:translateX(-50%) translateY(24px)}}
    @keyframes shimmer{to{background-position:200% center}}
    @keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-4px)}}
    @keyframes pulse-ring{0%{transform:scale(1);opacity:.8}70%{transform:scale(1.18);opacity:0}100%{transform:scale(1.18);opacity:0}}
    .fu{animation:fadeUp .35s cubic-bezier(.16,1,.3,1) both}
    .fr{animation:slideR .3s cubic-bezier(.16,1,.3,1) both}
    .fi{animation:fadeIn .25s ease both}
    .pi{animation:popIn .3s cubic-bezier(.16,1,.3,1) both}
    .d1{animation-delay:.05s}.d2{animation-delay:.1s}.d3{animation-delay:.15s}
    .d4{animation-delay:.2s}.d5{animation-delay:.25s}.d6{animation-delay:.3s}
    .ring{animation:ringFill .8s cubic-bezier(.16,1,.3,1) both}
    .bar{animation:grow .6s cubic-bezier(.16,1,.3,1) both;transform-origin:left}
    .pressable{transition:transform .15s ease,opacity .15s ease;cursor:pointer}
    .pressable:hover{transform:translateY(-2px)}
    .pressable:active{transform:scale(.97);opacity:.9}
    .opt-row{transition:all .16s ease}
    .opt-row:hover{background:rgba(59,130,246,.04)!important;border-color:rgba(59,130,246,.35)!important;transform:translateX(3px)}
  </style>
</head>
<body>
  <!-- Splash -->
  <div id="splash" style="position:fixed;inset:0;background:linear-gradient(160deg,#0f172a,#1a1040,#1e1b4b);
    display:flex;flex-direction:column;align-items:center;justify-content:center;
    z-index:99999;transition:opacity .55s ease;gap:18px">
    <div style="width:88px;height:88px;border-radius:26px;
      background:linear-gradient(135deg,#3b82f6,#6366f1);
      display:flex;align-items:center;justify-content:center;font-size:44px;
      box-shadow:0 16px 48px rgba(99,102,241,.5)">ðŸš¨</div>
    <div style="text-align:center">
      <div style="color:#fff;font-size:26px;font-weight:800;letter-spacing:-.5px;
        font-family:'Sora',sans-serif">EMT Quiz</div>
      <div style="color:rgba(255,255,255,.4);font-size:13px;margin-top:4px">Loading 368 questionsâ€¦</div>
    </div>
    <div style="width:160px;height:3px;background:rgba(255,255,255,.1);border-radius:99px;overflow:hidden">
      <div id="s-fill" style="height:100%;background:linear-gradient(90deg,#3b82f6,#6366f1);
        border-radius:99px;width:0;transition:width .9s cubic-bezier(.16,1,.3,1)"></div>
    </div>
  </div>
  <div id="root"></div>

  <!-- â‘  QB array only â€” plain JS, no JSX -->
  <script>

const QB = [
  // â”€â”€â”€ VITAL SIGNS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:"v1",  mod:"Vital Signs", topic:"Respiratory Rate", type:"mc", diff:1, q:"Normal respiratory rate for an ADULT?", o:["6â€“10 /min","12â€“20 /min","20â€“30 /min","30â€“40 /min"], a:1, exp:"Adults breathe 12â€“20 times per minute at rest." },
  { id:"v2",  mod:"Vital Signs", topic:"Respiratory Rate", type:"mc", diff:2, q:"Normal respiratory rate for a CHILD (1â€“12 yrs)?", o:["12â€“20 /min","15â€“30 /min","25â€“50 /min","40â€“60 /min"], a:1, exp:"Children breathe faster than adults: 15â€“30 /min." },
  { id:"v3",  mod:"Vital Signs", topic:"Respiratory Rate", type:"mc", diff:2, q:"Normal respiratory rate for an INFANT?", o:["12â€“20 /min","15â€“30 /min","25â€“50 /min","40â€“60 /min"], a:2, exp:"Infants breathe 25â€“50 times per minute." },
  { id:"v4",  mod:"Vital Signs", topic:"Respiratory Rate", type:"mc", diff:2, q:"Normal respiratory rate for a NEONATE?", o:["15â€“30 /min","25â€“50 /min","40â€“60 /min","60â€“80 /min"], a:2, exp:"Neonates have the highest RR: 40â€“60 /min." },
  { id:"v5",  mod:"Vital Signs", topic:"Pulse Rate",       type:"mc", diff:1, q:"Normal pulse rate for an ADULT?", o:["40â€“60 /min","60â€“100 /min","80â€“120 /min","100â€“140 /min"], a:1, exp:"Adult normal HR is 60â€“100 beats per minute." },
  { id:"v6",  mod:"Vital Signs", topic:"Pulse Rate",       type:"mc", diff:2, q:"Normal pulse rate for a CHILD?", o:["60â€“100 /min","80â€“120 /min","100â€“140 /min","140â€“160 /min"], a:1, exp:"Child normal HR is 80â€“120 beats per minute." },
  { id:"v7",  mod:"Vital Signs", topic:"Pulse Rate",       type:"mc", diff:2, q:"Normal pulse rate for an INFANT?", o:["60â€“100 /min","80â€“120 /min","100â€“140 /min","140â€“160 /min"], a:2, exp:"Infant normal HR is 100â€“140 beats per minute." },
  { id:"v8",  mod:"Vital Signs", topic:"Pulse Rate",       type:"mc", diff:2, q:"Normal pulse rate for a NEONATE?", o:["80â€“120 /min","100â€“140 /min","120â€“160 /min","140â€“160 /min"], a:3, exp:"Neonate normal HR is 140â€“160 beats per minute." },
  { id:"v9",  mod:"Vital Signs", topic:"Pulse Rate",       type:"tf", diff:2, q:"The normal pulse rate for an infant is 80â€“120 per minute.", a:false, exp:"Infant normal HR is 100â€“140 /min. 80â€“120 is the child range." },
  { id:"v10", mod:"Vital Signs", topic:"Blood Pressure",   type:"mc", diff:1, q:"Normal SYSTOLIC blood pressure for an adult?", o:["80â€“100 mmHg","100â€“140 mmHg","140â€“160 mmHg","160â€“180 mmHg"], a:1, exp:"Normal systolic BP: 100â€“140 mmHg." },
  { id:"v11", mod:"Vital Signs", topic:"Blood Pressure",   type:"mc", diff:1, q:"Normal DIASTOLIC blood pressure for an adult?", o:["50â€“70 mmHg","70â€“90 mmHg","90â€“110 mmHg","110â€“130 mmHg"], a:1, exp:"Normal diastolic BP: 70â€“90 mmHg." },
  { id:"v12", mod:"Vital Signs", topic:"Blood Pressure",   type:"tf", diff:1, q:"Normal diastolic blood pressure for an adult is 70â€“90 mmHg.", a:true, exp:"Correct â€” diastolic normal range is 70â€“90 mmHg." },
  { id:"v13", mod:"Vital Signs", topic:"SpO2 & Temp",      type:"mc", diff:1, q:"What is the normal SpO2 level?", o:[">85%",">90%",">95%",">99%"], a:2, exp:"Normal SpO2 is greater than 95%." },
  { id:"v14", mod:"Vital Signs", topic:"SpO2 & Temp",      type:"mc", diff:1, q:"Normal body temperature?", o:["36Â°C / 96.8Â°F","37Â°C / 98.6Â°F","38Â°C / 100.4Â°F","39Â°C / 102.2Â°F"], a:1, exp:"Normal body temp is 37Â°C / 98.6Â°F." },
  { id:"v15", mod:"Vital Signs", topic:"Blood Sugar",      type:"mc", diff:2, q:"Normal random blood sugar for an ADULT?", o:["45â€“200 mg/dl","60â€“140 mg/dl","70â€“140 mg/dl","80â€“160 mg/dl"], a:2, exp:"Adult normal RBS: 70â€“140 mg/dl." },
  { id:"v16", mod:"Vital Signs", topic:"Blood Sugar",      type:"mc", diff:2, q:"Normal random blood sugar for a NEONATE?", o:["30â€“100 mg/dl","45â€“200 mg/dl","70â€“140 mg/dl","60â€“140 mg/dl"], a:1, exp:"Neonate RBS normal range: 45â€“200 mg/dl â€” widest range." },
  { id:"v17", mod:"Vital Signs", topic:"Blood Sugar",      type:"tf", diff:2, q:"Normal random blood sugar for children is 60â€“140 mg/dl.", a:true, exp:"Children: 60â€“140 mg/dl. Adults: 70â€“140 mg/dl." },
  // â”€â”€â”€ CPR ADULT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:"c1",  mod:"CPR", topic:"Adult CPR",            type:"mc", diff:1, q:"Which pulse is checked during ADULT CPR?", o:["Radial","Brachial","Femoral","Carotid"], a:3, exp:"Carotid pulse is checked in adults â€” it's the most accessible central pulse." },
  { id:"c2",  mod:"CPR", topic:"Adult CPR",            type:"mc", diff:1, q:"Correct chest compression DEPTH for an adult?", o:["1 inch (2.5 cm)","1.5 inch (4 cm)","2 inch (5 cm)","2.4 inch (6 cm)"], a:3, exp:"Adult compression depth: 2.4 inches (6 cm)." },
  { id:"c3",  mod:"CPR", topic:"Adult CPR",            type:"mc", diff:1, q:"Compression RATE for adult CPR?", o:["60â€“80 /min","80â€“100 /min","100â€“120 /min","120â€“140 /min"], a:2, exp:"Standard CPR rate for all ages: 100â€“120 compressions/min." },
  { id:"c4",  mod:"CPR", topic:"Adult CPR",            type:"mc", diff:2, q:"Single rescuer adult CPR ratio (compressions:breaths)?", o:["15:2","30:1","30:2","5:1"], a:2, exp:"Single rescuer adult: 30 compressions to 2 breaths (5 cycles)." },
  { id:"c5",  mod:"CPR", topic:"Adult CPR",            type:"mc", diff:1, q:"Compression TECHNIQUE for adult CPR?", o:["One Hand","Two Hands","Thumb Encircling","Two Fingers"], a:1, exp:"Two hands are used for adult chest compressions." },
  { id:"c6",  mod:"CPR", topic:"Adult CPR",            type:"mc", diff:2, q:"Pulse recheck interval during adult CPR?", o:["1 minute","2 minutes","3 minutes","5 minutes"], a:1, exp:"Recheck pulse every 2 minutes during adult CPR." },
  { id:"c7",  mod:"CPR", topic:"Adult CPR",            type:"tf", diff:1, q:"For adult CPR, compression rate is 100â€“120 per minute.", a:true, exp:"100â€“120 /min is the standard rate for all age groups." },
  { id:"c8",  mod:"CPR", topic:"Adult CPR",            type:"mc", diff:3, q:"Two-rescuer adult CPR â€” how many cycles of 30:2?", o:["3 cycles","5 cycles","7 cycles","10 cycles"], a:1, exp:"Both single and two-rescuer adult CPR: 5 cycles of 30:2." },
  // â”€â”€â”€ CPR CHILD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:"c9",  mod:"CPR", topic:"Child CPR",            type:"mc", diff:1, q:"Age range defining a 'Child' for CPR?", o:["Birthâ€“1 month","1 monthâ€“1 year","1â€“12 years","Above 12 years"], a:2, exp:"Child CPR applies to ages 1â€“12 years." },
  { id:"c10", mod:"CPR", topic:"Child CPR",            type:"mc", diff:2, q:"Compression depth for a CHILD?", o:["1 inch (2.5 cm)","1.5 inch (4 cm)","2 inch (5 cm)","2.4 inch (6 cm)"], a:2, exp:"Child compression depth: 2 inches (5 cm)." },
  { id:"c11", mod:"CPR", topic:"Child CPR",            type:"tf", diff:2, q:"Two-rescuer child CPR ratio is 30:2.", a:false, exp:"Two-rescuer child CPR is 15:2 (10 cycles). Single rescuer is 30:2." },
  { id:"c12", mod:"CPR", topic:"Child CPR",            type:"mc", diff:2, q:"Compression technique for CHILD CPR?", o:["Two Hands","Single Hand","Thumb Encircling","Two Fingers"], a:1, exp:"Single hand technique is used for child CPR." },
  { id:"c13", mod:"CPR", topic:"Child CPR",            type:"mc", diff:3, q:"Two-rescuer child CPR ratio is:", o:["30:2 (5 cycles)","15:2 (10 cycles)","15:2 (5 cycles)","30:2 (10 cycles)"], a:1, exp:"Two-rescuer child CPR: 15:2 for 10 cycles." },
  // â”€â”€â”€ CPR INFANT & NEONATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:"c14", mod:"CPR", topic:"Infant & Neonate CPR", type:"mc", diff:2, q:"Which pulse is checked during INFANT CPR?", o:["Carotid","Femoral","Brachial","Radial"], a:2, exp:"Brachial pulse is used for infants â€” carotid is hard to palpate." },
  { id:"c15", mod:"CPR", topic:"Infant & Neonate CPR", type:"mc", diff:2, q:"Neonate CPR compression:ventilation ratio?", o:["30:2","15:2","3:1","5:1"], a:2, exp:"Neonate CPR uses a 3:1 ratio (90 compressions : 30 breaths/min)." },
  { id:"c16", mod:"CPR", topic:"Infant & Neonate CPR", type:"mc", diff:2, q:"Compression depth for an INFANT?", o:["0.5 inch","1 inch (2.5 cm)","1.5 inch (4 cm)","2 inch (5 cm)"], a:2, exp:"Infant compression depth: 1.5 inches (4 cm)." },
  { id:"c17", mod:"CPR", topic:"Infant & Neonate CPR", type:"mc", diff:3, q:"Compression technique used for INFANT CPR?", o:["Two Hands","Single Hand","Two Fingers","Thumb Encircling"], a:3, exp:"Thumb encircling (both thumbs on sternum, hands around chest) for infant." },
  { id:"c18", mod:"CPR", topic:"Infant & Neonate CPR", type:"tf", diff:2, q:"Neonate pulse is rechecked after 1 minute.", a:true, exp:"Neonate: recheck after 1 minute. All others: 2 minutes." },
  { id:"c19", mod:"CPR", topic:"Infant & Neonate CPR", type:"tf", diff:1, q:"A neonate is defined as birth to 1 month of age.", a:true, exp:"Neonate = birth to 1 month. Infant = 1 month to 1 year." },
  { id:"c20", mod:"CPR", topic:"Infant & Neonate CPR", type:"mc", diff:3, q:"In neonate CPR, the target is approximately:", o:["30 compressions + 10 breaths /min","60 compressions + 20 breaths /min","90 compressions + 30 breaths /min","120 compressions + 40 breaths /min"], a:2, exp:"Neonate: 3:1 ratio = 90 compressions + 30 breaths per minute." },
  // â”€â”€â”€ AIRWAY ASSESSMENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:"a1",  mod:"Airway & Breathing", topic:"Airway Assessment",          type:"mc", diff:1, q:"Chest wall movement WITHOUT sound indicates?", o:["Partial obstruction","Complete obstruction","Airway patent","Stridor"], a:2, exp:"Movement without sound = patent (open) airway." },
  { id:"a2",  mod:"Airway & Breathing", topic:"Airway Assessment",          type:"mc", diff:1, q:"Snoring, gurgling, stridor and wheezing indicate:", o:["Patent airway","Complete obstruction","Partial airway obstruction","Apnea"], a:2, exp:"Noisy breathing = partial obstruction. No movement = complete obstruction." },
  { id:"a3",  mod:"Airway & Breathing", topic:"Airway Assessment",          type:"tf", diff:2, q:"Chest wall movement with NO sound = complete obstruction.", a:false, exp:"No movement at all = complete obstruction. Movement without sound = patent." },
  { id:"a4",  mod:"Airway & Breathing", topic:"Airway Assessment",          type:"mc", diff:1, q:"THREE main causes of airway obstruction?", o:["Tongue, secretion, foreign body","Blood, vomit, trauma","Tongue, BP, secretion","Foreign body, shock, trauma"], a:0, exp:"The tongue is the #1 cause, followed by secretions and foreign bodies." },
  // â”€â”€â”€ OPEN AIRWAY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:"a5",  mod:"Airway & Breathing", topic:"Open Airway",                type:"mc", diff:1, q:"Airway opening technique for NON-TRAUMA patient?", o:["Jaw Thrust","Sniffing Position only","Head-Tilt Chin-Lift","Finger Sweep"], a:2, exp:"Head-Tilt Chin-Lift is standard for non-trauma patients." },
  { id:"a6",  mod:"Airway & Breathing", topic:"Open Airway",                type:"mc", diff:1, q:"Airway technique for SUSPECTED TRAUMA patient?", o:["Head-Tilt Chin-Lift","Jaw Thrust","Sniffing Position","Left Lateral Position"], a:1, exp:"Jaw Thrust avoids neck movement â€” used when spinal injury is suspected." },
  { id:"a7",  mod:"Airway & Breathing", topic:"Open Airway",                type:"tf", diff:2, q:"Sniffing Position is used for pediatric non-trauma airway opening.", a:true, exp:"Sniffing position (Head-Tilt Chin-Lift variant) is used for pediatric patients." },
  // â”€â”€â”€ SUCTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:"a8",  mod:"Airway & Breathing", topic:"Suction",                    type:"mc", diff:2, q:"Suction pressure for an ADULT?", o:["60 mmHg","80â€“100 mmHg","100â€“120 mmHg","120â€“140 mmHg"], a:2, exp:"Adult suction pressure: 100â€“120 mmHg for max 15 seconds." },
  { id:"a9",  mod:"Airway & Breathing", topic:"Suction",                    type:"mc", diff:2, q:"Maximum suctioning time for a CHILD?", o:["3 sec","5 sec","10 sec","15 sec"], a:2, exp:"Child: 80â€“100 mmHg for max 10 seconds." },
  { id:"a10", mod:"Airway & Breathing", topic:"Suction",                    type:"mc", diff:2, q:"Suction device used for a NEWBORN?", o:["Yankauer","Regular catheter","Mucus Extractor","Bulb syringe"], a:2, exp:"Newborns require a Mucus Extractor for gentle suctioning (3 seconds max)." },
  { id:"a11", mod:"Airway & Breathing", topic:"Suction",                    type:"mc", diff:2, q:"Maximum suctioning time for an INFANT?", o:["3 sec","5 sec","10 sec","15 sec"], a:1, exp:"Infant: 60 mmHg for max 5 seconds." },
  { id:"a12", mod:"Airway & Breathing", topic:"Suction",                    type:"tf", diff:2, q:"Suctioning may cause bradycardia in children.", a:true, exp:"Vagal stimulation during suctioning can cause bradycardia in children." },
  { id:"a13", mod:"Airway & Breathing", topic:"Suction",                    type:"mc", diff:3, q:"Which is NOT a complication of suctioning?", o:["Hypoxia","Soft tissue damage","Bradycardia in children","Hypertension"], a:3, exp:"Complications: Hypoxia, bradycardia, soft tissue damage/bleeding. Not hypertension." },
  { id:"a14", mod:"Airway & Breathing", topic:"Suction",                    type:"mc", diff:2, q:"Left lateral position is used for:", o:["Foreign body","Trauma patients","Continuous vomiting/secretions","Apnea"], a:2, exp:"Left lateral (recovery) position prevents aspiration during continuous vomiting." },
  { id:"a15", mod:"Airway & Breathing", topic:"Suction",                    type:"mc", diff:3, q:"What suction pressure is used for an INFANT?", o:["100â€“120 mmHg","80â€“100 mmHg","60 mmHg","Mucus extractor only"], a:2, exp:"Infant suction pressure is 60 mmHg for 5 seconds maximum." },
  // â”€â”€â”€ OPA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:"a16", mod:"Airway & Breathing", topic:"OPA",                        type:"mc", diff:1, q:"OPA is INDICATED for:", o:["Responsive patient","Unresponsive WITHOUT gag reflex","Unresponsive WITH gag reflex","Facial trauma"], a:1, exp:"OPA lifts tongue â€” only safe without a gag reflex." },
  { id:"a17", mod:"Airway & Breathing", topic:"OPA",                        type:"tf", diff:1, q:"OPA is contraindicated in unresponsive patients WITH a gag reflex.", a:true, exp:"Gag reflex + OPA = vomiting and aspiration risk. Use NPA instead." },
  { id:"a18", mod:"Airway & Breathing", topic:"OPA",                        type:"mc", diff:2, q:"OPA size & color for a NEONATE?", o:["Size 0 â€“ Black","Size 1 â€“ White","Size 00 â€“ White/Blue","Size 2 â€“ Green"], a:2, exp:"Neonate OPA: Size 00, White/Blue color." },
  { id:"a19", mod:"Airway & Breathing", topic:"OPA",                        type:"mc", diff:2, q:"OPA size & color for an INFANT?", o:["Size 00 â€“ White/Blue","Size 0 â€“ Black","Size 1 â€“ White","Size 2 â€“ Green"], a:1, exp:"Infant OPA: Size 0, Black color." },
  { id:"a20", mod:"Airway & Breathing", topic:"OPA",                        type:"mc", diff:2, q:"OPA size & color for a standard ADULT?", o:["Size 1 â€“ White","Size 2 â€“ Green","Size 3 â€“ Orange/Yellow","Size 4 â€“ Red"], a:1, exp:"Adult OPA: Size 2, Green color." },
  { id:"a21", mod:"Airway & Breathing", topic:"OPA",                        type:"mc", diff:3, q:"OPA size & color for a CHILD?", o:["Size 00 â€“ White/Blue","Size 0 â€“ Black","Size 1 â€“ White","Size 2 â€“ Green"], a:2, exp:"Child OPA: Size 1, White color." },
  { id:"a22", mod:"Airway & Breathing", topic:"OPA",                        type:"mc", diff:3, q:"OPA Size 4 (Red) is used for which patient?", o:["Neonate","Infant","Adult","Very Big Adult"], a:3, exp:"Size 4 Red = Very Big Adult. Size 3 Orange/Yellow = Big Adult." },
  // â”€â”€â”€ NPA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:"a23", mod:"Airway & Breathing", topic:"NPA",                        type:"mc", diff:2, q:"NPA is INDICATED for:", o:["Unresponsive without gag reflex","Unresponsive WITH gag reflex / altered mental status","Newborn with distress","Facial fracture"], a:1, exp:"NPA is for patients with gag reflex or altered mental status â€” safer than OPA." },
  { id:"a24", mod:"Airway & Breathing", topic:"NPA",                        type:"tf", diff:2, q:"Base of skull fracture is a contraindication for NPA.", a:true, exp:"Risk of inserting NPA into the cranial cavity via the fracture." },
  { id:"a25", mod:"Airway & Breathing", topic:"NPA",                        type:"tf", diff:1, q:"Facial trauma is a contraindication for NPA.", a:true, exp:"Facial trauma, skull fracture, and nose bleeding all contraindicate NPA." },
  { id:"a26", mod:"Airway & Breathing", topic:"NPA",                        type:"mc", diff:3, q:"Sign indicating base of skull fracture (contraindicates NPA)?", o:["Cyanosis","Raccoon's eye / Battle's sign","Bradycardia","Stridor"], a:1, exp:"Raccoon's eyes (periorbital bruising) and Battle's sign (mastoid bruising) = skull fracture." },
  // â”€â”€â”€ OXYGENATION VS VENTILATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:"a27", mod:"Airway & Breathing", topic:"Oxygenation vs Ventilation", type:"mc", diff:2, q:"RR < 8 OR > 30 br/min requires:", o:["Oxygenation only","Ventilation","Simple face mask","Nasal cannula"], a:1, exp:"RR outside 8â€“30 = inadequate breathing â†’ positive pressure ventilation needed." },
  { id:"a28", mod:"Airway & Breathing", topic:"Oxygenation vs Ventilation", type:"mc", diff:2, q:"RR of 8â€“30 br/min requires:", o:["Ventilation","CPR","Oxygenation","Intubation"], a:2, exp:"Normal-ish RR â†’ supplemental oxygenation is sufficient." },
  { id:"a29", mod:"Airway & Breathing", topic:"Oxygenation vs Ventilation", type:"mc", diff:2, q:"CYANOSIS skin color â†’ the patient needs:", o:["Oxygenation","Ventilation","Suction only","Left lateral"], a:1, exp:"Cyanosis = severe hypoxia â†’ ventilation required." },
  { id:"a30", mod:"Airway & Breathing", topic:"Oxygenation vs Ventilation", type:"tf", diff:2, q:"SpO2 < 85% in a verbal/painful/unresponsive patient requires VENTILATION.", a:true, exp:"Unconscious + SpO2 <85% = ventilation. Alert + SpO2 <85% = oxygenation." },
  { id:"a31", mod:"Airway & Breathing", topic:"Oxygenation vs Ventilation", type:"mc", diff:3, q:"SpO2 < 85% with an ALERT patient requires:", o:["Ventilation","CPR","Oxygenation","No intervention"], a:2, exp:"Alert patient can protect airway â€” high-flow oxygenation is appropriate." },
  // â”€â”€â”€ BVM VENTILATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:"a32", mod:"Airway & Breathing", topic:"BVM Ventilation",            type:"mc", diff:1, q:"BVM oxygen flow rate?", o:["5 L/min","10 L/min","15 L/min","20 L/min"], a:2, exp:"BVM is connected to 15 L/min O2 to ensure near-100% oxygen delivery." },
  { id:"a33", mod:"Airway & Breathing", topic:"BVM Ventilation",            type:"mc", diff:1, q:"Ventilation rate for ADULT using BVM?", o:["6â€“8 br/min","10â€“12 br/min","15â€“20 br/min","40â€“60 br/min"], a:1, exp:"Adults: 10â€“12 breaths/min. Remember: Squeeze-1001-1002-1003-1004-1005-Squeeze." },
  { id:"a34", mod:"Airway & Breathing", topic:"BVM Ventilation",            type:"mc", diff:2, q:"Ventilation rate for CHILD/INFANT using BVM?", o:["10â€“12 br/min","15â€“20 br/min","20â€“30 br/min","40â€“60 br/min"], a:1, exp:"Child/Infant: 15â€“20 breaths/min. Squeeze-1001-1002-1003-Squeeze." },
  { id:"a35", mod:"Airway & Breathing", topic:"BVM Ventilation",            type:"mc", diff:2, q:"Ventilation rate for NEONATE using BVM?", o:["10â€“12 br/min","15â€“20 br/min","20â€“30 br/min","40â€“60 br/min"], a:3, exp:"Neonate: 40â€“60 breaths/min. Squeeze-2-3-Squeeze rhythm." },
  { id:"a36", mod:"Airway & Breathing", topic:"BVM Ventilation",            type:"tf", diff:1, q:"Adequate BVM ventilation is confirmed when chest rises and falls with each breath.", a:true, exp:"Visible chest rise + fall is the primary sign of adequate ventilation." },
  { id:"a37", mod:"Airway & Breathing", topic:"BVM Ventilation",            type:"mc", diff:2, q:"Self-inflating bag capacity for ADULT?", o:["250 ml","500 ml","1000 ml","1500 ml"], a:3, exp:"Adult BVM: 1500 ml bag, 2600 ml reservoir bag." },
  { id:"a38", mod:"Airway & Breathing", topic:"BVM Ventilation",            type:"mc", diff:2, q:"Sign of INADEQUATE ventilation?", o:["Chest rises with ventilation","Heart rate normalizes","Cyanosis present or worsens","Skin color becomes normal"], a:2, exp:"Persistent or worsening cyanosis = ventilation is inadequate." },
  { id:"a39", mod:"Airway & Breathing", topic:"BVM Ventilation",            type:"mc", diff:2, q:"First corrective action for poor chest rise during ventilation?", o:["Increase O2 flow","Reposition the head","Switch to NPA","Call for backup"], a:1, exp:"Reposition first â€” most poor chest rise is due to airway alignment." },
  { id:"a40", mod:"Airway & Breathing", topic:"BVM Ventilation",            type:"mc", diff:3, q:"What does AMBU stand for?", o:["Airway Manual Breathing Unit","Artificial Manual Breathing Unit","Assisted Manual Breathing Upgrade","Advanced Manual Breathing Unit"], a:1, exp:"AMBU = Artificial Manual Breathing Unit (another name for BVM)." },
  // â”€â”€â”€ OXYGEN DEVICES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:"a41", mod:"Airway & Breathing", topic:"Oxygen Devices",             type:"mc", diff:1, q:"Nasal Cannula is used for which level of respiratory distress?", o:["Severe","Moderate","Mild","Cardiac arrest"], a:2, exp:"Nasal cannula = mild distress, SpO2 >90%, patient can speak normally." },
  { id:"a42", mod:"Airway & Breathing", topic:"Oxygen Devices",             type:"mc", diff:2, q:"Nasal Cannula O2 delivery range?", o:["10â€“20%","24â€“44%","35â€“60%","Up to 90%"], a:1, exp:"Nasal cannula delivers 24â€“44% O2 at 1â€“6 L/min." },
  { id:"a43", mod:"Airway & Breathing", topic:"Oxygen Devices",             type:"mc", diff:1, q:"Flow rate for Nasal Cannula?", o:["1â€“6 L/min","6â€“10 L/min","10â€“15 L/min","15â€“20 L/min"], a:0, exp:"Nasal cannula: 1â€“6 L/min. Higher flow causes mucosal drying." },
  { id:"a44", mod:"Airway & Breathing", topic:"Oxygen Devices",             type:"mc", diff:2, q:"Simple Face Mask O2 delivery range?", o:["24â€“44%","35â€“60%","Up to 90%","100%"], a:1, exp:"Simple face mask: 35â€“60% O2 at 6â€“10 L/min." },
  { id:"a45", mod:"Airway & Breathing", topic:"Oxygen Devices",             type:"mc", diff:2, q:"Simple Face Mask is used for which level of distress?", o:["Mild","Moderate","Severe","Cardiac arrest"], a:1, exp:"Moderate distress, SpO2 <90%, unable to speak in full sentences." },
  { id:"a46", mod:"Airway & Breathing", topic:"Oxygen Devices",             type:"mc", diff:2, q:"Non-Rebreather Mask (NRM) delivers up to?", o:["44%","60%","75%","90%"], a:3, exp:"NRM: up to 90% O2 at 10â€“15 L/min." },
  { id:"a47", mod:"Airway & Breathing", topic:"Oxygen Devices",             type:"tf", diff:1, q:"Non-Rebreather Mask is set at 10â€“15 L/min.", a:true, exp:"NRM requires 10â€“15 L/min to keep the reservoir bag inflated." },
  { id:"a48", mod:"Airway & Breathing", topic:"Oxygen Devices",             type:"mc", diff:3, q:"NRM is used when SpO2 is:", o:[">90% with mild distress","85â€“90% moderate distress","Below 85% with patient CONSCIOUS","Below 85% unconscious"], a:2, exp:"NRM for conscious patients with SpO2 <85%. Unconscious <85% needs BVM ventilation." },
  { id:"a49", mod:"Airway & Breathing", topic:"Oxygen Devices",             type:"mc", diff:3, q:"Arrange these O2 devices from lowest to highest O2 delivery:", o:["NRM â†’ Simple Mask â†’ Nasal Cannula","Nasal Cannula â†’ Simple Mask â†’ NRM","Simple Mask â†’ Nasal Cannula â†’ NRM","NRM â†’ Nasal Cannula â†’ Simple Mask"], a:1, exp:"Nasal Cannula (24â€“44%) â†’ Simple Mask (35â€“60%) â†’ NRM (up to 90%)." },
  { id:"a50", mod:"Airway & Breathing", topic:"Oxygen Devices",             type:"mc", diff:2, q:"Which O2 device is used when the patient is unable to speak in full sentences?", o:["Nasal Cannula","Simple Face Mask","Non-Rebreather Mask","BVM"], a:1, exp:"Unable to speak in full sentences = moderate distress â†’ Simple Face Mask." },

  // â”€â”€â”€ TRAUMA ASSESSMENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { id:"t1",  mod:"Trauma Assessment", topic:"Pre-Arrival & Scene Size-up",     type:"mc", diff:1, q:"What does BSI stand for in Scene Size-up?", o:["Basic Safety Intervention","Body Substance Isolation","Biological Scene Inspection","Basic Scene Investigation"], a:1, exp:"BSI = Body Substance Isolation â€” personal protective equipment worn before patient contact." },
  { id:"t2",  mod:"Trauma Assessment", topic:"Pre-Arrival & Scene Size-up",     type:"mc", diff:1, q:"Which is assessed during Scene Size-up?", o:["Blood pressure","SpO2","Mechanism of Injury (MOI)","Pupil reaction"], a:2, exp:"Scene Size-up includes BSI, scene safety, number of patients, additional resources, and MOI." },
  { id:"t3",  mod:"Trauma Assessment", topic:"Pre-Arrival & Scene Size-up",     type:"tf", diff:1, q:"C-collar and spine board are prepared during Pre-Arrival Preparation.", a:true, exp:"Pre-arrival prep includes CAB equipment, C-collar, spine board, protocol review, and reassurance." },
  { id:"t4",  mod:"Trauma Assessment", topic:"Pre-Arrival & Scene Size-up",     type:"mc", diff:2, q:"What does MOI stand for?", o:["Method of Intervention","Mechanism of Injury","Mode of Illness","Management of Injuries"], a:1, exp:"MOI = Mechanism of Injury â€” how the trauma occurred guides assessment priorities." },
  { id:"t5",  mod:"Trauma Assessment", topic:"Pre-Arrival & Scene Size-up",     type:"mc", diff:2, q:"Which is NOT listed in Pre-Arrival Preparation for trauma?", o:["C-collar","Spine board","CAB equipment","Defibrillator"], a:3, exp:"Pre-arrival lists CAB equipment, C-collar, spine board. Defibrillator is for cardiac events." },
  { id:"t6",  mod:"Trauma Assessment", topic:"Primary Survey GRC-ABC",          type:"mc", diff:1, q:"In GRC-ABC, what does 'G' stand for?", o:["General Impression","Get vitals","Guard airway","Generate response"], a:0, exp:"G = General Impression: Age, Gender, Height, Weight, Activity, Position, Manual C-spine immobilization." },
  { id:"t7",  mod:"Trauma Assessment", topic:"Primary Survey GRC-ABC",          type:"mc", diff:1, q:"What does AVPU stand for?", o:["Airway, Ventilation, Perfusion, Urgency","Alert, Verbal, Pain, Unresponsive","Assess, Ventilate, Position, Unload","Alert, Volume, Pressure, Unresponsive"], a:1, exp:"AVPU = Alert, Verbal response, Pain response, Unresponsive â€” determines level of consciousness." },
  { id:"t8",  mod:"Trauma Assessment", topic:"Primary Survey GRC-ABC",          type:"tf", diff:1, q:"Manual C-spine immobilization is initiated during the General Impression (G) step.", a:true, exp:"Manual C-spine immobilization is part of G in GRC-ABC to protect the spinal cord early." },
  { id:"t9",  mod:"Trauma Assessment", topic:"Primary Survey GRC-ABC",          type:"mc", diff:2, q:"Which is a Major Chest Injury in the Primary Survey?", o:["Pneumonia","Flail Chest","Haemorrhoids","Spinal stenosis"], a:1, exp:"Major Chest Injuries: Flail Chest, Open Pneumothorax, Impaled Object." },
  { id:"t10", mod:"Trauma Assessment", topic:"Primary Survey GRC-ABC",          type:"mc", diff:2, q:"Major bleeding in trauma is caused by all EXCEPT:", o:["Open fracture","Crush injury","Amputation","Simple bruising"], a:3, exp:"Major bleeding: blood vessel bleeding, open fracture, crush injury, amputation. Simple bruising is minor." },
  { id:"t11", mod:"Trauma Assessment", topic:"Primary Survey GRC-ABC",          type:"mc", diff:2, q:"In C-Circulation, which pulse is checked to assess perfusion?", o:["Carotid pulse","Femoral pulse","Radial pulse","Brachial pulse"], a:2, exp:"CRT and Radial Pulse are checked in C-Circulation to assess perfusion status." },
  { id:"t12", mod:"Trauma Assessment", topic:"Primary Survey GRC-ABC",          type:"mc", diff:2, q:"CRT > 2 seconds with pulse > 100 or < 60 indicates:", o:["Normal perfusion","Major bleeding only","Poor perfusion","Adequate circulation"], a:2, exp:"CRT >2s + abnormal pulse = Poor Perfusion â†’ requires immediate intervention." },
  { id:"t13", mod:"Trauma Assessment", topic:"Primary Survey GRC-ABC",          type:"mc", diff:2, q:"Adequate breathing in trauma = RR between:", o:["6â€“10 breaths/min","10â€“30 breaths/min","20â€“40 breaths/min","30â€“50 breaths/min"], a:1, exp:"Adequate RR for trauma: 10â€“30 breaths/min. Outside this range = inadequate â†’ BVM ventilation." },
  { id:"t14", mod:"Trauma Assessment", topic:"Primary Survey GRC-ABC",          type:"mc", diff:2, q:"Absent chest rise in trauma requires:", o:["Nasal cannula only","Start BVM ventilation","Apply C-collar only","Log roll immediately"], a:1, exp:"Absent chest rise = no breathing â†’ Start BVM ventilation immediately." },
  { id:"t15", mod:"Trauma Assessment", topic:"Primary Survey GRC-ABC",          type:"mc", diff:3, q:"An unresponsive trauma patient with no pulse needs:", o:["Oxygen via NRM","Log roll","BLS Protocol (CPR)","IV fluids first"], a:2, exp:"Unresponsive + no carotid pulse â†’ Call 108, get AED, start BLS Protocol." },
  { id:"t16", mod:"Trauma Assessment", topic:"Log Roll & Packaging",            type:"mc", diff:1, q:"DCAP BTLS stands for:", o:["Deformity, Contusions, Abrasions, Punctures, Burns, Tenderness, Lacerations, Swelling","Damage, Cuts, Abscesses, Pain, Bleeding, Trauma, Lesions, Soreness","Deformity, Compression, Abrasions, Pain, Burns, Tenderness, Lacerations, Swelling","Damage, Contusions, Abrasions, Punctures, Bruising, Tenderness, Lacerations, Swelling"], a:0, exp:"DCAP BTLS: Deformity, Contusions, Abrasions, Punctures, Burns, Tenderness, Lacerations, Swelling." },
  { id:"t17", mod:"Trauma Assessment", topic:"Log Roll & Packaging",            type:"mc", diff:2, q:"How many straps are used in spinal packaging?", o:["3","5","7","9"], a:2, exp:"Spinal packaging requires 7 straps with the spine board." },
  { id:"t18", mod:"Trauma Assessment", topic:"Log Roll & Packaging",            type:"mc", diff:3, q:"Which stretcher is used for pelvic fracture or bilateral femur fracture?", o:["Wheeled stretcher","Scoop stretcher","Basket stretcher","Spine board only"], a:1, exp:"Scoop stretcher minimizes movement for pelvic fracture and bilateral femur fracture." },
  { id:"t19", mod:"Trauma Assessment", topic:"Log Roll & Packaging",            type:"tf", diff:2, q:"Log roll and spinal packaging are completed BEFORE shifting the patient to the ambulance.", a:true, exp:"Log roll â†’ DCAP BTLS â†’ spinal packaging â†’ THEN shift to ambulance." },
  { id:"t20", mod:"Trauma Assessment", topic:"In-Ambulance Interventions",      type:"mc", diff:2, q:"Pulse > 100 or < 60 in the ambulance requires:", o:["Oxygenation","IV Fluids per ERCP","Place an IV line","Dextrose"], a:2, exp:"Abnormal pulse â†’ Place an IV line for vascular access." },
  { id:"t21", mod:"Trauma Assessment", topic:"In-Ambulance Interventions",      type:"mc", diff:2, q:"Hypotension in the ambulance is treated with:", o:["Nasal cannula O2","IV Fluids per ERCP advice","Dextrose only","Suction"], a:1, exp:"Hypotension â†’ IV Fluids as per ERCP Advice to restore blood pressure." },
  { id:"t22", mod:"Trauma Assessment", topic:"In-Ambulance Interventions",      type:"mc", diff:2, q:"Hypo/Hyperglycemia in the ambulance is treated with:", o:["IV Fluids","Oxygenation","Dextrose/NS per ERCP advice","IV only"], a:2, exp:"Blood sugar abnormality â†’ Dextrose or NS as per ERCP Advice." },
  { id:"t23", mod:"Trauma Assessment", topic:"History SAMPLE & OPQRST",         type:"mc", diff:1, q:"What does SAMPLE stand for?", o:["Signs, Allergies, Medications, Past history, Last meal, Events","Symptoms, Allergy, Medical history, Pain, Last intake, Events","Signs, Assess, Medications, Pain, Lab results, Events","Symptoms, Allergies, Medications, Past history, Last meal, Events"], a:3, exp:"SAMPLE: Symptoms & Signs, Allergies, Medications, Past medical history, Last meal, Events." },
  { id:"t24", mod:"Trauma Assessment", topic:"History SAMPLE & OPQRST",         type:"mc", diff:1, q:"OPQRST stands for:", o:["Onset, Pain, Quality, Region, Severity, Time","Onset, Provocation, Quality, Region, Severity, Time","Origin, Pain, Quality, Radiation, Severity, Type","Onset, Palliation, Quality, Region, Signs, Time"], a:1, exp:"OPQRST: Onset, Provocation/Palliation, Quality, Region/Radiation, Severity, Time." },
  { id:"t25", mod:"Trauma Assessment", topic:"History SAMPLE & OPQRST",         type:"mc", diff:2, q:"'P' in OPQRST (Provocation) refers to:", o:["Patient's past history","What makes pain better or worse","Pulse rate","Position of patient"], a:1, exp:"P = Provocation/Palliation â€” what increases or decreases the pain/complaint." },
  { id:"t26", mod:"Trauma Assessment", topic:"History SAMPLE & OPQRST",         type:"mc", diff:2, q:"'Q' in OPQRST (Quality) refers to:", o:["Severity on 1â€“10 scale","Nature of pain (sharp, dull, burning)","When pain started","Where pain radiates"], a:1, exp:"Q = Quality/character of pain: sharp, dull, burning, squeezing, throbbing, or crushing." },
  { id:"t27", mod:"Trauma Assessment", topic:"History SAMPLE & OPQRST",         type:"mc", diff:2, q:"'L' in SAMPLE refers to:", o:["Level of consciousness","Location of injury","Last meal (last oral intake)","Lab results"], a:2, exp:"L = Last meal â€” what and when was the patient's last oral intake." },
  { id:"t28", mod:"Trauma Assessment", topic:"History SAMPLE & OPQRST",         type:"tf", diff:2, q:"'E' in SAMPLE stands for Events leading up to the illness or injury.", a:true, exp:"E = Events â€” what was the patient doing when the complaint started." },
  { id:"t29", mod:"Trauma Assessment", topic:"Secondary Survey",                 type:"mc", diff:1, q:"An ALERT patient in the Secondary Survey undergoes:", o:["Rapid Assessment (head-to-toe)","Focused Assessment","OPQRST only","Log roll"], a:1, exp:"Alert â†’ Focused Assessment. V/P/U â†’ Rapid Assessment (head-to-toe)." },
  { id:"t30", mod:"Trauma Assessment", topic:"Secondary Survey",                 type:"mc", diff:1, q:"A V/P/U patient in the Secondary Survey undergoes:", o:["Focused Assessment","SAMPLE History only","Rapid Assessment (head-to-toe)","Ongoing Assessment only"], a:2, exp:"V/P/U (Verbal/Pain/Unresponsive) â†’ Rapid Assessment (head-to-toe) in 60â€“90 seconds." },
  { id:"t31", mod:"Trauma Assessment", topic:"Secondary Survey",                 type:"tf", diff:1, q:"Rapid Trauma Assessment should be completed in 60â€“90 seconds.", a:true, exp:"Rapid Trauma Assessment is a brief head-to-toe exam completed in 60â€“90 seconds." },
  { id:"t32", mod:"Trauma Assessment", topic:"Secondary Survey",                 type:"mc", diff:2, q:"TIC in trauma assessment stands for:", o:["Temperature, Inflammation, Contusion","Tenderness, Instability, Crepitus","Trauma, Inspection, Circulation","Tenderness, Ischemia, Compression"], a:1, exp:"TIC = Tenderness, Instability, Crepitus â€” assessed during palpation of each body region." },
  { id:"t33", mod:"Trauma Assessment", topic:"Secondary Survey",                 type:"mc", diff:2, q:"PMS in extremity assessment stands for:", o:["Pain, Movement, Swelling","Pulse, Motor, Sensation","Position, Mechanism, Stability","Palpation, Movement, Signs"], a:1, exp:"PMS = Pulse, Motor, Sensation â€” checked for all extremities to assess neurovascular status." },
  { id:"t34", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"mc", diff:2, q:"Raccoon's eyes and Battle's sign indicate:", o:["Open pneumothorax","Tension pneumothorax","Base of skull fracture","Flail chest"], a:2, exp:"Raccoon's eyes + Battle's sign = Base of Skull Fracture â€” contraindicate NPA insertion." },
  { id:"t35", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"mc", diff:2, q:"Tracheal deviation from midline suggests:", o:["Flail chest","Tension pneumothorax","Abdominal evisceration","Pelvic fracture"], a:1, exp:"Tracheal deviation away from midline indicates Tension Pneumothorax." },
  { id:"t36", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"mc", diff:2, q:"Jugular vein distension (JVD) may indicate:", o:["Open pneumothorax","Base of skull fracture","Tension pneumothorax or cardiac tamponade","Flail chest"], a:2, exp:"JVD = Tension Pneumothorax OR Cardiac Tamponade â€” both raise intrathoracic pressure." },
  { id:"t37", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"mc", diff:2, q:"Paradoxical chest movement indicates:", o:["Open pneumothorax","Flail Chest","Tension pneumothorax","Cardiac tamponade"], a:1, exp:"Paradoxical movement (segment moves opposite to chest wall) = Flail Chest â†’ bulky dressing." },
  { id:"t38", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"mc", diff:3, q:"Treatment for Open Pneumothorax (air-sucking chest wound)?", o:["Bulky dressing","Occlusive dressing only","Three-way seal dressing","Sterile wet dressing"], a:2, exp:"Open Pneumothorax (red air bubbles at wound) â†’ Three-way seal dressing (sealed on 3 sides)." },
  { id:"t39", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"mc", diff:2, q:"Abdominal evisceration is treated with:", o:["Dry sterile dressing","Occlusive dressing","Sterile WET dressing","Three-way seal dressing"], a:2, exp:"Evisceration (organs outside abdomen) â†’ Sterile WET dressing to keep organs moist." },
  { id:"t40", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"mc", diff:2, q:"A dull sound on chest percussion indicates:", o:["Air collection (Pneumothorax)","Normal lung tissue","Blood/fluid collection","Bowel sounds"], a:2, exp:"Dull = blood/fluid (Haemothorax). Drum/hyperresonant = air collection (Pneumothorax)." },
  { id:"t41", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"tf", diff:2, q:"A drum sound on percussion indicates air collection in the chest.", a:true, exp:"Drum (hyperresonant) sound = air/Pneumothorax. Dull sound = blood/fluid/Haemothorax." },
  { id:"t42", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"mc", diff:2, q:"The abdomen is divided into how many quadrants for palpation?", o:["2","3","4","6"], a:2, exp:"Abdomen is divided into 4 quadrants for systematic palpation during rapid assessment." },
  { id:"t43", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"mc", diff:3, q:"Positive pelvic compression test leads to:", o:["Log roll immediately","Apply Pelvic Binder","Place IV line","Spinal packaging only"], a:1, exp:"Positive pelvic compression (inward and downward) â†’ Apply Pelvic Binder." },
  { id:"t44", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"tf", diff:3, q:"If pelvic instability is found, the test must NOT be repeated.", a:true, exp:"Repeating pelvic palpation when instability is detected can worsen internal hemorrhage." },
  { id:"t45", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"mc", diff:2, q:"Peripheral pulse for the LOWER extremity is checked at:", o:["Radial and Ulnar","Brachial and Radial","Dorsalis Pedis and Posterior Tibial","Femoral and Popliteal"], a:2, exp:"Lower extremity: Dorsalis Pedis + Posterior Tibial. Upper extremity: Radial pulse." },
  { id:"t46", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"mc", diff:2, q:"A penetrating abdominal wound should be covered with:", o:["Sterile wet dressing","Bulky dressing","Occlusive dressing","Three-way seal dressing"], a:2, exp:"Abdominal penetration â†’ Occlusive dressing to prevent further contamination." },
  { id:"t47", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"mc", diff:3, q:"CSF/blood from ear or nose + Raccoon's eyes indicates:", o:["Open pneumothorax","Tension pneumothorax","Base of skull fracture","Facial trauma only"], a:2, exp:"CSF or blood from ear/nose + periorbital/mastoid bruising = Base of Skull Fracture." },
  { id:"t48", mod:"Trauma Assessment", topic:"Ongoing Assessment",              type:"mc", diff:1, q:"What is checked during Ongoing/Reassessment?", o:["MOI only","Scene safety","Level of consciousness, Circulation, Airway, Breathing","Number of patients"], a:2, exp:"Ongoing Assessment: LOC, Circulation, Airway, Breathing + Repeat Vitals + Check interventions." },
  { id:"t49", mod:"Trauma Assessment", topic:"Ongoing Assessment",              type:"tf", diff:1, q:"IV line and oxygen supply are checked as part of the Ongoing Assessment.", a:true, exp:"Ongoing Assessment checks interventions: IV line, Oxygen, plus repeat vitals and LOC." },
  { id:"t50", mod:"Trauma Assessment", topic:"Ongoing Assessment",              type:"mc", diff:2, q:"The correct Trauma Assessment sequence is:", o:["Primary Survey â†’ Scene Size-up â†’ History â†’ Secondary Survey","Pre-Arrival â†’ Scene Size-up â†’ Primary Survey â†’ Log Roll â†’ History/Vitals â†’ Secondary Survey â†’ Ongoing Assessment","Scene Size-up â†’ Primary Survey â†’ Secondary Survey â†’ Pre-Arrival","Primary Survey â†’ Pre-Arrival â†’ Scene Size-up â†’ Ongoing Assessment"], a:1, exp:"Correct: Pre-Arrival Prep â†’ Scene Size-up â†’ Primary Survey (GRC-ABC) â†’ Log Roll â†’ Vitals/History â†’ Secondary Survey â†’ Ongoing Assessment â†’ Admission & Documentation." },

  { id:"t51", mod:"Trauma Assessment", topic:"Pre-Arrival & Scene Size-up",     type:"mc", diff:1, q:"What is the FIRST step in Trauma Patient Assessment sequence?", o:["Scene Size-up","Primary Survey","Pre-Arrival Preparation","Log Roll"], a:2, exp:"Pre-Arrival Preparation is the very first step â€” think about the case, anticipate complications, prepare equipment." },
  { id:"t52", mod:"Trauma Assessment", topic:"Pre-Arrival & Scene Size-up",     type:"mc", diff:2, q:"How many components are assessed during Scene Size-up?", o:["3","4","5","6"], a:2, exp:"5 components: BSI/PPE, Scene Safety, Number of Patients, Additional Resources, MOI/Nature of Illness." },
  { id:"t53", mod:"Trauma Assessment", topic:"Pre-Arrival & Scene Size-up",     type:"tf",  diff:1, q:"Scene safety is assessed BEFORE putting on personal protective equipment (BSI).", a:false, exp:"BSI/PPE must come FIRST in Scene Size-up, before assessing scene safety." },
  { id:"t54", mod:"Trauma Assessment", topic:"Pre-Arrival & Scene Size-up",     type:"mc", diff:3, q:"Why is anticipating complications part of Pre-Arrival Preparation?", o:["To delay response","To prepare the right equipment and protocols before arriving","To avoid scene entry","To assess MOI remotely"], a:1, exp:"Anticipating complications allows the team to prepare the right equipment, medicines, and review protocols before arrival." },

  { id:"t55", mod:"Trauma Assessment", topic:"Primary Survey GRC-ABC",          type:"mc", diff:1, q:"The order of the Primary Survey in Trauma is:", o:["ABC-GRC","GRC-ABC","CAB-GRC","GRC-CAB"], a:1, exp:"Trauma Primary Survey follows GRC-ABC: General impression, Response, Circulation, Airway, Breathing, Circulation." },
  { id:"t56", mod:"Trauma Assessment", topic:"Primary Survey GRC-ABC",          type:"mc", diff:2, q:"Which of these is part of the General Impression (G) step?", o:["Measure blood pressure","Check SpO2","Note patient's age and gender","Auscultate breath sounds"], a:2, exp:"General Impression: Age, Gender, Height, Weight, Activity, Position, Manual C-spine immobilization â€” no equipment yet." },
  { id:"t57", mod:"Trauma Assessment", topic:"Primary Survey GRC-ABC",          type:"mc", diff:2, q:"In an UNRESPONSIVE trauma patient â€” what is the first action after noting unresponsiveness?", o:["Check radial pulse","Start CPR","Call 108 and get AED","Log roll the patient"], a:2, exp:"Unresponsive â†’ Call 108 & Get AED â†’ Check Carotid Pulse â†’ if absent â†’ BLS Protocol." },
  { id:"t58", mod:"Trauma Assessment", topic:"Primary Survey GRC-ABC",          type:"tf",  diff:2, q:"In a responsive trauma patient (Alert/Verbal/Pain), you check for major bleeding BEFORE checking the airway.", a:true, exp:"GRC-ABC sequence: Circulation (C) â€” check major bleeding â€” comes BEFORE Airway (A) in trauma." },
  { id:"t59", mod:"Trauma Assessment", topic:"Primary Survey GRC-ABC",          type:"mc", diff:2, q:"Abdominal Evisceration is classified as which type of major injury?", o:["Major bleeding","Major chest injury","Major abdominal injury","Spinal injury"], a:2, exp:"Evisceration (organs outside abdomen) is listed as a major abdominal injury in the GRC-ABC circulation note." },
  { id:"t60", mod:"Trauma Assessment", topic:"Primary Survey GRC-ABC",          type:"mc", diff:3, q:"An Impaled Object in the chest is classified as:", o:["Major bleeding only","Major chest injury","Abdominal injury","Spinal injury"], a:1, exp:"Major Chest Injuries: Flail Chest, Open Pneumothorax, Impaled Object." },
  { id:"t61", mod:"Trauma Assessment", topic:"Primary Survey GRC-ABC",          type:"mc", diff:3, q:"After applying a cervical collar, an ALERT trauma patient's airway is assessed for:", o:["Basic airway management","Patency then breathing","Jaw thrust only","BVM immediately"], a:1, exp:"Alert â†’ Airway Patency â†’ Breathing. V/P/U â†’ Basic Airway Management (Open, Clear, Maintain)." },
  { id:"t62", mod:"Trauma Assessment", topic:"Primary Survey GRC-ABC",          type:"tf",  diff:2, q:"Cervical collar is applied during the Airway (A) step of GRC-ABC.", a:true, exp:"Cervical collar application is part of the Airway step (A) in the primary survey." },

  { id:"t63", mod:"Trauma Assessment", topic:"Log Roll & Packaging",            type:"mc", diff:1, q:"What is assessed on the patient's BACK during Log Roll?", o:["SpO2 and pulse","DCAP BTLS","OPQRST history","GCS score"], a:1, exp:"Log Roll assesses the back for DCAP BTLS: Deformity, Contusions, Abrasions, Punctures, Burns, Tenderness, Lacerations, Swelling." },
  { id:"t64", mod:"Trauma Assessment", topic:"Log Roll & Packaging",            type:"mc", diff:2, q:"After the Log Roll and spinal packaging, the next step is:", o:["Take history","Secondary survey","Shift the patient to ambulance","Apply pelvic binder"], a:2, exp:"After Log Roll â†’ spinal packaging â†’ SHIFT patient to ambulance." },
  { id:"t65", mod:"Trauma Assessment", topic:"Log Roll & Packaging",            type:"tf",  diff:2, q:"A scoop stretcher is used instead of the spine board for pelvic and bilateral femur fractures.", a:true, exp:"Scoop stretcher minimizes pelvic and femur movement. Spine board is standard spinal packaging." },
  { id:"t66", mod:"Trauma Assessment", topic:"Log Roll & Packaging",            type:"mc", diff:3, q:"TIC stands for what in trauma palpation assessment?", o:["Trauma, Inspection, Circulation","Temperature, Ischemia, Contusion","Tenderness, Instability, Crepitus","Tissue, Integrity, Compression"], a:2, exp:"TIC = Tenderness, Instability, Crepitus â€” assessed during palpation at every body region." },

  { id:"t67", mod:"Trauma Assessment", topic:"In-Ambulance Interventions",      type:"mc", diff:1, q:"In the ambulance, vitals include all of these EXCEPT:", o:["Pulse","Respiratory Rate","GCS score","Blood Pressure"], a:2, exp:"In-ambulance vitals: Pulse, RR, BP, SpO2, and if necessary CBG. GCS is part of LOC assessment, not listed in the vitals table." },
  { id:"t68", mod:"Trauma Assessment", topic:"In-Ambulance Interventions",      type:"mc", diff:2, q:"Mild/Moderate/Severe SpO2 abnormality in the ambulance requires:", o:["IV fluids","Dextrose","Oxygenation/Ventilation","Place IV only"], a:2, exp:"SpO2 abnormality (Mild/Moderate/Severe) â†’ Oxygenation or Ventilation depending on severity." },
  { id:"t69", mod:"Trauma Assessment", topic:"In-Ambulance Interventions",      type:"mc", diff:2, q:"CBG (Capillary Blood Glucose) in the ambulance is checked:", o:["For every trauma patient","Only for neonates","If necessary â€” for AMS, seizures, head injury, etc.","Only if SpO2 is low"], a:2, exp:"CBG is checked IF necessary â€” for altered mental status, seizures, head injury, etc." },
  { id:"t70", mod:"Trauma Assessment", topic:"In-Ambulance Interventions",      type:"tf",  diff:1, q:"All trauma patients receive IV fluids in the ambulance regardless of blood pressure.", a:false, exp:"IV fluids are given for hypotension per ERCP advice â€” not routinely for all patients." },

  { id:"t71", mod:"Trauma Assessment", topic:"History SAMPLE & OPQRST",         type:"mc", diff:1, q:"'A' in SAMPLE stands for:", o:["Assessment","Airway","Allergies","Activity"], a:2, exp:"A = Allergies â€” allergy to drug, dust, food, etc." },
  { id:"t72", mod:"Trauma Assessment", topic:"History SAMPLE & OPQRST",         type:"mc", diff:1, q:"'M' in SAMPLE stands for:", o:["Movement","Mechanism","Medications","Mental status"], a:2, exp:"M = Medications â€” name and dose of any medicine the patient takes regularly." },
  { id:"t73", mod:"Trauma Assessment", topic:"History SAMPLE & OPQRST",         type:"mc", diff:2, q:"'P' in SAMPLE stands for:", o:["Pulse rate","Provocation","Past medical history","Pain scale"], a:2, exp:"P = Past medical history â€” previous admissions, illnesses, surgeries." },
  { id:"t74", mod:"Trauma Assessment", topic:"History SAMPLE & OPQRST",         type:"mc", diff:2, q:"'O' in OPQRST (Onset) asks:", o:["Where is the pain?","Was onset sudden or gradual?","How severe is the pain?","What makes pain worse?"], a:1, exp:"O = Onset â€” was the pain/complaint sudden or gradual (slow) in onset?" },
  { id:"t75", mod:"Trauma Assessment", topic:"History SAMPLE & OPQRST",         type:"mc", diff:2, q:"'S' in OPQRST (Severity) asks:", o:["Was it sudden?","What is the nature of pain?","How severe is it â€” increasing or decreasing?","Where does it radiate?"], a:2, exp:"S = Severity â€” how severe is the pain/complaint and is it increasing or decreasing?" },
  { id:"t76", mod:"Trauma Assessment", topic:"History SAMPLE & OPQRST",         type:"mc", diff:2, q:"'T' in OPQRST (Time) asks:", o:["What is the patient's temperature?","When did the chief complaint start?","How long has the patient been unconscious?","What time did EMS arrive?"], a:1, exp:"T = Time â€” when did the chief complaint start?" },
  { id:"t77", mod:"Trauma Assessment", topic:"History SAMPLE & OPQRST",         type:"tf",  diff:2, q:"In OPQRST, 'R' stands for Region and Radiation of pain.", a:true, exp:"R = Region and Radiation â€” where is the pain and does it radiate anywhere?" },

  { id:"t78", mod:"Trauma Assessment", topic:"Secondary Survey",                 type:"mc", diff:1, q:"The Secondary Survey is performed:", o:["Before the Primary Survey","At the same time as the Primary Survey","After the Primary Survey and immediate interventions","Before Log Roll"], a:2, exp:"Secondary Survey occurs after the Primary Survey, vitals, history, ERCP advice, and interventions." },
  { id:"t79", mod:"Trauma Assessment", topic:"Secondary Survey",                 type:"mc", diff:2, q:"The four techniques used in Rapid Medical Examination are:", o:["Look, Listen, Feel, Smell","Inspection, Palpation, Auscultation, Percussion","DCAP BTLS, TIC, PMS, AVPU","Observe, Palpate, Percuss, Test"], a:1, exp:"Rapid Medical Examination uses: Inspection (Look), Palpation (Feel), Auscultation (Listen), Percussion." },
  { id:"t80", mod:"Trauma Assessment", topic:"Secondary Survey",                 type:"mc", diff:2, q:"The Rapid Trauma Assessment is a head-to-toe exam designed to identify:", o:["Only fractures","Only bleeding","Injuries that may kill or disable the patient during transport","Patient's past medical history"], a:2, exp:"Rapid Assessment identifies injuries/illness that may kill or disable the patient DURING TRANSPORT." },
  { id:"t81", mod:"Trauma Assessment", topic:"Secondary Survey",                 type:"tf",  diff:2, q:"During head assessment, checking gloves for blood is a step in the Rapid Trauma Assessment.", a:true, exp:"After palpating the head, check gloves for bleeding â€” a subtle but important sign of head injury." },

  { id:"t82", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"mc", diff:1, q:"During neck assessment, tracheal deviation from midline indicates:", o:["Flail chest","Base of skull fracture","Tension pneumothorax","Cardiac tamponade"], a:2, exp:"Tracheal deviation = Tension Pneumothorax â€” trachea shifts away from the affected side." },
  { id:"t83", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"mc", diff:2, q:"In chest assessment, 'red bubbles at wound site' indicates:", o:["Haemothorax","Flail Chest","Open Pneumothorax","Cardiac tamponade"], a:2, exp:"Red air bubbles (air-sucking wound) = Open Pneumothorax â†’ Three-way seal dressing." },
  { id:"t84", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"mc", diff:2, q:"Flail Chest is treated with:", o:["Three-way seal dressing","Sterile wet dressing","Occlusive dressing","Bulky dressing"], a:3, exp:"Flail Chest (paradoxical movement) â†’ Bulky dressing to stabilize the flail segment." },
  { id:"t85", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"mc", diff:2, q:"Unequal breath sounds on auscultation should prompt:", o:["Immediate intubation","Percussion to differentiate air vs fluid","Suction","Log roll"], a:1, exp:"Unequal air entry â†’ do Percussion to differentiate: Drum = air (Pneumothorax), Dull = blood/fluid (Haemothorax)." },
  { id:"t86", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"mc", diff:3, q:"Which chest finding requires a THREE-WAY seal dressing?", o:["Flail Chest","Haemothorax","Open Pneumothorax","Tension Pneumothorax"], a:2, exp:"Open Pneumothorax (air-sucking wound with red bubbles) requires a three-way (3-sided) occlusive seal dressing." },
  { id:"t87", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"mc", diff:2, q:"During abdominal assessment, skin discoloration and distension are assessed by:", o:["Palpation","Auscultation","Inspection","Percussion"], a:2, exp:"Abdominal inspection looks for distension, discoloration, evisceration, laceration, penetration, wounds." },
  { id:"t88", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"tf",  diff:2, q:"Abdominal palpation divides the abdomen into 4 quadrants.", a:true, exp:"Abdomen is divided into 4 quadrants for palpation â€” assessing rigidity, tenderness, and distension." },
  { id:"t89", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"mc", diff:3, q:"Pelvic compression test is performed in which direction?", o:["Outward and upward","Inward and downward","Lateral only","Anterior only"], a:1, exp:"Pelvic compression: push Inward and Downward. If positive â†’ apply Pelvic Binder." },
  { id:"t90", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"mc", diff:2, q:"Femur, Patella, Tibia, and Fibula are all assessed in:", o:["Upper extremity exam","Pelvic exam","Lower extremity exam","Spinal assessment"], a:2, exp:"Lower extremity: Femur, Patella, Tibia, Fibula, Tarsal, Metatarsal, Phalanges â€” all assessed for DCAP BTLS and PMS." },
  { id:"t91", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"mc", diff:2, q:"Upper extremity bones assessed in trauma include:", o:["Femur, Patella, Tibia","Humerus, Radial, Ulnar, Carpal, Metacarpal, Phalanges","Femur, Fibula, Tarsal","Pelvis, Sacrum, Coccyx"], a:1, exp:"Upper extremity: Humerus, Radial, Ulnar, Carpal, Metacarpal, Phalanges â€” assessed for DCAP BTLS and PMS." },
  { id:"t92", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"mc", diff:3, q:"Upper extremity peripheral pulse is assessed at:", o:["Dorsalis Pedis","Posterior Tibial","Femoral","Radial"], a:3, exp:"Upper extremity peripheral pulse: Radial. Lower extremity: Dorsalis Pedis + Posterior Tibial." },
  { id:"t93", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"tf",  diff:2, q:"Motor and Sensation are assessed along with Pulse during extremity examination (PMS).", a:true, exp:"PMS = Pulse, Motor, Sensation â€” all three must be checked for every extremity." },
  { id:"t94", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"mc", diff:2, q:"Maxillofacial assessment includes checking for:", o:["Tracheal deviation","JVD","Raccoon's eye and Battle's sign","Paradoxical movement"], a:2, exp:"Maxillofacial area: DCAP BTLS + Raccoon's eye, Battle's sign, CSF/blood from ear/nose = Base of Skull Fracture." },
  { id:"t95", mod:"Trauma Assessment", topic:"Head-to-Toe Rapid Assessment",    type:"mc", diff:3, q:"Which finding during neck assessment suggests cardiac tamponade?", o:["Tracheal deviation","Crepitus","Jugular vein distension (JVD)","Battle's sign"], a:2, exp:"JVD in the neck = Tension Pneumothorax OR Cardiac Tamponade (both increase central venous pressure)." },

  { id:"t96", mod:"Trauma Assessment", topic:"Ongoing Assessment",              type:"mc", diff:1, q:"What does Ongoing Assessment include besides repeating vitals?", o:["Reassess MOI only","Check LOC, Circulation, Airway, Breathing + check interventions","Redo Primary Survey from scratch","Complete new SAMPLE history"], a:1, exp:"Ongoing: LOC, Circulation, Airway, Breathing + Repeat Vitals + Check IV line and Oxygen." },
  { id:"t97", mod:"Trauma Assessment", topic:"Ongoing Assessment",              type:"tf",  diff:1, q:"Admission and Documentation is the FINAL step in Trauma Patient Assessment.", a:true, exp:"The complete sequence ends with: Ongoing Assessment â†’ Admission & Documentation." },
  { id:"t98", mod:"Trauma Assessment", topic:"Ongoing Assessment",              type:"mc", diff:2, q:"A 2nd ERCP Advice may be sought during:", o:["Pre-Arrival","Scene Size-up","Head-to-toe Rapid Assessment / after Secondary Survey","Primary Survey only"], a:2, exp:"2nd ERCP Advice is sought if necessary after the Secondary Survey / head-to-toe assessment." },
  { id:"t99", mod:"Trauma Assessment", topic:"Ongoing Assessment",              type:"mc", diff:3, q:"Which interventions are specifically checked during Ongoing Assessment?", o:["C-collar and spine board","IV line and Oxygen","BVM and OPA","Pelvic binder and splints"], a:1, exp:"Ongoing Assessment checks: IV line and Oxygen supply â€” ensuring previously placed interventions are functioning." },
  { id:"t100",mod:"Trauma Assessment", topic:"Ongoing Assessment",              type:"mc", diff:2, q:"The Trauma Patient Assessment is considered complete after:", o:["Primary Survey","Secondary Survey","Ongoing Assessment and Admission & Documentation","Log Roll"], a:2, exp:"Patient Assessment is complete only after all steps including Ongoing Assessment and Admission & Documentation." },

  // â”€â”€â”€ CARDIAC & CHEST PAIN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Chest Pain Basics
  { id:"cp1",  mod:"Cardiac & Chest Pain", topic:"Chest Pain Basics",         type:"mc", diff:1, q:"Chest pain (Angina) occurs when there is:", o:["Excess blood to the heart","Inadequate or complete stoppage of blood to the myocardium","Fluid around the lungs","High blood pressure only"], a:1, exp:"Angina = inadequate or complete stoppage of blood supply to the cardiac muscles (myocardium)." },
  { id:"cp2",  mod:"Cardiac & Chest Pain", topic:"Chest Pain Basics",         type:"mc", diff:1, q:"What percentage of chest pain cases are REAL heart attacks?", o:["5â€“10%","11â€“28%","40â€“50%","60â€“70%"], a:1, exp:"Only 11â€“28% of chest pain is a real heart attack. All chest pain must still be assessed seriously." },
  { id:"cp3",  mod:"Cardiac & Chest Pain", topic:"Chest Pain Basics",         type:"mc", diff:1, q:"What percentage of heart attack deaths occur within the first 2 hours?", o:["10%","25%","50%","75%"], a:2, exp:"50% of heart attack deaths occur in the first 2 hours â€” emphasizing the need for rapid response." },
  { id:"cp4",  mod:"Cardiac & Chest Pain", topic:"Chest Pain Basics",         type:"tf",  diff:1, q:"All chest pain indicates a heart attack.", a:false, exp:"Only 11â€“28% of chest pain is a real heart attack. Other causes include pulmonary embolism, aortic dissection, pericardial effusion." },
  { id:"cp5",  mod:"Cardiac & Chest Pain", topic:"Chest Pain Basics",         type:"mc", diff:2, q:"Which is a cause of chest pain?", o:["Hypertension only","Pulmonary embolism","Hyperglycemia","Stroke"], a:1, exp:"Causes of chest pain: Myocardial infarction, Pulmonary embolism, Aortic dissection, Pericardial effusion." },
  { id:"cp6",  mod:"Cardiac & Chest Pain", topic:"Chest Pain Basics",         type:"mc", diff:2, q:"Which is NOT listed as a cause of chest pain?", o:["Myocardial infarction","Aortic dissection","Pulmonary embolism","Pneumonia"], a:3, exp:"The 4 listed causes: Myocardial infarction, Pulmonary embolism, Aortic dissection, Pericardial effusion. Pneumonia is not listed." },
  { id:"cp7",  mod:"Cardiac & Chest Pain", topic:"Chest Pain Basics",         type:"mc", diff:2, q:"Diaphoresis means:", o:["Chest squeezing","Difficulty breathing","Heavy sweating","Jaw pain"], a:2, exp:"Diaphoresis = profuse/heavy sweating â€” a classic sign of myocardial infarction." },
  { id:"cp8",  mod:"Cardiac & Chest Pain", topic:"Chest Pain Basics",         type:"mc", diff:1, q:"Chest pain radiates to which areas?", o:["Abdomen and legs","Arms, jaw, neck, and back","Head and ears only","Fingers and toes"], a:1, exp:"Cardiac chest pain typically radiates to the arms, jaw, neck, and upper back." },
  { id:"cp9",  mod:"Cardiac & Chest Pain", topic:"Chest Pain Basics",         type:"tf",  diff:1, q:"Dyspnea (breathing difficulty) is a sign/symptom of chest pain (angina).", a:true, exp:"Signs & symptoms of angina: chest discomfort, radiation, epigastric pain, dyspnea, nausea/vomiting, weakness/dizziness, diaphoresis." },
  { id:"cp10", mod:"Cardiac & Chest Pain", topic:"Chest Pain Basics",         type:"mc", diff:2, q:"Which symptom describes epigastric pain in the context of chest pain?", o:["Pain in the chest only","Upper abdominal/stomach area pain","Pain in the legs","Pain in the jaw only"], a:1, exp:"Epigastric pain (upper abdominal pain) is a common presentation of MI, often mistaken for indigestion." },
  { id:"cp11", mod:"Cardiac & Chest Pain", topic:"Chest Pain Basics",         type:"mc", diff:2, q:"Which of these is a sign/symptom of angina?", o:["Rash","Haematuria","Weakness, dizziness, and fainting","Bone pain"], a:2, exp:"Angina symptoms: chest discomfort (squeezing), radiation to arms/jaw/neck/back, epigastric pain, dyspnea, nausea, weakness, dizziness, fainting, diaphoresis." },

  // Risk Factors
  { id:"cp12", mod:"Cardiac & Chest Pain", topic:"Risk Factors",              type:"mc", diff:1, q:"Which is a primary risk factor for chest pain/heart disease?", o:["Young age","Hypertension","Regular exercise","Low cholesterol"], a:1, exp:"Primary risk factors: Age, Family History/Hereditary, Hypertension, Hypercholesterolemia, Smoking, Diabetes." },
  { id:"cp13", mod:"Cardiac & Chest Pain", topic:"Risk Factors",              type:"mc", diff:1, q:"Which is a CONTRIBUTING risk factor for heart disease?", o:["Age","Hypertension","Obesity","Family history"], a:2, exp:"Contributing risk factors: Diet, Lack of Exercise, Obesity. Primary factors: Age, Family History, Hypertension, Hypercholesterol, Smoking, Diabetes." },
  { id:"cp14", mod:"Cardiac & Chest Pain", topic:"Risk Factors",              type:"tf",  diff:1, q:"Smoking is a primary risk factor for chest pain / heart disease.", a:true, exp:"Primary risk factors include: Age, Family History, Hypertension, Hypercholesterolemia, Smoking, Diabetes." },
  { id:"cp15", mod:"Cardiac & Chest Pain", topic:"Risk Factors",              type:"tf",  diff:2, q:"Lack of exercise is classified as a PRIMARY risk factor for heart disease.", a:false, exp:"Lack of exercise is a CONTRIBUTING risk factor, not a primary one. Primary factors: Age, Family History, Hypertension, Hypercholesterol, Smoking, Diabetes." },
  { id:"cp16", mod:"Cardiac & Chest Pain", topic:"Risk Factors",              type:"mc", diff:2, q:"Hypercholesterolemia as a risk factor refers to:", o:["High blood pressure","High blood sugar","High blood cholesterol","High heart rate"], a:2, exp:"Hypercholesterolemia = elevated blood cholesterol â€” a major risk factor for coronary artery disease." },
  { id:"cp17", mod:"Cardiac & Chest Pain", topic:"Risk Factors",              type:"mc", diff:2, q:"Which of these is NOT listed as a contributing risk factor?", o:["Diet","Lack of exercise","Obesity","Hypertension"], a:3, exp:"Hypertension is a PRIMARY risk factor. Contributing factors are Diet, Lack of Exercise, and Obesity." },
  { id:"cp18", mod:"Cardiac & Chest Pain", topic:"Risk Factors",              type:"mc", diff:3, q:"How many primary risk factors for heart disease are listed in the protocol?", o:["3","4","5","6"], a:3, exp:"6 primary risk factors: Age, Family History/Hereditary, Hypertension, Hypercholesterolemia, Smoking, Diabetes." },

  // History of Chest Pain â€“ OPQRST
  { id:"cp19", mod:"Cardiac & Chest Pain", topic:"Chest Pain History OPQRST", type:"mc", diff:1, q:"The ONSET of chest pain in cardiac cases is:", o:["Gradual over weeks","Sudden","Only during sleep","Unrelated to activity"], a:1, exp:"Cardiac chest pain onset is typically sudden." },
  { id:"cp20", mod:"Cardiac & Chest Pain", topic:"Chest Pain History OPQRST", type:"mc", diff:1, q:"Chest pain PROVOCATION (what triggers it) is:", o:["Cold weather only","Eating","Physical exertion or stress","Breathing deeply"], a:2, exp:"Cardiac chest pain is provoked by physical exertion or stress." },
  { id:"cp21", mod:"Cardiac & Chest Pain", topic:"Chest Pain History OPQRST", type:"mc", diff:1, q:"The QUALITY of cardiac chest pain is best described as:", o:["Sharp and stabbing","Pressure or squeezing pain","Burning only","Colicky"], a:1, exp:"Cardiac chest pain quality: pressure or squeezing sensation â€” not sharp or stabbing." },
  { id:"cp22", mod:"Cardiac & Chest Pain", topic:"Chest Pain History OPQRST", type:"mc", diff:1, q:"Cardiac chest pain RADIATES to:", o:["Legs and feet","Arms, jaw, neck, and upper back","Abdomen only","Head only"], a:1, exp:"Cardiac pain radiates to arms, jaw, neck, and upper back â€” classic referred pain pattern." },
  { id:"cp23", mod:"Cardiac & Chest Pain", topic:"Chest Pain History OPQRST", type:"mc", diff:1, q:"The TIME characteristic of cardiac chest pain is:", o:["Worsened with rest","Relieved with rest","Constant regardless of activity","Only at night"], a:1, exp:"Angina is typically relieved with rest â€” this differentiates stable angina from MI." },
  { id:"cp24", mod:"Cardiac & Chest Pain", topic:"Chest Pain History OPQRST", type:"mc", diff:2, q:"The SEVERITY of cardiac chest pain is:", o:["Only severe","Only mild","Mild to moderate or severe","Always 10/10"], a:2, exp:"Cardiac pain severity ranges: mild to moderate or severe." },
  { id:"cp25", mod:"Cardiac & Chest Pain", topic:"Chest Pain History OPQRST", type:"mc", diff:2, q:"Which are listed as UNIFYING SYMPTOMS of cardiac chest pain?", o:["Rash, fever, jaundice","Breathing difficulty, dizziness, sweating, weakness, vomiting","Haematuria, oliguria, oedema","Headache, neck stiffness, photophobia"], a:1, exp:"Unifying symptoms: Breathing difficulty, Dizziness, Sweating, Weakness & Vomiting." },
  { id:"cp26", mod:"Cardiac & Chest Pain", topic:"Chest Pain History OPQRST", type:"tf",  diff:2, q:"Cardiac chest pain is typically relieved with rest.", a:true, exp:"TIME: chest pain relieved with rest is characteristic of stable angina. Pain NOT relieved by rest suggests MI." },

  // Heart Score
  { id:"cp27", mod:"Cardiac & Chest Pain", topic:"Heart Score",               type:"mc", diff:2, q:"In the Heart Score, CONFIRMED signs & symptoms scores:", o:["0","1","2","3"], a:2, exp:"Signs & Symptoms scoring: Confirmed = 2, Doubtful (1â€“2 symptoms) = 1, No doubt = 0." },
  { id:"cp28", mod:"Cardiac & Chest Pain", topic:"Heart Score",               type:"mc", diff:2, q:"In the Heart Score, a patient aged 45â€“65 years scores:", o:["0","1","2","3"], a:1, exp:"Age scoring: >65 yrs = 2, 45â€“65 yrs = 1, <45 yrs = 0." },
  { id:"cp29", mod:"Cardiac & Chest Pain", topic:"Heart Score",               type:"mc", diff:2, q:"In the Heart Score, a patient aged OVER 65 years scores:", o:["0","1","2","3"], a:2, exp:"Age >65 years = maximum age score of 2." },
  { id:"cp30", mod:"Cardiac & Chest Pain", topic:"Heart Score",               type:"mc", diff:2, q:"In the Heart Score, having MORE THAN 3 co-morbidity disorders scores:", o:["0","1","2","3"], a:2, exp:"Co-morbidity: More than 3 diseases = 2, 1â€“2 diseases = 1, None = 0." },
  { id:"cp31", mod:"Cardiac & Chest Pain", topic:"Heart Score",               type:"mc", diff:2, q:"A Heart Score of 0â€“1 indicates:", o:["Severe MI / Life threatening","Stable MI patient","Suspected MI","No cardiac involvement"], a:2, exp:"0â€“1 = Mild = Suspected MI. 1â€“2 = Moderate = Stable MI. 3â€“6 = Severe = Critical/Life threatening." },
  { id:"cp32", mod:"Cardiac & Chest Pain", topic:"Heart Score",               type:"mc", diff:2, q:"A Heart Score of 3â€“6 indicates:", o:["Suspected MI","Stable MI / 0â€“2 MI patient","Severe MI / Critical / Life threatening","No MI"], a:2, exp:"Score 3â€“6 = Severe = Severe MI / Critical / Life threatening." },
  { id:"cp33", mod:"Cardiac & Chest Pain", topic:"Heart Score",               type:"mc", diff:3, q:"A Heart Score of 1â€“2 indicates:", o:["Suspected MI (Mild)","0â€“2 MI patient / Stable (Moderate)","Severe MI / Critical","No MI"], a:1, exp:"Score 1â€“2 = Moderate = 0â€“2 MI patient / Stable." },
  { id:"cp34", mod:"Cardiac & Chest Pain", topic:"Heart Score",               type:"mc", diff:3, q:"Which condition is listed as a Co-Morbidity disorder in the Heart Score?", o:["Pneumonia","Arthrosclerosis","Anaemia","Hypothyroidism"], a:1, exp:"Co-morbidity disorders: Family History/Hereditary, Hypertension, Hypercholesterol, Smoking, Diabetes, Obesity, Arthrosclerosis." },
  { id:"cp35", mod:"Cardiac & Chest Pain", topic:"Heart Score",               type:"tf",  diff:2, q:"Arthrosclerosis is listed as a Co-Morbidity disorder in the Heart Score.", a:true, exp:"Heart Score co-morbidities include Arthrosclerosis along with Hypertension, Hypercholesterol, Smoking, Diabetes, Obesity, and Family History." },
  { id:"cp36", mod:"Cardiac & Chest Pain", topic:"Heart Score",               type:"mc", diff:2, q:"What is the maximum possible Heart Score?", o:["3","4","5","6"], a:3, exp:"Maximum Heart Score = 6 (Signs & Symptoms=2 + Age=2 + Co-morbidities=2)." },
  { id:"cp37", mod:"Cardiac & Chest Pain", topic:"Heart Score",               type:"tf",  diff:2, q:"A patient under 45 years scores 0 for age in the Heart Score.", a:true, exp:"Age scoring: <45 yrs = 0, 45â€“65 yrs = 1, >65 yrs = 2." },

  // Triage / PAIN Categories
  { id:"cp38", mod:"Cardiac & Chest Pain", topic:"PAIN Triage Categories",    type:"mc", diff:1, q:"In the PAIN triage system, 'P' (Priority Risk) corresponds to which triage color?", o:["Green","Yellow","Orange","Red"], a:3, exp:"P = Priority Risk = Red triage = ST Elevation MI (STEMI) â€” most critical." },
  { id:"cp39", mod:"Cardiac & Chest Pain", topic:"PAIN Triage Categories",    type:"mc", diff:1, q:"In the PAIN system, 'N' (Low Risk) corresponds to:", o:["Red / STEMI","Yellow / Non-STEMI","Green / No MI","Orange / Suspected MI"], a:2, exp:"N = Low Risk = Green triage = No MI." },
  { id:"cp40", mod:"Cardiac & Chest Pain", topic:"PAIN Triage Categories",    type:"mc", diff:1, q:"Priority Risk (P) in cardiac triage means:", o:["Non-ST Elevation MI","No MI","ST Elevation MI (STEMI)","Intermediate risk"], a:2, exp:"Priority Risk (P) = Red = ST Elevation MI (STEMI) â€” requires immediate cardiac ICU admission." },
  { id:"cp41", mod:"Cardiac & Chest Pain", topic:"PAIN Triage Categories",    type:"mc", diff:2, q:"'A' in PAIN triage (Advanced Risk) corresponds to:", o:["ST Elevation MI / Red","Non-ST Elevation MI / Yellow","No MI / Green","Suspected MI"], a:1, exp:"A = Advanced Risk = Yellow = Non-ST Elevation MI (NSTEMI)." },
  { id:"cp42", mod:"Cardiac & Chest Pain", topic:"PAIN Triage Categories",    type:"mc", diff:2, q:"Which ECG finding is associated with Priority Risk (Red / STEMI)?", o:["S & T wave changes only","ST depression in V1 V2","ST elevation >1mm","Normal ECG"], a:2, exp:"Priority Risk criteria: Pain >30 min, ST elevation >1mm in ECG, Left Bundle Branch Block, ST depression in V1 V2." },
  { id:"cp43", mod:"Cardiac & Chest Pain", topic:"PAIN Triage Categories",    type:"mc", diff:2, q:"Left Bundle Branch Block (LBBB) in ECG is associated with:", o:["Low Risk / No MI","Intermediate Risk","Advanced Risk (NSTEMI)","Priority Risk (STEMI)"], a:3, exp:"LBBB in ECG is a Priority Risk (P/Red/STEMI) criterion." },
  { id:"cp44", mod:"Cardiac & Chest Pain", topic:"PAIN Triage Categories",    type:"mc", diff:2, q:"Advanced Risk (NSTEMI) criteria include:", o:["Pain > 30 minutes + ST elevation","History of pain in last 48 hours + S&T wave changes in ECG","ST elevation >1mm + LBBB","No symptoms"], a:1, exp:"Advanced Risk: Pain >20 min, History of pain in last 48 hrs, S & T wave changes in ECG â†’ Loading Dose â†’ Cardiac ICU." },
  { id:"cp45", mod:"Cardiac & Chest Pain", topic:"PAIN Triage Categories",    type:"tf",  diff:2, q:"Priority Risk patients are admitted to Cardiac ICU after Loading Dose.", a:true, exp:"Both Priority Risk (STEMI) and Advanced Risk (NSTEMI) result in Loading Dose â†’ Cardiac ICU admission." },
  { id:"cp46", mod:"Cardiac & Chest Pain", topic:"PAIN Triage Categories",    type:"mc", diff:3, q:"Pain lasting more than 30 minutes in the chest is a criterion for:", o:["Low Risk (N)","Intermediate Risk (I)","Advanced Risk (A)","Priority Risk (P)"], a:3, exp:"Priority Risk (P/Red/STEMI) criterion includes pain lasting more than 30 minutes." },
  { id:"cp47", mod:"Cardiac & Chest Pain", topic:"PAIN Triage Categories",    type:"mc", diff:3, q:"History of chest pain in the last 48 hours is a criterion for:", o:["Priority Risk (STEMI)","Advanced Risk (NSTEMI)","Low Risk","Intermediate Risk"], a:1, exp:"Advanced Risk (A/Yellow/NSTEMI) criteria: Pain >20 min, history of pain in last 48 hrs, S&T wave changes." },
  { id:"cp48", mod:"Cardiac & Chest Pain", topic:"PAIN Triage Categories",    type:"tf",  diff:3, q:"S & T wave changes in ECG indicate Advanced Risk (Non-STEMI).", a:true, exp:"S & T wave changes = Advanced Risk (A/Yellow/NSTEMI). ST elevation >1mm = Priority Risk (P/Red/STEMI)." },

  // Loading Dose
  { id:"cp49", mod:"Cardiac & Chest Pain", topic:"Loading Dose",              type:"mc", diff:1, q:"What is the total Loading Dose of Aspirin given?", o:["75 mg","150 mg","300 mg","600 mg"], a:2, exp:"Aspirin: 150 mg x 2 tablets = 300 mg total. It is an Anti-Platelet agent." },
  { id:"cp50", mod:"Cardiac & Chest Pain", topic:"Loading Dose",              type:"mc", diff:1, q:"What is the total Loading Dose of Clopidogrel given?", o:["75 mg","150 mg","300 mg","600 mg"], a:2, exp:"Clopidogrel: 75 mg x 4 tablets = 300 mg total. It is an Anti-Coagulant." },
  { id:"cp51", mod:"Cardiac & Chest Pain", topic:"Loading Dose",              type:"mc", diff:1, q:"What is the total Loading Dose of Atorvastatin given?", o:["20 mg","40 mg","80 mg","100 mg"], a:2, exp:"Atorvastatin: 20 mg x 4 tablets = 80 mg total. It is an Antihyperlipidemic agent." },
  { id:"cp52", mod:"Cardiac & Chest Pain", topic:"Loading Dose",              type:"mc", diff:1, q:"Aspirin in the Loading Dose acts as:", o:["Anti-Coagulant","Antihyperlipidemic","Anti-Platelet","Vasodilator"], a:2, exp:"Aspirin 300 mg = Anti-Platelet â€” prevents platelet aggregation to reduce clot formation." },
  { id:"cp53", mod:"Cardiac & Chest Pain", topic:"Loading Dose",              type:"mc", diff:1, q:"Clopidogrel in the Loading Dose acts as:", o:["Anti-Platelet","Anti-Coagulant","Antihyperlipidemic","Beta-blocker"], a:1, exp:"Clopidogrel 300 mg = Anti-Coagulant â€” prevents clot formation by blocking ADP receptors." },
  { id:"cp54", mod:"Cardiac & Chest Pain", topic:"Loading Dose",              type:"mc", diff:1, q:"Atorvastatin in the Loading Dose acts as:", o:["Anti-Platelet","Anti-Coagulant","Antihyperlipidemic","Vasodilator"], a:2, exp:"Atorvastatin 80 mg = Antihyperlipidemic â€” reduces cholesterol to prevent further plaque formation." },
  { id:"cp55", mod:"Cardiac & Chest Pain", topic:"Loading Dose",              type:"mc", diff:2, q:"How many tablets of Aspirin (150 mg each) are given in the Loading Dose?", o:["1 tablet","2 tablets","3 tablets","4 tablets"], a:1, exp:"Aspirin Loading Dose: 150 mg x 2 tablets = 300 mg total." },
  { id:"cp56", mod:"Cardiac & Chest Pain", topic:"Loading Dose",              type:"mc", diff:2, q:"How many tablets of Clopidogrel (75 mg each) are given in the Loading Dose?", o:["1 tablet","2 tablets","3 tablets","4 tablets"], a:3, exp:"Clopidogrel Loading Dose: 75 mg x 4 tablets = 300 mg total." },
  { id:"cp57", mod:"Cardiac & Chest Pain", topic:"Loading Dose",              type:"mc", diff:2, q:"How many tablets of Atorvastatin (20 mg each) are given in the Loading Dose?", o:["1 tablet","2 tablets","3 tablets","4 tablets"], a:3, exp:"Atorvastatin Loading Dose: 20 mg x 4 tablets = 80 mg total." },
  { id:"cp58", mod:"Cardiac & Chest Pain", topic:"Loading Dose",              type:"tf",  diff:2, q:"The Loading Dose consists of Aspirin, Clopidogrel, and Atorvastatin.", a:true, exp:"Loading Dose = Aspirin 300 mg (Anti-Platelet) + Clopidogrel 300 mg (Anti-Coagulant) + Atorvastatin 80 mg (Antihyperlipidemic)." },
  { id:"cp59", mod:"Cardiac & Chest Pain", topic:"Loading Dose",              type:"mc", diff:3, q:"Which Loading Dose drug specifically targets high cholesterol?", o:["Aspirin","Clopidogrel","Atorvastatin","All three"], a:2, exp:"Atorvastatin is the Antihyperlipidemic (cholesterol-lowering) drug in the Loading Dose." },
  { id:"cp60", mod:"Cardiac & Chest Pain", topic:"Loading Dose",              type:"mc", diff:3, q:"The total number of tablets given in a full Loading Dose is:", o:["4 tablets","6 tablets","8 tablets","10 tablets"], a:3, exp:"Total: Aspirin x2 + Clopidogrel x4 + Atorvastatin x4 = 10 tablets." },

  // Chest Pain Protocol
  { id:"cp61", mod:"Cardiac & Chest Pain", topic:"Chest Pain Protocol",       type:"mc", diff:1, q:"What is the FIRST step in the Chest Pain Protocol?", o:["Call 108","Give Loading Dose","Report chest pain and approach nearest PHC/GH","Do ECG immediately"], a:2, exp:"Protocol: Chest pain â†’ Call/approach Nearest PHC/GH â†’ Cardio opinion by phone â†’ ECG â†’ Confirm MI â†’ Loading Dose â†’ Call 108 â†’ Reach Govt GH." },
  { id:"cp62", mod:"Cardiac & Chest Pain", topic:"Chest Pain Protocol",       type:"mc", diff:1, q:"What must be done to CONFIRM MI before giving the Loading Dose?", o:["Blood test only","X-ray","ECG","Urine test"], a:2, exp:"ECG is performed and MI is confirmed before administering the Loading Dose." },
  { id:"cp63", mod:"Cardiac & Chest Pain", topic:"Chest Pain Protocol",       type:"mc", diff:2, q:"What is the CORRECT sequence of the Chest Pain Protocol?", o:["ECG â†’ Loading Dose â†’ Call 108 â†’ Approach PHC/GH â†’ Cardio opinion","Chest pain â†’ PHC/GH â†’ Cardio opinion by phone â†’ ECG â†’ Confirm MI â†’ Loading Dose â†’ Call 108 â†’ Govt GH","Loading Dose â†’ ECG â†’ Call 108 â†’ Confirm MI","Call 108 â†’ Loading Dose â†’ ECG â†’ Cardio opinion"], a:1, exp:"Correct sequence: Chest pain â†’ PHC/GH â†’ Cardio phone opinion â†’ ECG â†’ Confirm MI â†’ Loading Dose â†’ Call 108 â†’ Nearest Govt GH." },
  { id:"cp64", mod:"Cardiac & Chest Pain", topic:"Chest Pain Protocol",       type:"tf",  diff:2, q:"Cardio opinion is obtained by phone BEFORE performing the ECG.", a:true, exp:"Protocol sequence: approach PHC/GH â†’ Cardio opinion through phone â†’ ECG â†’ Confirm MI â†’ Loading Dose." },
  { id:"cp65", mod:"Cardiac & Chest Pain", topic:"Chest Pain Protocol",       type:"mc", diff:2, q:"After giving the Loading Dose, what is the next step?", o:["Repeat ECG","Admit to PHC","Call 108 and reach nearest Government GH","Give IV fluids"], a:2, exp:"After Loading Dose â†’ Call 108 â†’ Reach nearest Government GH for definitive cardiac care." },
  { id:"cp66", mod:"Cardiac & Chest Pain", topic:"Chest Pain Protocol",       type:"mc", diff:3, q:"ST depression in V1 and V2 segments on ECG indicates:", o:["Low Risk","Intermediate Risk","Advanced Risk (NSTEMI)","Priority Risk (STEMI)"], a:3, exp:"ST depression in V1 V2 is listed as a Priority Risk (P/Red/STEMI) criterion." },
  { id:"cp67", mod:"Cardiac & Chest Pain", topic:"Chest Pain Protocol",       type:"tf",  diff:1, q:"The Loading Dose is given AFTER MI is confirmed on ECG.", a:true, exp:"Protocol: ECG â†’ Confirm MI â†’ THEN give Loading Dose. Never before confirmation." },
  { id:"cp68", mod:"Cardiac & Chest Pain", topic:"Chest Pain Protocol",       type:"mc", diff:2, q:"Negative / Low Risk chest pain patients with no symptoms require:", o:["Loading Dose immediately","Cardiac ICU","No MI intervention (Low Risk pathway)","Immediate ECG only"], a:2, exp:"Negative/Low Risk with no symptoms â†’ No MI (Green/Low Risk pathway) â€” no loading dose required." },

  // â”€â”€â”€ CARDIO & CHEST PAIN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Chest Pain Basics
  { id:"cp1",  mod:"Cardio & Chest Pain", topic:"Chest Pain Basics",       type:"mc", diff:1, q:"Chest pain occurs in heart disease when there is:", o:["Excess blood supply to the heart","Inadequate or complete stoppage of blood supply to the myocardium","Infection of the pericardium","High blood pressure only"], a:1, exp:"Chest pain (Angina) = inadequate or complete stoppage of blood supply to the cardiac muscles (myocardium)." },
  { id:"cp2",  mod:"Cardio & Chest Pain", topic:"Chest Pain Basics",       type:"mc", diff:1, q:"What percentage of chest pain cases are actual heart attacks?", o:["5 to 10%","11 to 28%","30 to 40%","50 to 60%"], a:1, exp:"Only 11â€“28% of chest pain cases are real heart attacks. All chest pain must be assessed carefully." },
  { id:"cp3",  mod:"Cardio & Chest Pain", topic:"Chest Pain Basics",       type:"mc", diff:1, q:"What percentage of MI deaths occur within the first 2 hours?", o:["10%","25%","50%","75%"], a:2, exp:"50% of MI deaths occur in the first 2 hours â€” making rapid assessment and treatment critical." },
  { id:"cp4",  mod:"Cardio & Chest Pain", topic:"Chest Pain Basics",       type:"tf",  diff:1, q:"All chest pain indicates a heart attack.", a:false, exp:"Only 11â€“28% of chest pain is a real heart attack. Chest pain has many causes including pulmonary embolism, aortic dissection, and pericardial effusion." },
  { id:"cp5",  mod:"Cardio & Chest Pain", topic:"Chest Pain Basics",       type:"mc", diff:2, q:"Which of these is a cause of chest pain?", o:["Diabetes","Pulmonary embolism","Hypercholesterolemia","Obesity"], a:1, exp:"Causes of chest pain: Myocardial infarction, Pulmonary embolism, Aortic dissection, Pericardial effusion." },
  { id:"cp6",  mod:"Cardio & Chest Pain", topic:"Chest Pain Basics",       type:"mc", diff:2, q:"Which is NOT a listed cause of chest pain in this protocol?", o:["Myocardial infarction","Pulmonary embolism","Aortic dissection","Hypertension"], a:3, exp:"Causes: MI, Pulmonary embolism, Aortic dissection, Pericardial effusion. Hypertension is a risk factor, not a direct cause." },
  { id:"cp7",  mod:"Cardio & Chest Pain", topic:"Chest Pain Basics",       type:"mc", diff:2, q:"'Myocardium' refers to:", o:["The heart valve","The heart's outer lining","The cardiac muscle","The coronary artery"], a:2, exp:"Myocardium = the cardiac muscle. MI (Myocardial Infarction) = death of cardiac muscle tissue." },
  { id:"cp8",  mod:"Cardio & Chest Pain", topic:"Chest Pain Basics",       type:"tf",  diff:1, q:"Aortic dissection is a known cause of chest pain.", a:true, exp:"Causes of chest pain include: MI, Pulmonary embolism, Aortic dissection, Pericardial effusion." },

  // Risk Factors
  { id:"cp9",  mod:"Cardio & Chest Pain", topic:"Risk Factors",            type:"mc", diff:1, q:"Which is a PRIMARY risk factor for chest pain/MI?", o:["Obesity","Lack of exercise","Hypertension","Poor diet"], a:2, exp:"Primary risk factors: Age, Family history/Hereditary, Hypertension, Hypercholesterolemia, Smoking, Diabetes." },
  { id:"cp10", mod:"Cardio & Chest Pain", topic:"Risk Factors",            type:"mc", diff:1, q:"Which is a CONTRIBUTING (secondary) risk factor for MI?", o:["Hypertension","Diabetes","Obesity","Smoking"], a:2, exp:"Contributing risk factors: Diet, Lack of exercise, Obesity. Primary: Age, Hereditary, Hypertension, Hypercholesterolemia, Smoking, Diabetes." },
  { id:"cp11", mod:"Cardio & Chest Pain", topic:"Risk Factors",            type:"tf",  diff:2, q:"Family history (Hereditary) is a primary risk factor for MI.", a:true, exp:"Family history/Hereditary is listed as a primary risk factor alongside age, hypertension, smoking, and diabetes." },
  { id:"cp12", mod:"Cardio & Chest Pain", topic:"Risk Factors",            type:"mc", diff:2, q:"How many primary risk factors for MI are listed in the protocol?", o:["4","5","6","7"], a:2, exp:"6 primary risk factors: Age, Family History/Hereditary, Hypertension, Hypercholesterolemia, Smoking, Diabetes." },
  { id:"cp13", mod:"Cardio & Chest Pain", topic:"Risk Factors",            type:"mc", diff:2, q:"Which is NOT a co-morbidity disorder in the Heart Score?", o:["Hypertension","Arthrosclerosis","Obesity","Aortic dissection"], a:3, exp:"Heart Score co-morbidities: Family History, Hypertension, Hypercholesterol, Smoking, Diabetes, Obesity, Arthrosclerosis." },
  { id:"cp14", mod:"Cardio & Chest Pain", topic:"Risk Factors",            type:"mc", diff:3, q:"Hypercholesterolemia refers to:", o:["High blood sugar","High blood pressure","High cholesterol levels in blood","High uric acid levels"], a:2, exp:"Hypercholesterolemia = high levels of cholesterol in the blood â€” a major primary risk factor for MI." },
  { id:"cp15", mod:"Cardio & Chest Pain", topic:"Risk Factors",            type:"tf",  diff:2, q:"Diet and lack of exercise are contributing (secondary) risk factors for MI.", a:true, exp:"Contributing risk factors: Diet, Lack of exercise, Obesity. These contribute alongside primary risk factors." },

  // Signs & Symptoms
  { id:"cp16", mod:"Cardio & Chest Pain", topic:"Signs & Symptoms",        type:"mc", diff:1, q:"The chest discomfort in Angina is typically described as:", o:["Sharp stabbing pain","Squeezing or pressure pain","Burning pain only","Tearing pain"], a:1, exp:"Chest discomfort in Angina = squeezing, pressure-type pain. Quality in OPQRST = Pressure or Squeezing." },
  { id:"cp17", mod:"Cardio & Chest Pain", topic:"Signs & Symptoms",        type:"mc", diff:1, q:"Chest pain in MI typically radiates to:", o:["Legs and feet","Arms, jaw, neck & back","Abdomen and groin","Spine and pelvis"], a:1, exp:"MI pain radiates to: arms, jaw, neck & upper back â€” classic radiation pattern." },
  { id:"cp18", mod:"Cardio & Chest Pain", topic:"Signs & Symptoms",        type:"mc", diff:1, q:"'Diaphoresis' refers to:", o:["Difficulty breathing","Heavy sweating","Dizziness","Chest tightness"], a:1, exp:"Diaphoresis = heavy or profuse sweating â€” a key sign of MI and sympathetic nervous system activation." },
  { id:"cp19", mod:"Cardio & Chest Pain", topic:"Signs & Symptoms",        type:"mc", diff:1, q:"'Dyspnea' refers to:", o:["Heavy sweating","Nausea","Difficulty breathing","Fainting"], a:2, exp:"Dyspnea = difficulty breathing or shortness of breath â€” a common symptom of MI." },
  { id:"cp20", mod:"Cardio & Chest Pain", topic:"Signs & Symptoms",        type:"tf",  diff:1, q:"Epigastric pain (upper abdominal pain) can be a symptom of chest pain/MI.", a:true, exp:"Epigastric pain is listed as a sign of Angina/MI â€” patients sometimes describe MI as 'stomach pain'." },
  { id:"cp21", mod:"Cardio & Chest Pain", topic:"Signs & Symptoms",        type:"mc", diff:2, q:"Which set of symptoms are 'Unifying Symptoms' of chest pain?", o:["Fever, cough, sputum","Breathing difficulty, dizziness, sweating, weakness & vomiting","Sharp pain, bleeding, swelling","Rash, joint pain, blurred vision"], a:1, exp:"Unifying symptoms: Breathing difficulty, Dizziness, Sweating, Weakness & Vomiting." },
  { id:"cp22", mod:"Cardio & Chest Pain", topic:"Signs & Symptoms",        type:"mc", diff:2, q:"In the OPQRST for chest pain, 'Time' refers to:", o:["How long the patient has had the pain","The pain is relieved with rest","When EMS was called","Duration of sweating"], a:1, exp:"T in OPQRST for chest pain = pain is relieved with rest (typical of angina vs. continued MI pain)." },
  { id:"cp23", mod:"Cardio & Chest Pain", topic:"Signs & Symptoms",        type:"mc", diff:2, q:"In OPQRST for chest pain, what provokes the pain?", o:["Sleep and rest","Cold weather only","Physical exertion or stress","Eating a meal"], a:2, exp:"Provocation of chest pain = Physical exertion or stress. Palliation = relieved with rest." },
  { id:"cp24", mod:"Cardio & Chest Pain", topic:"Signs & Symptoms",        type:"mc", diff:1, q:"The onset of MI chest pain is typically:", o:["Gradual over days","Sudden","Only at night","After eating"], a:1, exp:"Onset of MI chest pain is SUDDEN â€” as opposed to other conditions which may be gradual." },
  { id:"cp25", mod:"Cardio & Chest Pain", topic:"Signs & Symptoms",        type:"mc", diff:2, q:"Severity of MI chest pain ranges from:", o:["Mild only","Mild to Moderate or Severe","Severe only","Always moderate"], a:1, exp:"Severity of MI chest pain = Mild to Moderate or Severe â€” it varies between patients." },
  { id:"cp26", mod:"Cardio & Chest Pain", topic:"Signs & Symptoms",        type:"tf",  diff:1, q:"Nausea and vomiting are recognized symptoms of MI.", a:true, exp:"Nausea and Vomiting are listed signs/symptoms of MI â€” common due to vagal stimulation." },
  { id:"cp27", mod:"Cardio & Chest Pain", topic:"Signs & Symptoms",        type:"mc", diff:2, q:"Which symptom combination best represents a classic MI presentation?", o:["Fever, sore throat, runny nose","Squeezing chest pain radiating to jaw + diaphoresis + dyspnea","Sharp pleuritic pain worsened by breathing","Sudden severe tearing chest pain radiating to the back"], a:1, exp:"Classic MI: Squeezing/pressure chest pain, radiation to arm/jaw/neck, diaphoresis, dyspnea, nausea." },

  // Heart Score
  { id:"cp28", mod:"Cardio & Chest Pain", topic:"Heart Score",             type:"mc", diff:2, q:"In the Heart Score, confirmed Signs & Symptoms scores:", o:["0","1","2","3"], a:2, exp:"Heart Score: Signs & Symptoms â€” Confirmed = 2, Doubtful (1 or 2 symptoms) = 1, No doubt = 0." },
  { id:"cp29", mod:"Cardio & Chest Pain", topic:"Heart Score",             type:"mc", diff:2, q:"In the Heart Score, age >65 years scores:", o:["0","1","2","3"], a:2, exp:"Heart Score Age: >65 yrs = 2, 45â€“65 yrs = 1, <45 yrs = 0." },
  { id:"cp30", mod:"Cardio & Chest Pain", topic:"Heart Score",             type:"mc", diff:2, q:"In the Heart Score, age 45â€“65 years scores:", o:["0","1","2","3"], a:1, exp:"Heart Score Age: >65 yrs = 2, 45â€“65 yrs = 1, <45 yrs = 0." },
  { id:"cp31", mod:"Cardio & Chest Pain", topic:"Heart Score",             type:"mc", diff:2, q:"In the Heart Score, more than 3 co-morbidity disorders scores:", o:["0","1","2","3"], a:2, exp:"Co-morbidity: More than 3 diseases = 2, 1 or 2 diseases = 1, None = 0." },
  { id:"cp32", mod:"Cardio & Chest Pain", topic:"Heart Score",             type:"mc", diff:2, q:"Heart Score 0â€“1 (Mild) indicates:", o:["Severe MI / Critical","Confirmed MI","Suspected MI","No MI"], a:2, exp:"Heart Score 0â€“1 = Mild = Suspected MI. Score 1â€“2 = Moderate (stable MI). Score 3â€“6 = Severe." },
  { id:"cp33", mod:"Cardio & Chest Pain", topic:"Heart Score",             type:"mc", diff:2, q:"Heart Score 3â€“6 (Severe) indicates:", o:["Suspected MI","Stable MI patient","Severe MI / Critical / Life-threatening","No MI"], a:2, exp:"Score 3â€“6 = Severe = Severe MI / Critical / Life-threatening â€” requires immediate intervention." },
  { id:"cp34", mod:"Cardio & Chest Pain", topic:"Heart Score",             type:"mc", diff:3, q:"Heart Score 1â€“2 (Moderate) indicates:", o:["Suspected MI","0â€“2 MI patient / Stable","Severe MI","No MI"], a:1, exp:"Score 1â€“2 = Moderate = 0â€“2 MI patient / Stable." },
  { id:"cp35", mod:"Cardio & Chest Pain", topic:"Heart Score",             type:"mc", diff:3, q:"Maximum possible Heart Score is:", o:["4","5","6","8"], a:2, exp:"Max score = 2 (symptoms) + 2 (age) + 2 (co-morbidities) = 6. Score 3â€“6 = Severe MI." },
  { id:"cp36", mod:"Cardio & Chest Pain", topic:"Heart Score",             type:"tf",  diff:2, q:"Arthrosclerosis is listed as a co-morbidity disorder in the Heart Score.", a:true, exp:"Co-morbidities in Heart Score: Family History, Hypertension, Hypercholesterol, Smoking, Diabetes, Obesity, Arthrosclerosis." },
  { id:"cp37", mod:"Cardio & Chest Pain", topic:"Heart Score",             type:"mc", diff:3, q:"A 70-year-old patient with confirmed symptoms and 2 co-morbidities has a Heart Score of:", o:["3","4","5","6"], a:2, exp:"Confirmed symptoms (2) + Age >65 (2) + 1â€“2 co-morbidities (1) = Score 5 â†’ Severe MI." },
  { id:"cp38", mod:"Cardio & Chest Pain", topic:"Heart Score",             type:"mc", diff:3, q:"A 40-year-old with doubtful symptoms and no co-morbidities has a Heart Score of:", o:["0","1","2","3"], a:1, exp:"Doubtful symptoms (1) + Age <45 (0) + No co-morbidities (0) = Score 1 â†’ Mild, Suspected MI." },

  // Chest Pain Protocol & Triage
  { id:"cp39", mod:"Cardio & Chest Pain", topic:"Chest Pain Protocol",     type:"mc", diff:1, q:"The correct Chest Pain Protocol sequence is:", o:["ECG â†’ Loading Dose â†’ Call PHC â†’ Call 108","Chest pain â†’ Nearest PHC/GH â†’ Cardio opinion â†’ ECG â†’ Confirm MI â†’ Loading Dose â†’ Call 108 â†’ Government GH","Call 108 â†’ ECG â†’ PHC â†’ Loading Dose","Loading Dose â†’ ECG â†’ Call 108 â†’ PHC"], a:1, exp:"Protocol: Chest pain â†’ Call/approach nearest PHC/GH â†’ Cardio opinion (phone) â†’ ECG â†’ Confirm MI â†’ Loading Dose â†’ Call 108 â†’ Government GH." },
  { id:"cp40", mod:"Cardio & Chest Pain", topic:"Chest Pain Protocol",     type:"mc", diff:2, q:"What comes AFTER confirming MI in the Chest Pain Protocol?", o:["Call 108 immediately","Administer Loading Dose","Get cardio opinion","Perform ECG"], a:1, exp:"After confirming MI on ECG â†’ administer Loading Dose â†’ then Call 108." },
  { id:"cp41", mod:"Cardio & Chest Pain", topic:"Chest Pain Protocol",     type:"tf",  diff:1, q:"ECG is performed BEFORE confirming MI and giving the Loading Dose.", a:true, exp:"Protocol sequence: ECG â†’ Confirm MI â†’ Loading Dose. ECG is essential for diagnosis before treatment." },
  { id:"cp42", mod:"Cardio & Chest Pain", topic:"Chest Pain Protocol",     type:"mc", diff:2, q:"Triage category 'P' (Priority Risk) corresponds to:", o:["Green / No MI","Yellow / Non-ST Elevation MI","Red / ST Elevation MI","Intermediate Risk"], a:2, exp:"P = Priority Risk = Red triage = ST Elevation MI (STEMI) â€” highest severity." },
  { id:"cp43", mod:"Cardio & Chest Pain", topic:"Chest Pain Protocol",     type:"mc", diff:2, q:"Triage category 'A' (Advanced Risk) corresponds to:", o:["Red / STEMI","Yellow / Non-ST Elevation MI","Green / No MI","Intermediate Risk"], a:1, exp:"A = Advanced Risk = Yellow triage = Non-ST Elevation MI (NSTEMI)." },
  { id:"cp44", mod:"Cardio & Chest Pain", topic:"Chest Pain Protocol",     type:"mc", diff:2, q:"Triage color GREEN indicates:", o:["ST Elevation MI","Non-ST Elevation MI","No MI (Low Risk)","Priority Risk"], a:2, exp:"Green = N (Low Risk) = No MI." },
  { id:"cp45", mod:"Cardio & Chest Pain", topic:"Chest Pain Protocol",     type:"mc", diff:3, q:"What does PAIN stand for in the triage categories?", o:["Pain, Angina, Ischemia, Necrosis","Priority, Advanced, Intermediate, No/Low Risk","Pulse, Assessment, Intervention, Nursing","Priority, Assessment, Intervention, Notification"], a:1, exp:"PAIN triage: P=Priority Risk (Red/STEMI), A=Advanced Risk (Yellow/NSTEMI), I=Intermediate Risk, N=Low Risk (Green/No MI)." },
  { id:"cp46", mod:"Cardio & Chest Pain", topic:"Chest Pain Protocol",     type:"mc", diff:3, q:"Priority Risk (P) patients show which ECG finding?", o:["S & T wave changes only","Normal ECG","ST elevation >1mm and/or Left Bundle Branch Block","Only ST depression"], a:2, exp:"Priority Risk features: Pain >30 min, ST elevation >1mm in ECG, Left Bundle Branch Block, ST depression in V1â€“V2." },
  { id:"cp47", mod:"Cardio & Chest Pain", topic:"Chest Pain Protocol",     type:"mc", diff:3, q:"Advanced Risk (A) patients have pain lasting more than:", o:["10 minutes","15 minutes","20 minutes","30 minutes"], a:2, exp:"Advanced Risk criteria: Pain >20 minutes, History of pain in last 48 hrs, S & T wave changes in ECG." },
  { id:"cp48", mod:"Cardio & Chest Pain", topic:"Chest Pain Protocol",     type:"tf",  diff:3, q:"ST depression in V1â€“V2 segments is a feature of Priority Risk (P) category.", a:true, exp:"Priority Risk (P) features include: Pain >30 min, ST elevation >1mm, Left Bundle Branch Block, ST depression in V1â€“V2." },
  { id:"cp49", mod:"Cardio & Chest Pain", topic:"Chest Pain Protocol",     type:"mc", diff:2, q:"Priority Risk and Advanced Risk patients are admitted to:", o:["General ward","Surgical ICU","Cardiac ICU","Observation ward"], a:2, exp:"Both Priority Risk and Advanced Risk patients â†’ Admission in Cardiac ICU." },
  { id:"cp50", mod:"Cardio & Chest Pain", topic:"Chest Pain Protocol",     type:"tf",  diff:2, q:"Negative/Low Risk and No Symptoms patients do NOT require cardiac ICU admission.", a:true, exp:"Negative/Low Risk â†’ No Symptoms â†’ No Cardiac ICU required." },

  // Loading Dose
  { id:"cp51", mod:"Cardio & Chest Pain", topic:"Loading Dose",            type:"mc", diff:1, q:"What is the Loading Dose of Aspirin for MI?", o:["75 mg","150 mg","300 mg","500 mg"], a:2, exp:"Aspirin Loading Dose: 150 mg Ã— 2 tablets = 300 mg total." },
  { id:"cp52", mod:"Cardio & Chest Pain", topic:"Loading Dose",            type:"mc", diff:1, q:"What is the Loading Dose of Clopidogrel for MI?", o:["75 mg","150 mg","300 mg","600 mg"], a:2, exp:"Clopidogrel Loading Dose: 75 mg Ã— 4 tablets = 300 mg total." },
  { id:"cp53", mod:"Cardio & Chest Pain", topic:"Loading Dose",            type:"mc", diff:1, q:"What is the Loading Dose of Atorvastatin for MI?", o:["20 mg","40 mg","80 mg","100 mg"], a:2, exp:"Atorvastatin Loading Dose: 20 mg Ã— 4 tablets = 80 mg total." },
  { id:"cp54", mod:"Cardio & Chest Pain", topic:"Loading Dose",            type:"mc", diff:2, q:"Aspirin in the Loading Dose acts as:", o:["Anti-coagulant","Anti-platelet","Antihyperlipidemic","Thrombolytic"], a:1, exp:"Aspirin = Anti-Platelet agent â€” prevents platelets from clumping and forming clots." },
  { id:"cp55", mod:"Cardio & Chest Pain", topic:"Loading Dose",            type:"mc", diff:2, q:"Clopidogrel in the Loading Dose acts as:", o:["Anti-platelet","Anti-coagulant","Antihyperlipidemic","Beta-blocker"], a:1, exp:"Clopidogrel = Anti-Coagulant â€” prevents blood clot formation in coronary vessels." },
  { id:"cp56", mod:"Cardio & Chest Pain", topic:"Loading Dose",            type:"mc", diff:2, q:"Atorvastatin in the Loading Dose acts as:", o:["Anti-platelet","Anti-coagulant","Antihyperlipidemic","Antihypertensive"], a:2, exp:"Atorvastatin = Antihyperlipidemic â€” lowers cholesterol and stabilizes arterial plaques." },
  { id:"cp57", mod:"Cardio & Chest Pain", topic:"Loading Dose",            type:"mc", diff:2, q:"How many tablets of Aspirin (150 mg each) are given in the Loading Dose?", o:["1 tablet","2 tablets","3 tablets","4 tablets"], a:1, exp:"Aspirin: 150 mg Ã— 2 tablets = 300 mg Loading Dose." },
  { id:"cp58", mod:"Cardio & Chest Pain", topic:"Loading Dose",            type:"mc", diff:2, q:"How many tablets of Clopidogrel (75 mg each) are given in the Loading Dose?", o:["1 tablet","2 tablets","3 tablets","4 tablets"], a:3, exp:"Clopidogrel: 75 mg Ã— 4 tablets = 300 mg Loading Dose." },
  { id:"cp59", mod:"Cardio & Chest Pain", topic:"Loading Dose",            type:"mc", diff:2, q:"How many tablets of Atorvastatin (20 mg each) are given in the Loading Dose?", o:["1 tablet","2 tablets","3 tablets","4 tablets"], a:3, exp:"Atorvastatin: 20 mg Ã— 4 tablets = 80 mg Loading Dose." },
  { id:"cp60", mod:"Cardio & Chest Pain", topic:"Loading Dose",            type:"tf",  diff:1, q:"The Aspirin Loading Dose total is 300 mg (2 tablets of 150 mg each).", a:true, exp:"Aspirin: 150 mg Ã— 2 = 300 mg. Correct." },
  { id:"cp61", mod:"Cardio & Chest Pain", topic:"Loading Dose",            type:"tf",  diff:2, q:"The Clopidogrel Loading Dose total is 300 mg (4 tablets of 75 mg each).", a:true, exp:"Clopidogrel: 75 mg Ã— 4 = 300 mg. Correct." },
  { id:"cp62", mod:"Cardio & Chest Pain", topic:"Loading Dose",            type:"tf",  diff:2, q:"The Atorvastatin Loading Dose total is 80 mg (4 tablets of 20 mg each).", a:true, exp:"Atorvastatin: 20 mg Ã— 4 = 80 mg. Correct." },
  { id:"cp63", mod:"Cardio & Chest Pain", topic:"Loading Dose",            type:"mc", diff:3, q:"Which combination represents the complete Loading Dose?", o:["Aspirin 150mg + Clopidogrel 300mg + Atorvastatin 40mg","Aspirin 300mg + Clopidogrel 300mg + Atorvastatin 80mg","Aspirin 300mg + Clopidogrel 150mg + Atorvastatin 80mg","Aspirin 150mg + Clopidogrel 75mg + Atorvastatin 20mg"], a:1, exp:"Complete Loading Dose: Aspirin 300mg + Clopidogrel 300mg + Atorvastatin 80mg." },
  { id:"cp64", mod:"Cardio & Chest Pain", topic:"Loading Dose",            type:"mc", diff:3, q:"The Loading Dose targets which THREE mechanisms?", o:["Anti-platelet, Anti-coagulant, Antihyperlipidemic","Anti-platelet, Antihypertensive, Thrombolytic","Anti-coagulant, Antihypertensive, Analgesic","Anti-platelet, Diuretic, Antihyperlipidemic"], a:0, exp:"Loading Dose targets: Anti-platelet (Aspirin), Anti-coagulant (Clopidogrel), Antihyperlipidemic (Atorvastatin)." },
  { id:"cp65", mod:"Cardio & Chest Pain", topic:"Loading Dose",            type:"mc", diff:2, q:"The Loading Dose medications in 108 ambulances are described as:", o:["Life-saving medications","Cardio-protective medications","Emergency analgesics","Thrombolytic agents"], a:1, exp:"These medications are called 'Cardio-Protective Loading Dose' â€” they protect cardiac muscle during MI." },

  // â”€â”€â”€ CARDIO & CHEST PAIN â€” Extended Set â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Chest Pain Basics â€” Extra
  { id:"cp69",  mod:"Cardio & Chest Pain", topic:"Chest Pain Basics",       type:"mc", diff:1, q:"Another name for the cardiac muscle is:", o:["Pericardium","Myocardium","Endocardium","Epicardium"], a:1, exp:"Myocardium = cardiac muscle. MI = Myocardial Infarction = death of heart muscle due to blocked blood supply." },
  { id:"cp70",  mod:"Cardio & Chest Pain", topic:"Chest Pain Basics",       type:"mc", diff:2, q:"Pericardial effusion as a cause of chest pain refers to:", o:["Clot in lung artery","Tear in the aorta","Fluid around the heart","Blocked coronary artery"], a:2, exp:"Pericardial effusion = fluid collection around the heart â€” can compress the heart causing chest pain." },
  { id:"cp71",  mod:"Cardio & Chest Pain", topic:"Chest Pain Basics",       type:"mc", diff:2, q:"Pulmonary embolism causes chest pain because:", o:["The myocardium is blocked","A blood clot blocks the pulmonary artery","Fluid collects around the heart","The aorta tears"], a:1, exp:"Pulmonary embolism = blood clot in pulmonary artery â€” causes sudden chest pain, dyspnea, and low SpO2." },
  { id:"cp72",  mod:"Cardio & Chest Pain", topic:"Chest Pain Basics",       type:"mc", diff:3, q:"Aortic dissection causes chest pain described as:", o:["Squeezing and pressure","Sudden severe tearing pain radiating to the back","Burning epigastric pain","Dull aching left arm pain"], a:1, exp:"Aortic dissection = tear in the aorta wall â€” causes sudden severe tearing/ripping pain often radiating to the back." },
  { id:"cp73",  mod:"Cardio & Chest Pain", topic:"Chest Pain Basics",       type:"tf",  diff:2, q:"Only 50% of MI deaths occur outside hospital in the first 2 hours.", a:true, exp:"50% of MI deaths occur in the first 2 hours, emphasizing the need for rapid prehospital response." },
  { id:"cp74",  mod:"Cardio & Chest Pain", topic:"Chest Pain Basics",       type:"mc", diff:2, q:"Which finding helps distinguish MI from other causes of chest pain?", o:["Fever and cough","Pain relieved by rest and ECG changes","High blood sugar","High blood pressure"], a:1, exp:"MI features: sudden onset, squeezing pain, radiation, relieved initially by rest â€” confirmed by ECG (ST changes)." },

  // Risk Factors â€” Extra
  { id:"cp75",  mod:"Cardio & Chest Pain", topic:"Risk Factors",            type:"mc", diff:1, q:"How many contributing (secondary) risk factors are listed?", o:["2","3","4","5"], a:1, exp:"3 contributing risk factors: Diet, Lack of exercise, Obesity." },
  { id:"cp76",  mod:"Cardio & Chest Pain", topic:"Risk Factors",            type:"mc", diff:2, q:"Which pair are BOTH primary risk factors for MI?", o:["Obesity and lack of exercise","Smoking and hypertension","Diet and obesity","Lack of exercise and age"], a:1, exp:"Primary risk factors: Age, Hereditary, Hypertension, Hypercholesterolemia, Smoking, Diabetes. Smoking and hypertension are both primary." },
  { id:"cp77",  mod:"Cardio & Chest Pain", topic:"Risk Factors",            type:"mc", diff:2, q:"Arthrosclerosis in the Heart Score co-morbidities refers to:", o:["Inflammation of joints","Hardening and narrowing of arteries","Disease of the heart valves","Clotting disorder"], a:1, exp:"Arthrosclerosis (Atherosclerosis) = hardening/narrowing of arteries from plaque buildup â€” major MI risk factor." },
  { id:"cp78",  mod:"Cardio & Chest Pain", topic:"Risk Factors",            type:"tf",  diff:1, q:"Diabetes is a primary risk factor for MI.", a:true, exp:"Diabetes is listed as a primary risk factor â€” high blood sugar damages blood vessel walls over time." },
  { id:"cp79",  mod:"Cardio & Chest Pain", topic:"Risk Factors",            type:"tf",  diff:1, q:"Obesity is a primary (not contributing) risk factor for MI.", a:false, exp:"Obesity is a CONTRIBUTING (secondary) risk factor, along with diet and lack of exercise." },
  { id:"cp80",  mod:"Cardio & Chest Pain", topic:"Risk Factors",            type:"mc", diff:3, q:"A patient who smokes, has hypertension, and diabetes has how many primary risk factors?", o:["1","2","3","4"], a:2, exp:"Smoking (1) + Hypertension (2) + Diabetes (3) = 3 primary risk factors." },

  // Signs & Symptoms â€” Extra
  { id:"cp81",  mod:"Cardio & Chest Pain", topic:"Signs & Symptoms",        type:"mc", diff:1, q:"Which area does MI chest pain NOT typically radiate to?", o:["Arm","Jaw","Neck","Leg"], a:3, exp:"MI pain radiates to arms, jaw, neck, and upper back â€” NOT to the legs." },
  { id:"cp82",  mod:"Cardio & Chest Pain", topic:"Signs & Symptoms",        type:"mc", diff:1, q:"Weakness, dizziness, and fainting in MI are caused by:", o:["High blood pressure","Reduced cardiac output and poor perfusion","Respiratory infection","Dehydration only"], a:1, exp:"Weakness, dizziness, and fainting in MI = reduced cardiac output â†’ poor blood supply to brain and body." },
  { id:"cp83",  mod:"Cardio & Chest Pain", topic:"Signs & Symptoms",        type:"tf",  diff:2, q:"Chest pain relieved by rest is a feature of typical Angina.", a:true, exp:"T in OPQRST for chest pain = 'relieved with rest' â€” characteristic of stable Angina. MI pain typically persists at rest." },
  { id:"cp84",  mod:"Cardio & Chest Pain", topic:"Signs & Symptoms",        type:"mc", diff:2, q:"Which symptom combination makes an MI diagnosis most likely?", o:["Fever, chills, productive cough","Sudden squeezing chest pain + radiation to arm + diaphoresis + dyspnea","Sharp pain worse on breathing + fever","Abdominal pain + diarrhea + vomiting"], a:1, exp:"Classic MI: sudden squeezing chest pain + radiation to arm/jaw + diaphoresis + dyspnea + nausea." },
  { id:"cp85",  mod:"Cardio & Chest Pain", topic:"Signs & Symptoms",        type:"mc", diff:2, q:"'Epigastric pain' in MI refers to pain in the:", o:["Left chest","Upper abdomen","Lower abdomen","Right shoulder"], a:1, exp:"Epigastric = upper abdominal region â€” MI can present as 'stomach pain' causing delays in diagnosis." },
  { id:"cp86",  mod:"Cardio & Chest Pain", topic:"Signs & Symptoms",        type:"mc", diff:3, q:"Why does MI cause nausea and vomiting?", o:["Due to medications","Vagal nerve stimulation from myocardial ischemia","High blood sugar","Pulmonary congestion"], a:1, exp:"MI causes vagal (parasympathetic) stimulation â†’ nausea, vomiting, and bradycardia in some patients." },
  { id:"cp87",  mod:"Cardio & Chest Pain", topic:"Signs & Symptoms",        type:"mc", diff:2, q:"In the OPQRST for chest pain, Provocation includes:", o:["Cold weather only","Physical exertion and stress","Eating a large meal","Deep breathing"], a:1, exp:"Provocation = Physical exertion and stress are the triggers. Palliation = relieved with rest." },
  { id:"cp88",  mod:"Cardio & Chest Pain", topic:"Signs & Symptoms",        type:"mc", diff:2, q:"How many unifying symptoms of chest pain are listed?", o:["3","4","5","6"], a:2, exp:"5 unifying symptoms: Breathing difficulty, Dizziness, Sweating, Weakness, Vomiting." },
  { id:"cp89",  mod:"Cardio & Chest Pain", topic:"Signs & Symptoms",        type:"tf",  diff:1, q:"Diaphoresis means heavy sweating.", a:true, exp:"Diaphoresis = heavy/profuse sweating â€” caused by sympathetic nervous system activation during MI." },
  { id:"cp90",  mod:"Cardio & Chest Pain", topic:"Signs & Symptoms",        type:"mc", diff:3, q:"A patient presents with sudden squeezing chest pain, arm radiation, and diaphoresis. Onset was sudden, provoked by exercise. Most likely diagnosis?", o:["Pulmonary embolism","Aortic dissection","Myocardial infarction","Pericardial effusion"], a:2, exp:"Sudden onset + squeezing quality + radiation + provoked by exercise + diaphoresis = classic MI presentation." },

  // Heart Score â€” Extra
  { id:"cp91",  mod:"Cardio & Chest Pain", topic:"Heart Score",             type:"mc", diff:2, q:"Heart Score 'Doubtful symptoms (1 or 2 symptoms)' gives a score of:", o:["0","1","2","3"], a:1, exp:"Signs & Symptoms scoring: Confirmed = 2, Doubtful (1 or 2 symptoms) = 1, No doubt = 0." },
  { id:"cp92",  mod:"Cardio & Chest Pain", topic:"Heart Score",             type:"mc", diff:2, q:"'No Co-morbidity disorders' gives a Heart Score of:", o:["0","1","2","3"], a:0, exp:"Co-morbidity scoring: >3 diseases = 2, 1â€“2 diseases = 1, None = 0." },
  { id:"cp93",  mod:"Cardio & Chest Pain", topic:"Heart Score",             type:"mc", diff:2, q:"A 50-year-old with confirmed symptoms and no co-morbidities scores:", o:["1","2","3","4"], a:2, exp:"Confirmed symptoms (2) + Age 45â€“65 (1) + No co-morbidities (0) = Score 3 â†’ Severe MI." },
  { id:"cp94",  mod:"Cardio & Chest Pain", topic:"Heart Score",             type:"mc", diff:3, q:"A 44-year-old with no symptoms and no co-morbidities scores:", o:["0","1","2","3"], a:0, exp:"No symptoms (0) + Age <45 (0) + No co-morbidities (0) = Score 0 â†’ Mild / Suspected MI." },
  { id:"cp95",  mod:"Cardio & Chest Pain", topic:"Heart Score",             type:"mc", diff:3, q:"How many co-morbidity disorders are listed in the Heart Score?", o:["5","6","7","8"], a:2, exp:"7 co-morbidity disorders: Family History, Hypertension, Hypercholesterol, Smoking, Diabetes, Obesity, Arthrosclerosis." },
  { id:"cp96",  mod:"Cardio & Chest Pain", topic:"Heart Score",             type:"tf",  diff:2, q:"Heart Score categories are Signs & Symptoms, Age, and Co-morbidity disorders.", a:true, exp:"The 3 Heart Score categories: Signs & Symptoms (0â€“2), Age (0â€“2), Co-morbidity disorders (0â€“2). Max = 6." },

  // Chest Pain Protocol & Triage â€” Extra
  { id:"cp97",  mod:"Cardio & Chest Pain", topic:"Chest Pain Protocol",     type:"mc", diff:1, q:"What type of opinion is sought BEFORE ECG in the Chest Pain Protocol?", o:["Neurological opinion","Surgical opinion","Cardiology opinion by phone","Orthopaedic opinion"], a:2, exp:"Protocol: PHC/GH â†’ Cardio opinion through phone â†’ ECG â†’ Confirm MI â†’ Loading Dose." },
  { id:"cp98",  mod:"Cardio & Chest Pain", topic:"Chest Pain Protocol",     type:"mc", diff:2, q:"After the Loading Dose, what is the next step?", o:["Repeat ECG","Admission to ICU","Call 108 ambulance","Return home"], a:2, exp:"Loading Dose â†’ Call 108 â†’ Reach nearest Government GH." },
  { id:"cp99",  mod:"Cardio & Chest Pain", topic:"Chest Pain Protocol",     type:"mc", diff:2, q:"'ST Elevation MI' corresponds to triage category:", o:["N â€“ Low Risk","I â€“ Intermediate Risk","A â€“ Advanced Risk","P â€“ Priority Risk"], a:3, exp:"P = Priority Risk = Red triage = ST Elevation MI (STEMI) â€” most critical category." },
  { id:"cp100", mod:"Cardio & Chest Pain", topic:"Chest Pain Protocol",     type:"mc", diff:2, q:"'Non-ST Elevation MI' corresponds to triage category:", o:["P â€“ Priority Risk","A â€“ Advanced Risk","I â€“ Intermediate Risk","N â€“ Low Risk"], a:1, exp:"A = Advanced Risk = Yellow = Non-ST Elevation MI (NSTEMI)." },
  { id:"cp101", mod:"Cardio & Chest Pain", topic:"Chest Pain Protocol",     type:"mc", diff:3, q:"Priority Risk ECG finding: ST elevation must be more than:", o:["0.5 mm","1 mm","2 mm","3 mm"], a:1, exp:"Priority Risk criteria: ST elevation >1mm in ECG (plus LBBB, ST depression V1â€“V2)." },
  { id:"cp102", mod:"Cardio & Chest Pain", topic:"Chest Pain Protocol",     type:"mc", diff:3, q:"Advanced Risk (A) includes patients with pain history within:", o:["12 hours","24 hours","48 hours","72 hours"], a:2, exp:"Advanced Risk: Pain >20 min, History of pain in last 48 hours, S & T wave changes in ECG." },
  { id:"cp103", mod:"Cardio & Chest Pain", topic:"Chest Pain Protocol",     type:"mc", diff:3, q:"Which ECG finding is specific to Priority Risk (P) but NOT Advanced Risk (A)?", o:["S & T wave changes","Pain history in last 48 hrs","Left Bundle Branch Block","Pain >20 minutes"], a:2, exp:"Left Bundle Branch Block (LBBB) in ECG is a Priority Risk (P/STEMI) finding â€” not Advanced Risk." },
  { id:"cp104", mod:"Cardio & Chest Pain", topic:"Chest Pain Protocol",     type:"tf",  diff:2, q:"Both Priority Risk and Advanced Risk patients require Cardiac ICU admission.", a:true, exp:"Both P (Priority Risk) and A (Advanced Risk) â†’ Loading Dose â†’ Cardiac ICU admission." },
  { id:"cp105", mod:"Cardio & Chest Pain", topic:"Chest Pain Protocol",     type:"mc", diff:2, q:"The 4 PAIN triage categories in order of severity (highest to lowest) are:", o:["P, A, I, N","N, I, A, P","A, P, N, I","I, A, P, N"], a:0, exp:"P=Priority (highest/STEMI), A=Advanced (NSTEMI), I=Intermediate, N=Low/No MI (lowest)." },
  { id:"cp106", mod:"Cardio & Chest Pain", topic:"Chest Pain Protocol",     type:"mc", diff:3, q:"PHC stands for:", o:["Primary Heart Care","Primary Health Centre","Pre-Hospital Care","Prehospital Cardiac Centre"], a:1, exp:"PHC = Primary Health Centre. The protocol directs patients to the nearest PHC or GH for initial assessment." },

  // Loading Dose â€” Extra
  { id:"cp107", mod:"Cardio & Chest Pain", topic:"Loading Dose",            type:"mc", diff:1, q:"The three drugs in the Loading Dose are:", o:["Aspirin, Atenolol, Atorvastatin","Aspirin, Clopidogrel, Atorvastatin","Aspirin, Clopidogrel, Amlodipine","Warfarin, Aspirin, Atorvastatin"], a:1, exp:"Loading Dose: Aspirin (anti-platelet) + Clopidogrel (anti-coagulant) + Atorvastatin (antihyperlipidemic)." },
  { id:"cp108", mod:"Cardio & Chest Pain", topic:"Loading Dose",            type:"mc", diff:2, q:"Why is Aspirin given in MI Loading Dose?", o:["To reduce fever","To prevent platelet aggregation (clot formation)","To lower cholesterol","To lower blood pressure"], a:1, exp:"Aspirin = Anti-Platelet â€” prevents platelets from sticking together and forming clots in coronary arteries." },
  { id:"cp109", mod:"Cardio & Chest Pain", topic:"Loading Dose",            type:"mc", diff:2, q:"Why is Atorvastatin given in MI Loading Dose?", o:["To prevent platelet clumping","To reduce blood pressure","To lower cholesterol and stabilize plaques","To dissolve blood clots"], a:2, exp:"Atorvastatin (Antihyperlipidemic) lowers cholesterol and stabilizes arterial plaques â€” reduces further clot risk." },
  { id:"cp110", mod:"Cardio & Chest Pain", topic:"Loading Dose",            type:"mc", diff:2, q:"Why is Clopidogrel given in MI Loading Dose?", o:["To dissolve clot","To prevent new clot formation (anti-coagulant)","To lower cholesterol","To reduce fever"], a:1, exp:"Clopidogrel = Anti-Coagulant â€” prevents new blood clot formation in coronary vessels." },
  { id:"cp111", mod:"Cardio & Chest Pain", topic:"Loading Dose",            type:"mc", diff:3, q:"Total number of tablets given in the complete Loading Dose:", o:["6 tablets","8 tablets","10 tablets","12 tablets"], a:2, exp:"Aspirin Ã—2 + Clopidogrel Ã—4 + Atorvastatin Ã—4 = 10 tablets total." },
  { id:"cp112", mod:"Cardio & Chest Pain", topic:"Loading Dose",            type:"mc", diff:3, q:"The Loading Dose is given AFTER which step?", o:["After calling 108","After reaching hospital","After confirming MI on ECG","At the scene before any assessment"], a:2, exp:"Protocol: Confirm MI (via ECG) â†’ Loading Dose â†’ Call 108. ECG confirmation must come before medication." },
  { id:"cp113", mod:"Cardio & Chest Pain", topic:"Loading Dose",            type:"tf",  diff:2, q:"Clopidogrel Loading Dose and Aspirin Loading Dose are both 300 mg.", a:true, exp:"Aspirin: 150mg Ã—2 = 300mg. Clopidogrel: 75mg Ã—4 = 300mg. Both = 300mg." },
  { id:"cp114", mod:"Cardio & Chest Pain", topic:"Loading Dose",            type:"tf",  diff:2, q:"Atorvastatin Loading Dose is 80 mg (4 tablets of 20 mg).", a:true, exp:"Atorvastatin: 20mg Ã—4 = 80mg. Less total mg than aspirin and clopidogrel." },
  { id:"cp115", mod:"Cardio & Chest Pain", topic:"Loading Dose",            type:"mc", diff:3, q:"Which drug in the Loading Dose has the LOWEST total dose in mg?", o:["Aspirin","Clopidogrel","Atorvastatin","All equal"], a:2, exp:"Atorvastatin = 80mg total. Aspirin = 300mg. Clopidogrel = 300mg. Atorvastatin has the lowest." },
  { id:"cp116", mod:"Cardio & Chest Pain", topic:"Loading Dose",            type:"mc", diff:2, q:"The term 'Cardio-Protective' Loading Dose means:", o:["Medication that cures heart disease","Medication that protects the cardiac muscle during and after MI","Medication to lower blood pressure","Medication to stop chest pain only"], a:1, exp:"Cardio-Protective = the combination of medications that protect heart muscle from further damage during MI." },
];
  </script>

  <!-- React 18 -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <!-- Babel (transpiles JSX â†’ JS at runtime) -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- â‘¡ Everything else: constants, helpers, ALL components, App â€” transpiled by Babel -->
  <script type="text/babel" data-presets="react">
    const { useState, useEffect, useRef } = React;



// â”€â”€â”€ Constants â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const shuffle  = a => [...a].sort(() => Math.random() - 0.5);
const TIMER    = { easy:30, medium:20, hard:10 };
const DIFFS    = { easy:[1], medium:[1,2], hard:[1,2,3] };
const MODS     = ["All Modules","Vital Signs","CPR","Airway & Breathing","Trauma Assessment","Cardio & Chest Pain"];
const D_LABEL  = { easy:"Easy", medium:"Medium", hard:"Hard" };

const MOD_META = {
  "All Modules":         { icon:"âš•ï¸", col:"#3b82f6", grad:"135deg,#3b82f6,#6366f1", light:"#eff6ff", dark:"#1d4ed8" },
  "Vital Signs":         { icon:"ðŸ’“", col:"#ec4899", grad:"135deg,#ec4899,#f43f5e", light:"#fdf2f8", dark:"#be185d" },
  "CPR":                 { icon:"ðŸ«€", col:"#ef4444", grad:"135deg,#ef4444,#dc2626", light:"#fef2f2", dark:"#b91c1c" },
  "Airway & Breathing":  { icon:"ðŸ«", col:"#10b981", grad:"135deg,#10b981,#059669", light:"#f0fdf4", dark:"#047857" },
  "Trauma Assessment":   { icon:"ðŸš‘", col:"#f97316", grad:"135deg,#f97316,#ea580c", light:"#fff7ed", dark:"#c2410c" },
  "Cardio & Chest Pain": { icon:"â¤ï¸", col:"#f43f5e", grad:"135deg,#f43f5e,#e11d48", light:"#fff1f2", dark:"#be123c" },
};

const ACHIEVEMENTS = [
  { id:"first",    icon:"ðŸŽ¯", title:"First Responder",   desc:"Complete your first quiz",          check:(h)=>h.length>=1 },
  { id:"perfect",  icon:"ðŸ’¯", title:"Perfect Score",     desc:"Score 100% on any quiz",            check:(h)=>h.some(s=>s.pct===100) },
  { id:"streak5",  icon:"ðŸ”¥", title:"On Fire",           desc:"Hit a 5Ã— answer streak",            check:(h)=>h.some(s=>(s.maxStreak||0)>=5) },
  { id:"s10",      icon:"ðŸ“š", title:"Dedicated",         desc:"Complete 10 sessions",              check:(h)=>h.length>=10 },
  { id:"s25",      icon:"ðŸŽ“", title:"EMT Candidate",     desc:"Complete 25 sessions",              check:(h)=>h.length>=25 },
  { id:"allmod",   icon:"âš•ï¸", title:"Full Spectrum",     desc:"Study all 5 subject modules",       check:(h)=>new Set(h.map(s=>s.mod).filter(m=>MODS.slice(1).includes(m))).size>=5 },
  { id:"hardpass", icon:"ðŸ’ª", title:"Under Pressure",    desc:"Pass (â‰¥70%) on Hard difficulty",    check:(h)=>h.some(s=>s.diff==="hard"&&s.pct>=70) },
  { id:"speed",    icon:"âš¡", title:"Speed Demon",       desc:"Finish 10+ Qs under 90s",           check:(h)=>h.some(s=>s.total>=10&&s.secs>0&&s.secs<90) },
  { id:"bkmark",   icon:"ðŸ”–", title:"Bookworm",          desc:"Bookmark 10 questions",             check:(h,bm)=>bm.length>=10 },
  { id:"exam",     icon:"ðŸ“", title:"Exam Ready",        desc:"Pass (â‰¥70%) in Exam mode",          check:(h)=>h.some(s=>s.mode==="exam"&&s.pct>=70) },
];

// â”€â”€â”€ Global CSS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const CSS = `
  @import url('https://fonts.googleapis.com/css2?family=Sora:wght@400;500;600;700;800&family=DM+Sans:wght@400;500;600&display=swap');

  *, *::before, *::after { box-sizing:border-box; -webkit-tap-highlight-color:transparent; margin:0; padding:0; }
  html { scroll-behavior:smooth; }
  body { background:#f8fafc; font-family:'DM Sans',sans-serif; -webkit-font-smoothing:antialiased; }

  :root {
    --blue: #3b82f6;
    --indigo: #6366f1;
    --green: #10b981;
    --amber: #f59e0b;
    --red: #ef4444;
    --rose: #f43f5e;
    --slate-50: #f8fafc;
    --slate-100: #f1f5f9;
    --slate-200: #e2e8f0;
    --slate-300: #cbd5e1;
    --slate-400: #94a3b8;
    --slate-500: #64748b;
    --slate-600: #475569;
    --slate-700: #334155;
    --slate-800: #1e293b;
    --slate-900: #0f172a;
    --radius-sm: 10px;
    --radius-md: 16px;
    --radius-lg: 22px;
    --radius-xl: 28px;
    --shadow-sm: 0 1px 3px rgba(0,0,0,.07), 0 1px 2px rgba(0,0,0,.05);
    --shadow-md: 0 4px 16px rgba(0,0,0,.08), 0 2px 6px rgba(0,0,0,.04);
    --shadow-lg: 0 12px 40px rgba(0,0,0,.12), 0 4px 12px rgba(0,0,0,.06);
    --shadow-colored: 0 8px 24px rgba(59,130,246,.25);
  }

  /* â”€â”€ Keyframes â”€â”€ */
  @keyframes fadeUp   { from{opacity:0;transform:translateY(20px)} to{opacity:1;transform:translateY(0)} }
  @keyframes fadeDown { from{opacity:0;transform:translateY(-16px)} to{opacity:1;transform:translateY(0)} }
  @keyframes fadeIn   { from{opacity:0} to{opacity:1} }
  @keyframes slideR   { from{opacity:0;transform:translateX(28px)} to{opacity:1;transform:translateX(0)} }
  @keyframes slideL   { from{opacity:0;transform:translateX(-28px)} to{opacity:1;transform:translateX(0)} }
  @keyframes popIn    { 0%{opacity:0;transform:scale(.6)} 60%{transform:scale(1.08)} 100%{opacity:1;transform:scale(1)} }
  @keyframes ringFill { from{stroke-dasharray:0 310} }
  @keyframes grow     { from{width:0} }
  @keyframes fall     { to{transform:translateY(110vh) rotate(540deg); opacity:0} }
  @keyframes toast-in { from{opacity:0;transform:translate(-50%,20px)} to{opacity:1;transform:translate(-50%,0)} }
  @keyframes toast-out{ from{opacity:1;transform:translate(-50%,0)} to{opacity:0;transform:translate(-50%,-16px)} }
  @keyframes shimmer  { 0%{opacity:.6} 50%{opacity:1} 100%{opacity:.6} }
  @keyframes bounce   { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-4px)} }
  @keyframes pulse-ring{ 0%{transform:scale(1);opacity:.8} 100%{transform:scale(1.5);opacity:0} }

  /* â”€â”€ Utility classes â”€â”€ */
  .fu  { animation: fadeUp  .38s cubic-bezier(.16,1,.3,1) both; }
  .fr  { animation: slideR  .32s cubic-bezier(.16,1,.3,1) both; }
  .pi  { animation: popIn   .42s cubic-bezier(.34,1.56,.64,1) both; }
  .fi  { animation: fadeIn  .3s ease both; }
  .ring{ animation: ringFill 1.2s cubic-bezier(.16,1,.3,1) both; }
  .bar { animation: grow    1s   cubic-bezier(.16,1,.3,1) both; }

  .d1{animation-delay:.05s} .d2{animation-delay:.10s} .d3{animation-delay:.15s}
  .d4{animation-delay:.20s} .d5{animation-delay:.25s} .d6{animation-delay:.30s}

  /* â”€â”€ Interactive states â”€â”€ */
  .pressable {
    transition: transform .15s ease, box-shadow .15s ease, opacity .15s ease;
    cursor: pointer;
    -webkit-user-select: none;
    user-select: none;
  }
  .pressable:hover  { transform: translateY(-2px); }
  .pressable:active { transform: scale(.97); opacity:.9; }

  .opt-row {
    transition: all .16s ease;
    cursor: pointer;
  }
  .opt-row:not([disabled]):hover {
    border-color: var(--blue) !important;
    background: rgba(59,130,246,.04) !important;
    transform: translateX(3px);
  }
  .opt-row:not([disabled]):active { transform: scale(.99); }

  /* â”€â”€ Scrollbar â”€â”€ */
  ::-webkit-scrollbar { width: 3px; }
  ::-webkit-scrollbar-thumb { background: var(--slate-200); border-radius: 99px; }

  /* â”€â”€ Nav â”€â”€ */
  .nav-pill {
    transition: all .2s cubic-bezier(.34,1.56,.64,1);
  }
`;

// â”€â”€â”€ Confetti â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function Confetti() {
  const COLS = ["#3b82f6","#6366f1","#10b981","#f59e0b","#ec4899","#f97316","#8b5cf6","#06b6d4"];
  const items = Array.from({length:56}, (_,i) => ({
    col:   COLS[i % COLS.length],
    left:  Math.random() * 100,
    delay: Math.random() * 1.8,
    dur:   2.2 + Math.random() * 1.6,
    size:  5 + Math.random() * 9,
    type:  i % 4,
  }));
  return (
    <div style={{position:"fixed",inset:0,pointerEvents:"none",zIndex:9999,overflow:"hidden"}}>
      {items.map((p,i) => (
        <div key={i} style={{
          position:"absolute", top:-20, left:p.left+"%",
          width:p.size, height:p.size,
          background: p.type===3 ? "transparent" : p.col,
          border: p.type===3 ? "2px solid "+p.col : "none",
          borderRadius: p.type===0 ? "50%" : p.type===1 ? "2px" : "0",
          transform: p.type===2 ? "rotate(45deg)" : "none",
          animation:`fall ${p.dur}s ${p.delay}s ease-in forwards`,
        }}/>
      ))}
    </div>
  );
}

// â”€â”€â”€ Toast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function Toast({ msg }) {
  if (!msg) return null;
  return (
    <div style={{
      position:"fixed", bottom:96, left:"50%",
      transform:"translateX(-50%)",
      background:"rgba(15,23,42,.95)",
      backdropFilter:"blur(16px)",
      color:"#fff", borderRadius:18, padding:"14px 20px",
      display:"flex", alignItems:"center", gap:12,
      zIndex:9998, minWidth:260, maxWidth:360,
      boxShadow:"0 16px 48px rgba(0,0,0,.3)",
      border:"1px solid rgba(255,255,255,.1)",
      animation: msg.out ? "toast-out .3s ease both" : "toast-in .4s cubic-bezier(.34,1.56,.64,1) both",
    }}>
      <div style={{
        width:44, height:44, borderRadius:14, flexShrink:0,
        background:"rgba(255,255,255,.12)",
        display:"flex", alignItems:"center", justifyContent:"center", fontSize:22,
      }}>{msg.icon}</div>
      <div style={{flex:1}}>
        <div style={{fontFamily:"'Sora',sans-serif", fontWeight:700, fontSize:13, marginBottom:2}}>{msg.title}</div>
        <div style={{color:"rgba(255,255,255,.55)", fontSize:11, lineHeight:1.4}}>{msg.desc}</div>
      </div>
    </div>
  );
}

// â”€â”€â”€ Bottom Nav â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function BottomNav({ tab, onTab }) {
  const items = [
    {id:"home",  icon:"ðŸ ", label:"Home"},
    {id:"study", icon:"ðŸ“–", label:"Study"},
    {id:"stats", icon:"ðŸ“Š", label:"Stats"},
    {id:"awards",icon:"ðŸ†", label:"Awards"},
  ];
  return (
    <div style={{
      position:"fixed", bottom:0, left:0, right:0, zIndex:200,
      background:"rgba(255,255,255,.92)", backdropFilter:"blur(20px)",
      borderTop:"1px solid rgba(0,0,0,.06)",
      padding:"6px 8px max(10px,env(safe-area-inset-bottom))",
      display:"flex", gap:4,
    }}>
      {items.map(it => {
        const active = tab === it.id;
        return (
          <button key={it.id} onClick={() => onTab(it.id)}
            style={{
              flex:1, display:"flex", flexDirection:"column", alignItems:"center", gap:2,
              background: active ? "rgba(59,130,246,.1)" : "transparent",
              border:"none", borderRadius:14, cursor:"pointer", padding:"8px 4px",
              transition:"all .2s ease",
              color: active ? "var(--blue)" : "var(--slate-400)",
            }}>
            <span style={{fontSize:18, lineHeight:1, transition:"transform .2s ease",
              transform: active ? "scale(1.15)" : "scale(1)"}}>{it.icon}</span>
            <span style={{
              fontSize:10, fontWeight: active?700:500,
              fontFamily:"'Sora',sans-serif", letterSpacing:.2,
            }}>{it.label}</span>
            {active && (
              <div style={{width:4, height:4, borderRadius:"50%", background:"var(--blue)", marginTop:1}}/>
            )}
          </button>
        );
      })}
    </div>
  );
}

// â”€â”€â”€ Shared layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function Shell({ children, bg, noNav }) {
  return (
    <div style={{
      minHeight:"100vh", background: bg || "var(--slate-50)",
      fontFamily:"'DM Sans',sans-serif",
      paddingBottom: noNav ? 0 : 84,
    }}>
      <style>{CSS}</style>
      {children}
    </div>
  );
}
function Page({ children, style:s }) {
  return (
    <div style={{maxWidth:600, margin:"0 auto", padding:"0 16px", ...s}}>
      {children}
    </div>
  );
}

// â”€â”€â”€ Atomic components â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function Tag({ children, color, size }) {
  const c = color || "var(--blue)";
  const sz = size || "sm";
  return (
    <span style={{
      display:"inline-flex", alignItems:"center", gap:4,
      background:c+"18", color:c, border:"1px solid "+c+"28",
      borderRadius:99, padding: sz==="sm" ? "3px 10px" : "5px 14px",
      fontSize: sz==="sm" ? 10 : 12, fontWeight:700,
      fontFamily:"'Sora',sans-serif", letterSpacing:.2,
      whiteSpace:"nowrap",
    }}>{children}</span>
  );
}

function Chip({ children, active, onClick, color }) {
  const c = color || "var(--blue)";
  return (
    <button onClick={onClick}
      style={{
        background: active ? c : "var(--slate-50)",
        border:"1.5px solid " + (active ? c : "var(--slate-200)"),
        borderRadius:99, padding:"7px 16px",
        color: active ? "#fff" : "var(--slate-500)",
        fontSize:12, fontWeight:600, cursor:"pointer", whiteSpace:"nowrap",
        transition:"all .16s ease",
        fontFamily:"'DM Sans',sans-serif",
        boxShadow: active ? "0 4px 12px "+c+"40" : "none",
      }}>
      {children}
    </button>
  );
}

function Btn({ children, onClick, variant, size, disabled, full, style:s }) {
  const v  = variant || "primary";
  const sz = size    || "md";
  const SIZES = {
    sm: {padding:"9px 18px", fontSize:13, borderRadius:12},
    md: {padding:"14px 24px", fontSize:14, borderRadius:14},
    lg: {padding:"16px 28px", fontSize:15, borderRadius:16},
  };
  const VARS = {
    primary: {background:"linear-gradient(135deg,var(--blue),var(--indigo))", color:"#fff", boxShadow:"var(--shadow-colored)"},
    secondary:{background:"var(--slate-100)", color:"var(--slate-700)", boxShadow:"none"},
    ghost:   {background:"transparent", color:"var(--slate-500)", boxShadow:"none"},
    outline: {background:"transparent", border:"1.5px solid var(--slate-200)", color:"var(--slate-600)", boxShadow:"none"},
    danger:  {background:"rgba(239,68,68,.08)", border:"1.5px solid rgba(239,68,68,.2)", color:"var(--red)", boxShadow:"none"},
    success: {background:"rgba(16,185,129,.08)", border:"1.5px solid rgba(16,185,129,.2)", color:"var(--green)", boxShadow:"none"},
  };
  return (
    <button onClick={onClick} disabled={disabled}
      className="pressable"
      style={{
        border:"none", fontWeight:700, fontFamily:"'Sora',sans-serif",
        display:"inline-flex", alignItems:"center", justifyContent:"center", gap:8,
        width: full ? "100%" : undefined,
        opacity: disabled ? .4 : 1,
        cursor: disabled ? "not-allowed" : "pointer",
        transition:"all .16s ease",
        ...SIZES[sz], ...VARS[v], ...s,
      }}>
      {children}
    </button>
  );
}

function Divider({ label }) {
  return (
    <div style={{display:"flex", alignItems:"center", gap:12, margin:"4px 0"}}>
      <div style={{flex:1, height:1, background:"var(--slate-100)"}}/>
      {label && <span style={{color:"var(--slate-400)", fontSize:10, fontWeight:700,
        letterSpacing:1.5, textTransform:"uppercase", fontFamily:"'Sora',sans-serif", whiteSpace:"nowrap"}}>{label}</span>}
      <div style={{flex:1, height:1, background:"var(--slate-100)"}}/>
    </div>
  );
}

function PBar({ val, total, col, h }) {
  const pct = total > 0 ? Math.min(100, (val/total)*100) : 0;
  return (
    <div style={{height:h||5, background:"var(--slate-100)", borderRadius:99, overflow:"hidden"}}>
      <div className="bar" style={{height:"100%", width:pct+"%",
        background:col||"var(--blue)", borderRadius:99, transition:"width .4s ease"}}/>
    </div>
  );
}

// â”€â”€â”€ Timer ring â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function TimerRing({ total, left }) {
  const R = 22, C = 2*Math.PI*R, ratio = left/total;
  const col = ratio>.55 ? "var(--blue)" : ratio>.25 ? "var(--amber)" : "var(--red)";
  const urgent = ratio <= .25;
  return (
    <div style={{position:"relative", width:54, height:54, flexShrink:0}}>
      {urgent && (
        <div style={{
          position:"absolute", inset:0, borderRadius:"50%",
          border:"2px solid "+col,
          animation:"pulse-ring .8s ease-out infinite",
          opacity:.4,
        }}/>
      )}
      <svg width="54" height="54" style={{transform:"rotate(-90deg)", display:"block"}}>
        <circle cx="27" cy="27" r={R} fill="none" stroke="var(--slate-100)" strokeWidth="4"/>
        <circle cx="27" cy="27" r={R} fill="none" stroke={col} strokeWidth="4"
          strokeDasharray={(C*ratio)+" "+C} strokeLinecap="round"
          style={{transition:"stroke-dasharray .9s linear, stroke .4s"}}/>
      </svg>
      <div style={{position:"absolute", inset:0, display:"flex", alignItems:"center",
        justifyContent:"center", fontFamily:"'Sora',sans-serif",
        color:col, fontSize:15, fontWeight:800}}>{left}</div>
    </div>
  );
}

// â”€â”€â”€ Score donut â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function ScoreDonut({ pct, score, total }) {
  const R=44, C=2*Math.PI*R, col=pct>=.7?"var(--green)":pct>=.5?"var(--amber)":"var(--red)";
  return (
    <div style={{position:"relative", width:116, height:116, flexShrink:0}}>
      <svg width="116" height="116" style={{transform:"rotate(-90deg)"}}>
        <circle cx="58" cy="58" r={R} fill="none" stroke="var(--slate-100)" strokeWidth="10"/>
        <circle cx="58" cy="58" r={R} fill="none" stroke={col} strokeWidth="10"
          strokeDasharray={(C*pct)+" "+C} strokeLinecap="round"
          className="ring" style={{transition:"stroke-dasharray 1.4s cubic-bezier(.16,1,.3,1)"}}/>
      </svg>
      <div style={{position:"absolute", inset:0, display:"flex", flexDirection:"column",
        alignItems:"center", justifyContent:"center"}}>
        <span style={{color:col, fontSize:26, fontWeight:800, lineHeight:1,
          fontFamily:"'Sora',sans-serif"}}>{Math.round(pct*100)}%</span>
        <span style={{color:"var(--slate-400)", fontSize:11, marginTop:3,
          fontFamily:"'DM Sans',sans-serif"}}>{score}/{total}</span>
      </div>
    </div>
  );
}

// â”€â”€â”€ Answer options â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function MCOpt({ opt, i, q, locked, picked, onPick, ep, em }) {
  const dis = locked && !em;
  const isCorrect = i === q.a;
  const isWrong   = i === picked && !isCorrect;
  let bg = "#fff", border = "var(--slate-200)", color = "var(--slate-700)";
  let iconBg = "var(--slate-100)", iconColor = "var(--slate-400)";
  let opacity = 1;

  if (locked && !em) {
    if (isCorrect) {
      bg="rgba(16,185,129,.07)"; border="rgba(16,185,129,.35)"; color="var(--slate-800)";
      iconBg="#10b981"; iconColor="#fff";
    } else if (isWrong) {
      bg="rgba(239,68,68,.06)"; border="rgba(239,68,68,.3)"; color="var(--slate-800)";
      iconBg="#ef4444"; iconColor="#fff";
    } else {
      opacity=.35;
    }
  }
  if (em && ep===i) {
    bg="rgba(245,158,11,.07)"; border="rgba(245,158,11,.35)"; iconBg="#f59e0b"; iconColor="#fff";
  }

  const lbl = locked&&!em&&isCorrect ? "âœ“" : locked&&!em&&isWrong ? "âœ—" : String.fromCharCode(65+i);

  return (
    <button disabled={dis} onClick={() => onPick(i)}
      className={dis ? "" : "opt-row"}
      style={{
        display:"flex", alignItems:"center", gap:12, width:"100%",
        background:bg, border:"1.5px solid "+border, borderRadius:14,
        padding:"13px 16px", color, textAlign:"left",
        boxShadow:"var(--shadow-sm)", opacity, fontFamily:"'DM Sans',sans-serif",
        fontSize:14, lineHeight:1.5,
      }}>
      <span style={{
        width:32, height:32, borderRadius:10, background:iconBg, color:iconColor,
        display:"flex", alignItems:"center", justifyContent:"center",
        fontSize:12, fontWeight:700, flexShrink:0, transition:"all .2s",
        fontFamily:"'Sora',sans-serif",
      }}>{lbl}</span>
      <span style={{flex:1}}>{opt}</span>
      {locked && !em && isCorrect && (
        <span style={{fontSize:16, flexShrink:0}}>âœ…</span>
      )}
    </button>
  );
}

function TFOpt({ val, q, locked, picked, onPick, ep, em }) {
  const dis = locked && !em;
  const isCorrect = val === q.a;
  const isWrong   = val === picked && !isCorrect;
  let bg="#fff", border="var(--slate-200)", shadow="var(--shadow-sm)";
  if (locked && !em) {
    if (isCorrect) { bg="rgba(16,185,129,.07)"; border="rgba(16,185,129,.4)"; shadow="0 0 0 3px rgba(16,185,129,.15)"; }
    else if (isWrong) { bg="rgba(239,68,68,.06)"; border="rgba(239,68,68,.35)"; }
    else { bg="var(--slate-50)"; }
  }
  if (em && ep===val) { bg="rgba(245,158,11,.07)"; border="rgba(245,158,11,.4)"; }
  return (
    <button disabled={dis} onClick={() => onPick(val)}
      className={dis ? "" : "opt-row"}
      style={{
        flex:1, display:"flex", flexDirection:"column", alignItems:"center", gap:8,
        background:bg, border:"1.5px solid "+border, borderRadius:18,
        padding:"24px 16px", cursor:"pointer",
        boxShadow: shadow, transition:"all .18s ease",
        fontFamily:"'DM Sans',sans-serif",
      }}>
      <span style={{fontSize:38, lineHeight:1}}>{val ? "âœ…" : "âŒ"}</span>
      <span style={{fontWeight:700, fontSize:16, color:"var(--slate-700)"}}>{val?"True":"False"}</span>
    </button>
  );
}

function Options({ q, locked, picked, onPick, ep, em }) {
  if (q.type==="mc") return (
    <div style={{display:"flex", flexDirection:"column", gap:9}}>
      {q.o.map((opt,i) => <MCOpt key={i} opt={opt} i={i} q={q} locked={locked}
        picked={picked} onPick={onPick} ep={ep} em={em}/>)}
    </div>
  );
  return (
    <div style={{display:"flex", gap:12}}>
      {[true,false].map(val => <TFOpt key={String(val)} val={val} q={q} locked={locked}
        picked={picked} onPick={onPick} ep={ep} em={em}/>)}
    </div>
  );
}

// â”€â”€â”€ Settings chips â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function SRow({ label, children }) {
  return (
    <div style={{marginBottom:4}}>
      <p style={{fontFamily:"'Sora',sans-serif", fontWeight:700, fontSize:10, letterSpacing:1.5,
        textTransform:"uppercase", color:"var(--slate-400)", margin:"0 0 9px"}}>{label}</p>
      {children}
    </div>
  );
}
function ModChip({ mod }) {
  const m = MOD_META[mod]||MOD_META["All Modules"];
  return <Tag color={m.col}>{m.icon} {mod}</Tag>;
}
function TopicTag({ topic }) {
  return (
    <span style={{background:"var(--slate-50)", color:"var(--slate-500)",
      border:"1px solid var(--slate-200)", borderRadius:99,
      padding:"3px 12px", fontSize:11, fontWeight:500, fontFamily:"'DM Sans',sans-serif"}}>
      {topic}
    </span>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  STATS SCREEN
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function StatsScreen({ history }) {
  if (!history.length) return (
    <Shell>
      <div style={{display:"flex", flexDirection:"column", alignItems:"center", justifyContent:"center",
        minHeight:"60vh", padding:32, textAlign:"center"}}>
        <div style={{fontSize:64, marginBottom:20}}>ðŸ“Š</div>
        <h2 style={{fontFamily:"'Sora',sans-serif", fontWeight:800, fontSize:22,
          color:"var(--slate-800)", margin:"0 0 8px"}}>No sessions yet</h2>
        <p style={{color:"var(--slate-400)", fontSize:15}}>Complete a quiz to see your stats here</p>
      </div>
    </Shell>
  );
  const totalQ   = history.reduce((s,h)=>s+h.total,0);
  const totalC   = history.reduce((s,h)=>s+Math.round((h.pct/100)*h.total),0);
  const acc      = totalQ>0?Math.round(totalC/totalQ*100):0;
  const best     = Math.max(...history.map(h=>h.pct));
  const studyMin = Math.round(history.reduce((s,h)=>s+(h.secs||0),0)/60);
  const recent   = [...history].slice(0,10).reverse();
  const modStats = MODS.slice(1).map(m=>{
    const done=history.filter(h=>h.mod===m);
    if(!done.length) return null;
    return {m, avg:Math.round(done.reduce((s,h)=>s+h.pct,0)/done.length), n:done.length};
  }).filter(Boolean).sort((a,b)=>b.avg-a.avg);

  return (
    <Shell>
      {/* Hero */}
      <div style={{background:"linear-gradient(160deg,var(--slate-900) 0%,#1e1b4b 100%)",
        padding:"32px 16px 56px", position:"relative", overflow:"hidden"}}>
        <div style={{position:"absolute",top:-60,right:-60,width:200,height:200,
          borderRadius:"50%",background:"rgba(99,102,241,.15)"}}/>
        <div style={{position:"absolute",bottom:-40,left:-40,width:150,height:150,
          borderRadius:"50%",background:"rgba(59,130,246,.1)"}}/>
        <Page>
          <h2 className="fu" style={{fontFamily:"'Sora',sans-serif", fontWeight:800, fontSize:22,
            color:"#fff", margin:"0 0 24px"}}>ðŸ“Š Statistics</h2>
          <div style={{display:"grid", gridTemplateColumns:"1fr 1fr", gap:10}}>
            {[
              {l:"Accuracy",    v:acc+"%",      i:"ðŸŽ¯", c:"#38bdf8"},
              {l:"Best Score",  v:best+"%",     i:"ðŸ†", c:"#fbbf24"},
              {l:"Total Qs",    v:totalQ,       i:"âœ…", c:"#34d399"},
              {l:"Study Time",  v:studyMin+"m", i:"â±",  c:"#a78bfa"},
            ].map((s,i) => (
              <div key={i} className={"fu d"+(i+1)}
                style={{background:"rgba(255,255,255,.08)", borderRadius:18,
                  padding:"16px 14px", border:"1px solid rgba(255,255,255,.1)",
                  backdropFilter:"blur(8px)"}}>
                <div style={{fontSize:22, marginBottom:8}}>{s.i}</div>
                <div style={{fontFamily:"'Sora',sans-serif", color:s.c, fontSize:24,
                  fontWeight:800, lineHeight:1}}>{s.v}</div>
                <div style={{color:"rgba(255,255,255,.4)", fontSize:11, marginTop:5,
                  fontFamily:"'DM Sans',sans-serif"}}>{s.l}</div>
              </div>
            ))}
          </div>
        </Page>
      </div>

      <Page style={{marginTop:-28}}>
        <div style={{display:"flex", flexDirection:"column", gap:16}}>

          {/* Trend */}
          {recent.length >= 2 && (
            <div style={{background:"#fff", borderRadius:20, padding:"20px",
              boxShadow:"var(--shadow-md)", border:"1px solid var(--slate-100)"}}>
              <p style={{fontFamily:"'Sora',sans-serif", fontWeight:700, fontSize:11,
                letterSpacing:1.5, textTransform:"uppercase", color:"var(--slate-400)",
                margin:"0 0 16px"}}>Score Trend</p>
              <div style={{display:"flex", alignItems:"flex-end", gap:6, height:72}}>
                {recent.map((h,i) => {
                  const c = h.pct>=70?"var(--green)":h.pct>=50?"var(--amber)":"var(--red)";
                  const ht = Math.max(8, h.pct * .72);
                  return (
                    <div key={i} style={{flex:1, display:"flex", flexDirection:"column",
                      alignItems:"center", gap:4}}>
                      <div style={{
                        width:"100%", height:ht, background:c,
                        borderRadius:"5px 5px 3px 3px",
                        transition:"height .4s ease",
                        boxShadow: h.pct>=70?"0 3px 8px rgba(16,185,129,.3)":"none",
                      }}/>
                      <span style={{color:"var(--slate-300)", fontSize:8,
                        fontFamily:"'Sora',sans-serif", fontWeight:700}}>{h.pct}%</span>
                    </div>
                  );
                })}
              </div>
            </div>
          )}

          {/* Module breakdown */}
          {modStats.length > 0 && (
            <div style={{background:"#fff", borderRadius:20, padding:"20px",
              boxShadow:"var(--shadow-md)", border:"1px solid var(--slate-100)"}}>
              <p style={{fontFamily:"'Sora',sans-serif", fontWeight:700, fontSize:11,
                letterSpacing:1.5, textTransform:"uppercase", color:"var(--slate-400)",
                margin:"0 0 16px"}}>Module Performance</p>
              <div style={{display:"flex", flexDirection:"column", gap:14}}>
                {modStats.map(({m,avg,n}) => {
                  const meta=MOD_META[m], c=avg>=70?"var(--green)":avg>=50?"var(--amber)":"var(--red)";
                  return (
                    <div key={m}>
                      <div style={{display:"flex", justifyContent:"space-between",
                        alignItems:"center", marginBottom:7}}>
                        <div style={{display:"flex", alignItems:"center", gap:8}}>
                          <div style={{width:32, height:32, borderRadius:10,
                            background:meta.light, display:"flex", alignItems:"center",
                            justifyContent:"center", fontSize:16}}>{meta.icon}</div>
                          <div>
                            <div style={{fontWeight:600, fontSize:13, color:"var(--slate-700)"}}>{m}</div>
                            <div style={{fontSize:11, color:"var(--slate-400)"}}>{n} sessions</div>
                          </div>
                        </div>
                        <span style={{fontFamily:"'Sora',sans-serif", fontWeight:800,
                          fontSize:16, color:c}}>{avg}%</span>
                      </div>
                      <PBar val={avg} total={100} col={meta.col} h={6}/>
                    </div>
                  );
                })}
              </div>
            </div>
          )}

          {/* Session log */}
          <Divider label="Recent Sessions"/>
          <div style={{display:"flex", flexDirection:"column", gap:8}}>
            {history.slice(0,8).map((h,i) => {
              const c = h.pct>=70?"var(--green)":h.pct>=50?"var(--amber)":"var(--red)";
              const meta = MOD_META[h.mod]||MOD_META["All Modules"];
              return (
                <div key={i} style={{background:"#fff", borderRadius:16, padding:"14px 16px",
                  display:"flex", alignItems:"center", gap:14,
                  boxShadow:"var(--shadow-sm)", border:"1px solid var(--slate-100)"}}>
                  <div style={{width:42, height:42, borderRadius:13, background:meta.light,
                    display:"flex", alignItems:"center", justifyContent:"center",
                    fontSize:20, flexShrink:0}}>{meta.icon}</div>
                  <div style={{flex:1, minWidth:0}}>
                    <div style={{fontWeight:600, fontSize:13, color:"var(--slate-800)",
                      whiteSpace:"nowrap", overflow:"hidden", textOverflow:"ellipsis"}}>{h.mod}</div>
                    <div style={{color:"var(--slate-400)", fontSize:11, marginTop:2}}>
                      {h.date} Â· {D_LABEL[h.diff]||h.diff} Â· {h.mode||"quiz"}
                      {h.secs?" Â· "+h.secs+"s":""}
                    </div>
                  </div>
                  <div style={{fontFamily:"'Sora',sans-serif", color:c, fontSize:20, fontWeight:800, flexShrink:0}}>{h.pct}%</div>
                </div>
              );
            })}
          </div>
        </div>
      </Page>
    </Shell>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  AWARDS SCREEN
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function AwardsScreen({ unlocked }) {
  const got=unlocked.length, total=ACHIEVEMENTS.length;
  return (
    <Shell>
      <div style={{background:"linear-gradient(160deg,#431407 0%,#9a3412 50%,#ea580c 100%)",
        padding:"32px 16px 56px", position:"relative", overflow:"hidden"}}>
        <div style={{position:"absolute",top:-40,right:-40,width:160,height:160,
          borderRadius:"50%",background:"rgba(251,191,36,.2)"}}/>
        <Page>
          <div className="fu" style={{display:"flex", alignItems:"center", gap:16, marginBottom:20}}>
            <div style={{width:52, height:52, borderRadius:16,
              background:"rgba(255,255,255,.15)", backdropFilter:"blur(8px)",
              display:"flex", alignItems:"center", justifyContent:"center", fontSize:26}}>ðŸ†</div>
            <div>
              <h2 style={{fontFamily:"'Sora',sans-serif", fontWeight:800, fontSize:22,
                color:"#fff", margin:"0 0 2px"}}>Achievements</h2>
              <p style={{color:"rgba(255,255,255,.6)", fontSize:13, margin:0}}>{got} of {total} unlocked</p>
            </div>
          </div>
          <div style={{background:"rgba(0,0,0,.2)", borderRadius:16, padding:"14px 16px",
            backdropFilter:"blur(8px)"}}>
            <div style={{display:"flex", justifyContent:"space-between", marginBottom:8}}>
              <span style={{color:"rgba(255,255,255,.7)", fontSize:12}}>Progress</span>
              <span style={{color:"#fbbf24", fontFamily:"'Sora',sans-serif", fontWeight:700,
                fontSize:12}}>{Math.round(got/total*100)}%</span>
            </div>
            <div style={{height:8, background:"rgba(255,255,255,.2)", borderRadius:99, overflow:"hidden"}}>
              <div className="bar" style={{height:"100%", width:(got/total*100)+"%",
                background:"linear-gradient(90deg,#fbbf24,#f97316)", borderRadius:99}}/>
            </div>
          </div>
        </Page>
      </div>
      <Page style={{marginTop:-24}}>
        <div style={{display:"flex", flexDirection:"column", gap:10}}>
          {ACHIEVEMENTS.map((a,i) => {
            const done = unlocked.includes(a.id);
            return (
              <div key={a.id} className={"fu d"+(Math.min(i+1,6))}
                style={{
                  background: done?"#fff":"var(--slate-50)",
                  borderRadius:18, padding:"16px",
                  display:"flex", alignItems:"center", gap:14,
                  boxShadow: done?"var(--shadow-md)":"none",
                  border:"1.5px solid "+(done?"rgba(251,191,36,.3)":"var(--slate-100)"),
                  opacity: done?1:.5, transition:"all .3s ease",
                }}>
                <div style={{
                  width:54, height:54, borderRadius:16, flexShrink:0,
                  background: done?"linear-gradient(135deg,#fef3c7,#fde68a)":"var(--slate-100)",
                  display:"flex", alignItems:"center", justifyContent:"center", fontSize:26,
                  boxShadow: done?"0 4px 16px rgba(251,191,36,.35)":"none",
                }}>{done ? a.icon : "ðŸ”’"}</div>
                <div style={{flex:1}}>
                  <div style={{fontFamily:"'Sora',sans-serif", fontWeight:700, fontSize:14,
                    color: done?"var(--slate-800)":"var(--slate-400)", marginBottom:3}}>{a.title}</div>
                  <div style={{fontSize:12, color: done?"var(--slate-500)":"var(--slate-300)",
                    lineHeight:1.4}}>{a.desc}</div>
                </div>
                {done && (
                  <div style={{width:28, height:28, borderRadius:"50%",
                    background:"linear-gradient(135deg,#fbbf24,#f59e0b)",
                    display:"flex", alignItems:"center", justifyContent:"center",
                    fontSize:14, boxShadow:"0 4px 12px rgba(251,191,36,.4)"}}>â˜…</div>
                )}
              </div>
            );
          })}
        </div>
      </Page>
    </Shell>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  MAIN APP
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function App() {
  const [tab,      setTab]      = useState("home");
  const [screen,   setScreen]   = useState("home");
  const [cfg,      setCfg]      = useState({mod:"All Modules",topic:"All Topics",type:"all",diff:"medium",count:10,mode:"quiz"});
  const [questions,setQuestions]= useState([]);
  const [idx,      setIdx]      = useState(0);
  const [picked,   setPicked]   = useState(null);
  const [locked,   setLocked]   = useState(false);
  const [score,    setScore]    = useState(0);
  const [streak,   setStreak]   = useState(0);
  const [maxStr,   setMaxStr]   = useState(0);
  const [log,      setLog]      = useState([]);
  const [timeLeft, setTimeLeft] = useState(20);
  const [elapsed,  setElapsed]  = useState(0);
  const [history,  setHistory]  = useState([]);
  const [bookmarks,setBookmarks]= useState([]);
  const [flipped,  setFlipped]  = useState(false);
  const [examLog,  setExamLog]  = useState([]);
  const [errors,   setErrors]   = useState({});
  const [unlocked, setUnlocked] = useState([]);
  const [toast,    setToast]    = useState(null);
  const [confetti, setConfetti] = useState(false);

  const timerRef = useRef(null);
  const startRef = useRef(null);
  const lockRef  = useRef(false);
  const idxRef   = useRef(0);
  const qsRef    = useRef([]);
  const logRef   = useRef([]);

  lockRef.current = locked;
  idxRef.current  = idx;
  qsRef.current   = questions;
  logRef.current  = log;

  // â”€â”€ Storage load â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  useEffect(() => {
    (async () => {
      try {
        const h=await window.storage.get("emt-h");  if(h) setHistory(JSON.parse(h.value));
        const b=await window.storage.get("emt-bm"); if(b) setBookmarks(JSON.parse(b.value));
        const e=await window.storage.get("emt-er"); if(e) setErrors(JSON.parse(e.value));
        const u=await window.storage.get("emt-ul"); if(u) setUnlocked(JSON.parse(u.value));
      } catch {}
    })();
  }, []);

  // â”€â”€ Toast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const showToast = (t) => {
    setToast({...t, out:false});
    setTimeout(() => setToast(p=>p?{...p,out:true}:null), 3400);
    setTimeout(() => setToast(null), 3800);
  };

  // â”€â”€ Achievements â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const checkAch = async (nh, nbm, ul) => {
    const got = ACHIEVEMENTS.filter(a=>!ul.includes(a.id)&&a.check(nh,nbm));
    if (!got.length) return ul;
    const next = [...ul,...got.map(a=>a.id)];
    setUnlocked(next);
    try { await window.storage.set("emt-ul",JSON.stringify(next)); } catch {}
    showToast({icon:got[0].icon, title:"Achievement Unlocked!", desc:got[0].title});
    return next;
  };

  // â”€â”€ Persist â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const saveHist = async (entry) => {
    const next=[entry,...history].slice(0,60);
    setHistory(next);
    try { await window.storage.set("emt-h",JSON.stringify(next)); } catch {}
    return next;
  };

  const toggleBk = async (qid) => {
    const next=bookmarks.includes(qid)?bookmarks.filter(b=>b!==qid):[...bookmarks,qid];
    setBookmarks(next);
    try { await window.storage.set("emt-bm",JSON.stringify(next)); } catch {}
    await checkAch(history,next,unlocked);
  };

  const saveErrors = async (finLog) => {
    const up={...errors};
    finLog.forEach(l=>{if(!l.correct) up[l.q.id]=(up[l.q.id]||0)+1;});
    setErrors(up);
    try { await window.storage.set("emt-er",JSON.stringify(up)); } catch {}
  };

  // â”€â”€ Timer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  useEffect(() => {
    if (screen!=="quiz"||locked||cfg.mode!=="quiz") return;
    clearInterval(timerRef.current);
    timerRef.current = setInterval(() => {
      setTimeLeft(tv => { if(tv<=1){lockAns(null);return 0;} return tv-1; });
    }, 1000);
    return () => clearInterval(timerRef.current);
  }, [screen,idx,locked,cfg.mode]); // eslint-disable-line

  // â”€â”€ Lock answer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const lockAns = (val) => {
    if (lockRef.current) return;
    clearInterval(timerRef.current);
    const q=qsRef.current[idxRef.current];
    if (!q) return;
    setPicked(val); setLocked(true);
    const ok = val!==null && val===q.a;
    setScore(s=>ok?s+1:s);
    setStreak(st=>{const ns=ok?st+1:0; setMaxStr(m=>Math.max(m,ns)); return ns;});
    setLog(l=>[...l,{correct:ok,timeout:val===null,picked:val,q}]);
  };

  // â”€â”€ Exam â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const pickExam = (val) => {
    const up=[...examLog]; up[idx]={picked:val,q:qsRef.current[idxRef.current]};
    setExamLog(up);
  };
  const examNext = async () => {
    const q=qsRef.current[idxRef.current];
    const cur=examLog[idx]??{picked:null,q};
    const full=[...examLog]; full[idx]=cur;
    if (idx+1>=qsRef.current.length) {
      const sc=full.filter(e=>e&&e.picked===e.q.a).length;
      const secs=Math.round((Date.now()-startRef.current)/1000);
      setScore(sc); setElapsed(secs);
      const entry={date:new Date().toLocaleDateString(),
        time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),
        score:sc, total:qsRef.current.length, diff:cfg.diff, mod:cfg.mod,
        pct:Math.round(sc/qsRef.current.length*100), secs, maxStreak:0, mode:cfg.mode};
      const nh=await saveHist(entry);
      const fl=full.map(e=>({correct:e&&e.picked===e.q.a,timeout:false,picked:e?.picked??null,q:e?.q??q}));
      setLog(fl);
      await saveErrors(fl);
      await checkAch(nh,bookmarks,unlocked);
      if (entry.pct===100){setConfetti(true);setTimeout(()=>setConfetti(false),4500);}
      setScreen("result");
    } else { setIdx(i=>i+1); }
  };

  // â”€â”€ Quiz next â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const goNext = async () => {
    if (idx+1>=questions.length) {
      const secs=Math.round((Date.now()-startRef.current)/1000);
      setElapsed(secs);
      const entry={date:new Date().toLocaleDateString(),
        time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),
        score, total:questions.length, diff:cfg.diff, mod:cfg.mod,
        pct:Math.round(score/questions.length*100), secs, maxStreak:maxStr, mode:cfg.mode};
      const nh=await saveHist(entry);
      await saveErrors(logRef.current);
      await checkAch(nh,bookmarks,unlocked);
      if (entry.pct===100){setConfetti(true);setTimeout(()=>setConfetti(false),4500);}
      setScreen("result");
    } else {
      setIdx(i=>i+1); setPicked(null); setLocked(false); setTimeLeft(TIMER[cfg.diff]);
    }
  };

  // â”€â”€ Smart pool â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const smartPool = (pool) => {
    const w=[];
    pool.forEach(q=>{const n=1+Math.min((errors[q.id]||0)*2,6); for(let i=0;i<n;i++) w.push(q);});
    const seen=new Set();
    return shuffle(w).filter(q=>{if(seen.has(q.id))return false;seen.add(q.id);return true;});
  };

  // â”€â”€ Start quiz â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const startQuiz = () => {
    let pool=[...QB];
    if (cfg.mod==="bookmarked") {
      pool=QB.filter(q=>bookmarks.includes(q.id));
    } else if (cfg.mod==="smart") {
      // all QB, weighted
    } else {
      if (cfg.mod!=="All Modules")  pool=pool.filter(q=>q.mod===cfg.mod);
      if (cfg.topic!=="All Topics") pool=pool.filter(q=>q.topic===cfg.topic);
      if (cfg.type!=="all")         pool=pool.filter(q=>q.type===cfg.type);
      pool=pool.filter(q=>DIFFS[cfg.diff].includes(q.diff));
    }
    if (!pool.length){alert("No questions match â€” adjust filters.");return;}
    const sorted=cfg.mod==="smart"?smartPool(pool):shuffle(pool);
    const qs=sorted.slice(0,Math.min(cfg.count,sorted.length));
    setQuestions(qs); qsRef.current=qs;
    setIdx(0); idxRef.current=0;
    setPicked(null); setLocked(false); lockRef.current=false;
    setScore(0); setStreak(0); setMaxStr(0);
    setLog([]); logRef.current=[];
    setExamLog([]); setFlipped(false);
    setTimeLeft(TIMER[cfg.diff]); startRef.current=Date.now();
    setScreen("quiz");
  };

  // â”€â”€ Derived â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const q      = questions[idx]||null;
  const TOTAL  = questions.length;
  const pct    = TOTAL>0?score/TOTAL:0;
  const grade  = pct>=.9?"Outstanding ðŸ†":pct>=.7?"Great Job ðŸŒŸ":pct>=.5?"Not Bad ðŸ‘":"Keep Practicing ðŸ“š";
  const best   = history.length?Math.max(...history.map(h=>h.pct)):0;
  const avg    = history.length?Math.round(history.reduce((s,h)=>s+h.pct,0)/history.length):0;
  const errCnt = Object.values(errors).filter(v=>v>0).length;
  const topics = ["All Topics",...new Set(QB.filter(q=>cfg.mod==="All Modules"||q.mod===cfg.mod).map(q=>q.topic))];

  // â”€â”€ Tab routing â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  if (screen==="home"&&tab==="stats") return (
    <div><StatsScreen history={history}/><BottomNav tab={tab} onTab={setTab}/><Toast msg={toast}/></div>
  );
  if (screen==="home"&&tab==="awards") return (
    <div><AwardsScreen unlocked={unlocked}/><BottomNav tab={tab} onTab={setTab}/><Toast msg={toast}/></div>
  );

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  //  HOME
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  if (screen==="home") return (
    <div>
      <Shell>
        {/* Hero */}
        <div style={{
          background:"linear-gradient(160deg,var(--slate-900) 0%,#1a1040 60%,#1e1b4b 100%)",
          padding:"40px 16px 72px", position:"relative", overflow:"hidden",
        }}>
          {/* decorative blobs */}
          <div style={{position:"absolute",top:-80,right:-80,width:280,height:280,
            borderRadius:"50%",background:"radial-gradient(circle,rgba(99,102,241,.25) 0%,transparent 70%)"}}/>
          <div style={{position:"absolute",bottom:-60,left:-60,width:220,height:220,
            borderRadius:"50%",background:"radial-gradient(circle,rgba(14,165,233,.2) 0%,transparent 70%)"}}/>
          <Page>
            {/* App identity */}
            <div className="fu" style={{display:"flex",alignItems:"center",gap:14,marginBottom:28}}>
              <div style={{
                width:52,height:52,borderRadius:16,
                background:"linear-gradient(135deg,#3b82f6,#6366f1)",
                display:"flex",alignItems:"center",justifyContent:"center",
                fontSize:26,boxShadow:"0 8px 24px rgba(99,102,241,.45)",flexShrink:0,
              }}>ðŸš¨</div>
              <div style={{flex:1}}>
                <h1 style={{fontFamily:"'Sora',sans-serif",color:"#fff",fontSize:20,
                  fontWeight:800,margin:0,letterSpacing:-.3}}>EMT Quiz App</h1>
                <p style={{color:"rgba(255,255,255,.4)",fontSize:11,margin:"2px 0 0",
                  fontFamily:"'DM Sans',sans-serif"}}>Emergency Medical Training Â· 368 Qs</p>
              </div>
              <Tag color="#38bdf8">v8</Tag>
            </div>

            {/* Stats strip */}
            <div style={{display:"grid",gridTemplateColumns:"repeat(3,1fr)",gap:10}}>
              {[
                {l:"Sessions",   v:history.length||0,                 i:"ðŸŽ¯", c:"#38bdf8"},
                {l:"Best Score", v:history.length?best+"%":"â€”",       i:"ðŸ†", c:"#fbbf24"},
                {l:"Average",    v:history.length?avg+"%":"â€”",        i:"ðŸ“ˆ", c:"#34d399"},
              ].map((s,i)=>(
                <div key={i} className={"fu d"+(i+1)} style={{
                  background:"rgba(255,255,255,.07)",borderRadius:16,
                  padding:"14px 12px",textAlign:"center",
                  border:"1px solid rgba(255,255,255,.08)",backdropFilter:"blur(8px)",
                }}>
                  <div style={{fontSize:20,marginBottom:5}}>{s.i}</div>
                  <div style={{fontFamily:"'Sora',sans-serif",color:s.c,fontSize:20,
                    fontWeight:800,lineHeight:1}}>{s.v}</div>
                  <div style={{color:"rgba(255,255,255,.35)",fontSize:10,marginTop:4,
                    fontFamily:"'DM Sans',sans-serif",textTransform:"uppercase",
                    letterSpacing:.8}}>{s.l}</div>
                </div>
              ))}
            </div>
          </Page>
        </div>

        <Page style={{marginTop:-32}}>
          <div style={{display:"flex",flexDirection:"column",gap:20}}>

            {/* Study mode cards */}
            <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12}}>
              {[
                {icon:"âš¡",title:"Quiz",      sub:"Timed Â· instant feedback",  col:"#3b82f6",g:"135deg,#3b82f6,#6366f1",mode:"quiz", hot:true},
                {icon:"ðŸ“",title:"Exam",      sub:"Answer all Â· review at end", col:"#f59e0b",g:"135deg,#f59e0b,#f97316",mode:"exam"},
                {icon:"ðŸƒ",title:"Flashcards",sub:"Flip-to-reveal study cards", col:"#8b5cf6",g:"135deg,#8b5cf6,#6366f1",mode:"flash"},
                {icon:"ðŸ§ ",title:"Smart",     sub:errCnt+" weak Qs in focus",   col:"#10b981",g:"135deg,#10b981,#059669",mode:"quiz",smart:true,hot:errCnt>0},
              ].map((m,i)=>(
                <div key={i} className={"fu d"+(i+1)+" pressable"}
                  onClick={()=>{setCfg(c=>({...c,mode:m.mode,mod:m.smart?"smart":"All Modules"}));setScreen("settings");}}
                  style={{
                    background:"#fff",borderRadius:22,overflow:"hidden",
                    boxShadow:"var(--shadow-md)",border:"1px solid var(--slate-100)",
                    position:"relative",
                  }}>
                  <div style={{height:5,background:"linear-gradient("+m.g+")"}}/>
                  {m.hot&&(
                    <div style={{position:"absolute",top:14,right:12,
                      background:"linear-gradient("+m.g+")",color:"#fff",
                      fontSize:8,fontWeight:800,borderRadius:99,padding:"2px 8px",
                      fontFamily:"'Sora',sans-serif",letterSpacing:.3}}>
                      {m.smart?"SMART":"HOT"}
                    </div>
                  )}
                  <div style={{padding:"14px 16px 16px"}}>
                    <div style={{fontSize:28,marginBottom:8,lineHeight:1}}>{m.icon}</div>
                    <div style={{fontFamily:"'Sora',sans-serif",color:m.col,fontWeight:700,
                      fontSize:14,marginBottom:4}}>{m.title}</div>
                    <div style={{color:"var(--slate-400)",fontSize:11,lineHeight:1.5,
                      fontFamily:"'DM Sans',sans-serif"}}>{m.sub}</div>
                  </div>
                </div>
              ))}
            </div>

            {/* Module list */}
            <div>
              <Divider label="Modules"/>
              <div style={{display:"flex",flexDirection:"column",gap:8,marginTop:12}}>
                {Object.entries(MOD_META).map(([m,meta])=>{
                  const cnt=m==="All Modules"?QB.length:QB.filter(q=>q.mod===m).length;
                  const done=history.filter(h=>h.mod===m);
                  const mavg=done.length?Math.round(done.reduce((s,h)=>s+h.pct,0)/done.length):null;
                  const mcol=mavg!=null?(mavg>=70?"var(--green)":mavg>=50?"var(--amber)":"var(--red)"):"var(--slate-300)";
                  return (
                    <div key={m} className="pressable"
                      onClick={()=>{setCfg(c=>({...c,mod:m,topic:"All Topics",mode:"quiz"}));setScreen("settings");}}
                      style={{
                        background:"#fff",borderRadius:18,padding:"14px 16px",
                        display:"flex",alignItems:"center",gap:14,
                        boxShadow:"var(--shadow-sm)",border:"1px solid var(--slate-100)",
                        borderLeft:"4px solid "+meta.col,
                      }}>
                      <div style={{width:44,height:44,borderRadius:14,background:meta.light,
                        display:"flex",alignItems:"center",justifyContent:"center",
                        fontSize:22,flexShrink:0}}>{meta.icon}</div>
                      <div style={{flex:1,minWidth:0}}>
                        <div style={{fontWeight:600,fontSize:13,color:"var(--slate-800)",
                          marginBottom:2}}>{m}</div>
                        <div style={{color:"var(--slate-400)",fontSize:11}}>{cnt} questions</div>
                      </div>
                      {mavg!==null&&(
                        <div style={{textAlign:"right",flexShrink:0}}>
                          <div style={{fontFamily:"'Sora',sans-serif",color:mcol,
                            fontSize:18,fontWeight:800,lineHeight:1}}>{mavg}%</div>
                          <div style={{color:"var(--slate-400)",fontSize:10,marginTop:2}}>avg</div>
                        </div>
                      )}
                      <div style={{color:"var(--slate-300)",fontSize:16,flexShrink:0}}>â€º</div>
                    </div>
                  );
                })}
              </div>
            </div>

            {/* Bookmarks + recent */}
            <div className="pressable"
              onClick={()=>{setCfg(c=>({...c,mod:"bookmarked",mode:"quiz"}));setScreen("settings");}}
              style={{background:"#fff",borderRadius:18,padding:"14px 16px",
                display:"flex",alignItems:"center",gap:14,
                boxShadow:"var(--shadow-sm)",border:"1px solid var(--slate-100)"}}>
              <div style={{width:44,height:44,borderRadius:14,background:"#fdf2f8",
                display:"flex",alignItems:"center",justifyContent:"center",fontSize:22,flexShrink:0}}>ðŸ”–</div>
              <div style={{flex:1}}>
                <div style={{fontWeight:600,fontSize:13,color:"var(--slate-800)"}}>Bookmarked</div>
                <div style={{color:"var(--slate-400)",fontSize:11,marginTop:2}}>{bookmarks.length} saved questions</div>
              </div>
              <div style={{color:"var(--slate-300)",fontSize:16}}>â€º</div>
            </div>

            {history.length>0&&(
              <div>
                <Divider label="Recent"/>
                <div style={{display:"flex",flexDirection:"column",gap:8,marginTop:12}}>
                  {history.slice(0,3).map((h,i)=>{
                    const c=h.pct>=70?"var(--green)":h.pct>=50?"var(--amber)":"var(--red)";
                    const meta=MOD_META[h.mod]||MOD_META["All Modules"];
                    return (
                      <div key={i} style={{background:"#fff",borderRadius:16,padding:"12px 16px",
                        display:"flex",alignItems:"center",gap:12,
                        boxShadow:"var(--shadow-sm)",border:"1px solid var(--slate-100)"}}>
                        <div style={{width:38,height:38,borderRadius:12,background:meta.light,
                          display:"flex",alignItems:"center",justifyContent:"center",
                          fontSize:18,flexShrink:0}}>{meta.icon}</div>
                        <div style={{flex:1,minWidth:0}}>
                          <div style={{fontWeight:600,fontSize:13,color:"var(--slate-700)",
                            whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}>{h.mod}</div>
                          <div style={{color:"var(--slate-400)",fontSize:11,marginTop:1}}>
                            {h.date} Â· {D_LABEL[h.diff]}</div>
                        </div>
                        <div style={{fontFamily:"'Sora',sans-serif",color:c,
                          fontSize:18,fontWeight:800,flexShrink:0}}>{h.pct}%</div>
                      </div>
                    );
                  })}
                </div>
              </div>
            )}

            <Btn full size="lg" onClick={()=>setScreen("settings")}
              style={{borderRadius:18,boxShadow:"0 8px 28px rgba(59,130,246,.35)"}}>
              ðŸš€ Start Studying
            </Btn>
          </div>
        </Page>
      </Shell>
      <BottomNav tab={tab} onTab={setTab}/>
      <Toast msg={toast}/>
    </div>
  );

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  //  SETTINGS
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  if (screen==="settings") {
    const isSmart = cfg.mod==="smart", isBk = cfg.mod==="bookmarked";
    const isFlash = cfg.mode==="flash", isExam = cfg.mode==="exam";

    const poolSz = (() => {
      if (isBk)    return bookmarks.length;
      if (isSmart) return QB.length;
      let p = [...QB];
      if (cfg.mod  !== "All Modules")  p = p.filter(q => q.mod   === cfg.mod);
      if (cfg.topic !== "All Topics")  p = p.filter(q => q.topic === cfg.topic);
      if (cfg.type  !== "all")         p = p.filter(q => q.type  === cfg.type);
      return p.filter(q => DIFFS[cfg.diff].includes(q.diff)).length;
    })();

    const actualQ  = Math.min(cfg.count, poolSz);
    const modeGrad = isExam  ? "135deg,#f59e0b,#f97316"
                   : isFlash ? "135deg,#8b5cf6,#6366f1"
                   : isSmart ? "135deg,#10b981,#059669"
                   :           "135deg,#3b82f6,#6366f1";
    const modeCol  = isExam?"#f59e0b":isFlash?"#8b5cf6":isSmart?"#10b981":"#3b82f6";

    // Mode tab data
    const MODES = [
      {id:"quiz",  icon:"âš¡", label:"Quiz",   col:"#3b82f6", mod:cfg.mod==="smart"?"All Modules":cfg.mod},
      {id:"exam",  icon:"ðŸ“", label:"Exam",   col:"#f59e0b", mod:cfg.mod==="smart"?"All Modules":cfg.mod},
      {id:"flash", icon:"ðŸƒ", label:"Flash",  col:"#8b5cf6", mod:cfg.mod==="smart"?"All Modules":cfg.mod},
      {id:"smart", icon:"ðŸ§ ", label:"Smart",  col:"#10b981", mod:"smart", isSmart:true},
    ];
    const activeMode = isSmart ? "smart" : cfg.mode;

    // Segmented control component (inline)
    const Seg = ({options, value, onChange, col}) => (
      <div style={{display:"flex", background:"var(--slate-100)", borderRadius:14,
        padding:3, gap:3}}>
        {options.map(([v, icon, label]) => {
          const on = value===v;
          return (
            <button key={v} onClick={()=>onChange(v)}
              style={{
                flex:1, border:"none", borderRadius:11,
                padding:"10px 4px", cursor:"pointer", transition:"all .2s ease",
                background: on ? "#fff" : "transparent",
                boxShadow: on ? "0 2px 8px rgba(0,0,0,.1)" : "none",
                display:"flex", flexDirection:"column",
                alignItems:"center", gap:3,
              }}>
              <span style={{fontSize:16, lineHeight:1}}>{icon}</span>
              <span style={{
                fontSize:10, fontWeight: on?700:500,
                fontFamily:"'Sora',sans-serif",
                color: on ? (col||"var(--slate-800)") : "var(--slate-400)",
                letterSpacing:.2, transition:"color .2s",
              }}>{label}</span>
            </button>
          );
        })}
      </div>
    );

    return (
      <Shell noNav bg="var(--slate-50)">
        {/* â”€â”€ Compact header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */}
        <div style={{
          background:"#fff", borderBottom:"1px solid var(--slate-100)",
          padding:"16px 16px 0",
          position:"sticky", top:0, zIndex:50,
        }}>
          <Page>
            <div style={{display:"flex", alignItems:"center", gap:12, marginBottom:14}}>
              <button onClick={()=>setScreen("home")}
                style={{width:38, height:38, borderRadius:12, background:"var(--slate-100)",
                  border:"none", display:"flex", alignItems:"center",
                  justifyContent:"center", cursor:"pointer", fontSize:18,
                  color:"var(--slate-500)", flexShrink:0}}>â†</button>
              <h2 style={{fontFamily:"'Sora',sans-serif", fontWeight:800, fontSize:18,
                color:"var(--slate-800)", margin:0, flex:1}}>Quiz Settings</h2>
              {/* Live count badge */}
              <div style={{
                background: poolSz===0 ? "rgba(239,68,68,.1)" : "linear-gradient("+modeGrad+")",
                borderRadius:99, padding:"6px 14px", flexShrink:0,
                boxShadow: poolSz>0 ? "0 4px 12px "+modeCol+"40" : "none",
              }}>
                <span style={{color:"#fff", fontSize:12, fontWeight:700,
                  fontFamily:"'Sora',sans-serif"}}>
                  {poolSz===0 ? "âš ï¸ 0 Qs" : actualQ+" Qs"}
                </span>
              </div>
            </div>

            {/* â”€â”€ Mode tabs â”€â”€ */}
            <div style={{display:"flex", gap:0, borderBottom:"2px solid var(--slate-100)",
              marginBottom:0, overflowX:"auto"}}>
              {MODES.map(m => {
                const on = activeMode===m.id;
                return (
                  <button key={m.id}
                    onClick={()=>{
                      if (m.isSmart) setCfg(c=>({...c, mod:"smart",  mode:"quiz"}));
                      else           setCfg(c=>({...c, mode:m.id, mod:isSmart?"All Modules":c.mod}));
                    }}
                    style={{
                      flex:1, display:"flex", flexDirection:"column",
                      alignItems:"center", gap:4, padding:"10px 4px 12px",
                      background:"none", border:"none", cursor:"pointer",
                      borderBottom: on ? "2px solid "+m.col : "2px solid transparent",
                      marginBottom:-2, transition:"all .2s ease",
                    }}>
                    <span style={{fontSize:18, lineHeight:1, transition:"transform .2s",
                      transform: on?"scale(1.15)":"scale(1)"}}>{m.icon}</span>
                    <span style={{
                      fontSize:11, fontWeight: on?700:500,
                      fontFamily:"'Sora',sans-serif",
                      color: on ? m.col : "var(--slate-400)",
                      transition:"color .2s",
                    }}>{m.label}</span>
                  </button>
                );
              })}
            </div>
          </Page>
        </div>

        {/* â”€â”€ Body â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */}
        <Page>
          <div style={{display:"flex", flexDirection:"column", gap:12, paddingTop:16}}>

            {/* Smart mode info */}
            {isSmart && (
              <div className="fu" style={{background:"rgba(16,185,129,.07)", borderRadius:18,
                padding:"16px 18px", border:"1px solid rgba(16,185,129,.2)"}}>
                <div style={{fontFamily:"'Sora',sans-serif", fontWeight:800, fontSize:14,
                  color:"#047857", marginBottom:6}}>ðŸ§  Smart Mode</div>
                <div style={{color:"var(--slate-600)", fontSize:13, lineHeight:1.6}}>
                  {errCnt>0
                    ? `Prioritising ${errCnt} questions you've previously missed. They'll appear more often.`
                    : "Answer some questions incorrectly first to activate smart prioritisation."}
                </div>
              </div>
            )}

            {/* Bookmarked info */}
            {isBk && (
              <div className="fu" style={{background:"rgba(236,72,153,.06)", borderRadius:18,
                padding:"16px 18px", border:"1px solid rgba(236,72,153,.2)"}}>
                <div style={{fontFamily:"'Sora',sans-serif", fontWeight:800, fontSize:14,
                  color:"#be185d", marginBottom:6}}>ðŸ”– Bookmarked Questions</div>
                <div style={{color:"var(--slate-600)", fontSize:13, lineHeight:1.6}}>
                  {bookmarks.length>0
                    ? `Studying your ${bookmarks.length} saved questions.`
                    : "No bookmarks yet. Bookmark questions during a quiz with the ðŸ”– button."}
                </div>
              </div>
            )}

            {!isSmart && !isBk && (
              <>
                {/* â”€â”€ Module selector (visual cards) â”€â”€ */}
                <div style={{background:"#fff", borderRadius:20, padding:"18px",
                  boxShadow:"var(--shadow-sm)", border:"1px solid var(--slate-100)"}}>
                  <p style={{fontFamily:"'Sora',sans-serif", fontWeight:700, fontSize:10,
                    letterSpacing:1.5, textTransform:"uppercase", color:"var(--slate-400)",
                    margin:"0 0 12px"}}>Module</p>
                  <div style={{display:"flex", flexDirection:"column", gap:8}}>
                    {MODS.map(o => {
                      const meta = MOD_META[o];
                      const cnt  = o==="All Modules" ? QB.length : QB.filter(q=>q.mod===o).length;
                      const on   = cfg.mod===o;
                      return (
                        <button key={o} onClick={()=>setCfg(c=>({...c,mod:o,topic:"All Topics"}))}
                          style={{
                            display:"flex", alignItems:"center", gap:12, width:"100%",
                            background: on ? meta.col+"12" : "var(--slate-50)",
                            border:"1.5px solid "+(on ? meta.col+"50" : "var(--slate-100)"),
                            borderRadius:14, padding:"11px 14px", cursor:"pointer",
                            transition:"all .18s ease",
                            boxShadow: on ? "0 4px 16px "+meta.col+"20" : "none",
                          }}>
                          <div style={{width:36, height:36, borderRadius:10,
                            background: on ? meta.col+"20" : "#fff",
                            display:"flex", alignItems:"center", justifyContent:"center",
                            fontSize:18, flexShrink:0, border:"1px solid "+(on?meta.col+"30":"var(--slate-100)"),
                            transition:"all .18s ease",
                          }}>{meta.icon}</div>
                          <div style={{flex:1, textAlign:"left"}}>
                            <div style={{fontWeight:on?700:500, fontSize:13,
                              color: on ? meta.col : "var(--slate-700)",
                              fontFamily:"'DM Sans',sans-serif",
                              transition:"color .18s"}}>{o}</div>
                            <div style={{color:"var(--slate-400)", fontSize:11, marginTop:1}}>{cnt} questions</div>
                          </div>
                          {on && (
                            <div style={{width:20, height:20, borderRadius:"50%",
                              background:meta.col, display:"flex", alignItems:"center",
                              justifyContent:"center", flexShrink:0}}>
                              <span style={{color:"#fff", fontSize:11, fontWeight:800}}>âœ“</span>
                            </div>
                          )}
                        </button>
                      );
                    })}
                  </div>
                </div>

                {/* â”€â”€ Topic â”€â”€ */}
                {topics.length > 2 && (
                  <div style={{background:"#fff", borderRadius:20, padding:"18px",
                    boxShadow:"var(--shadow-sm)", border:"1px solid var(--slate-100)"}}>
                    <p style={{fontFamily:"'Sora',sans-serif", fontWeight:700, fontSize:10,
                      letterSpacing:1.5, textTransform:"uppercase", color:"var(--slate-400)",
                      margin:"0 0 12px"}}>Topic</p>
                    <div style={{display:"flex", flexWrap:"wrap", gap:7}}>
                      {topics.map(o => {
                        const on = cfg.topic===o;
                        return (
                          <button key={o} onClick={()=>setCfg(c=>({...c,topic:o}))}
                            style={{
                              background: on ? modeCol : "var(--slate-50)",
                              border:"1.5px solid "+(on ? modeCol : "var(--slate-200)"),
                              borderRadius:99, padding:"7px 14px",
                              color: on ? "#fff" : "var(--slate-600)",
                              fontSize:12, fontWeight: on?700:500, cursor:"pointer",
                              fontFamily:"'DM Sans',sans-serif",
                              transition:"all .16s ease",
                              boxShadow: on ? "0 3px 10px "+modeCol+"40" : "none",
                            }}>{o}</button>
                        );
                      })}
                    </div>
                  </div>
                )}

                {/* â”€â”€ Difficulty + Type (segmented controls) â”€â”€ */}
                <div style={{display:"grid", gridTemplateColumns:"1fr 1fr", gap:12}}>
                  <div style={{background:"#fff", borderRadius:20, padding:"16px",
                    boxShadow:"var(--shadow-sm)", border:"1px solid var(--slate-100)"}}>
                    <p style={{fontFamily:"'Sora',sans-serif", fontWeight:700, fontSize:10,
                      letterSpacing:1.5, textTransform:"uppercase", color:"var(--slate-400)",
                      margin:"0 0 10px"}}>Difficulty</p>
                    <Seg
                      value={cfg.diff}
                      onChange={v=>setCfg(c=>({...c,diff:v}))}
                      col={cfg.diff==="easy"?"#10b981":cfg.diff==="hard"?"#ef4444":"#f59e0b"}
                      options={[
                        ["easy","ðŸŸ¢","Easy"],
                        ["medium","ðŸŸ¡","Med"],
                        ["hard","ðŸ”´","Hard"],
                      ]}
                    />
                    <div style={{marginTop:10, padding:"8px 10px",
                      background:"var(--slate-50)", borderRadius:10,
                      display:"flex", justifyContent:"space-between", alignItems:"center"}}>
                      <span style={{fontSize:11, color:"var(--slate-400)"}}>Timer</span>
                      <span style={{fontFamily:"'Sora',sans-serif", fontWeight:700,
                        fontSize:12, color:"var(--slate-700)"}}>
                        {TIMER[cfg.diff]}s / Q
                      </span>
                    </div>
                  </div>

                  <div style={{background:"#fff", borderRadius:20, padding:"16px",
                    boxShadow:"var(--shadow-sm)", border:"1px solid var(--slate-100)"}}>
                    <p style={{fontFamily:"'Sora',sans-serif", fontWeight:700, fontSize:10,
                      letterSpacing:1.5, textTransform:"uppercase", color:"var(--slate-400)",
                      margin:"0 0 10px"}}>Type</p>
                    <Seg
                      value={cfg.type}
                      onChange={v=>setCfg(c=>({...c,type:v}))}
                      options={[
                        ["all","ðŸ”€","Mix"],
                        ["mc","ðŸ“‹","MC"],
                        ["tf","âš–ï¸","T/F"],
                      ]}
                    />
                    <div style={{marginTop:10, padding:"8px 10px",
                      background:"var(--slate-50)", borderRadius:10}}>
                      <span style={{fontSize:11, color:"var(--slate-400)"}}>
                        {cfg.type==="all"?"Both types":cfg.type==="mc"?"Multiple choice only":"True / False only"}
                      </span>
                    </div>
                  </div>
                </div>
              </>
            )}

            {/* â”€â”€ Question count stepper â”€â”€ */}
            <div style={{background:"#fff", borderRadius:20, padding:"18px",
              boxShadow:"var(--shadow-sm)", border:"1px solid var(--slate-100)"}}>
              <div style={{display:"flex", justifyContent:"space-between", alignItems:"center", marginBottom:14}}>
                <p style={{fontFamily:"'Sora',sans-serif", fontWeight:700, fontSize:10,
                  letterSpacing:1.5, textTransform:"uppercase", color:"var(--slate-400)", margin:0}}>
                  Questions
                </p>
                <span style={{fontFamily:"'Sora',sans-serif", fontWeight:800, fontSize:22,
                  color:modeCol}}>{actualQ}</span>
              </div>

              {/* Big pill row */}
              <div style={{display:"flex", gap:8}}>
                {[5, 10, 15, 20, 30].map(n => {
                  const on  = cfg.count===n;
                  const avail = Math.min(n, poolSz);
                  return (
                    <button key={n} onClick={()=>setCfg(c=>({...c,count:n}))}
                      style={{
                        flex:1, display:"flex", flexDirection:"column", alignItems:"center",
                        gap:4, padding:"12px 4px", borderRadius:14, border:"1.5px solid",
                        borderColor: on ? modeCol : "var(--slate-200)",
                        background: on ? modeCol+"10" : "var(--slate-50)",
                        cursor:"pointer", transition:"all .18s ease",
                        boxShadow: on ? "0 4px 14px "+modeCol+"30" : "none",
                      }}>
                      <span style={{fontFamily:"'Sora',sans-serif", fontWeight:800, fontSize:16,
                        color: on ? modeCol : "var(--slate-700)"}}>{n}</span>
                      {poolSz < n && (
                        <span style={{fontSize:8, color:"var(--slate-400)",
                          fontFamily:"'Sora',sans-serif"}}>{avail} avail</span>
                      )}
                    </button>
                  );
                })}
              </div>

              {/* Pool progress bar */}
              <div style={{marginTop:14}}>
                <div style={{display:"flex", justifyContent:"space-between",
                  alignItems:"center", marginBottom:6}}>
                  <span style={{fontSize:11, color:"var(--slate-400)"}}>
                    Pool: {poolSz} available
                  </span>
                  <span style={{fontSize:11, color:"var(--slate-400)"}}>
                    {isFlash?"Flip cards":isExam?"Timed exam":"â± "+TIMER[cfg.diff]+"s/Q"}
                  </span>
                </div>
                <div style={{height:6, background:"var(--slate-100)", borderRadius:99, overflow:"hidden"}}>
                  <div style={{
                    height:"100%", borderRadius:99,
                    background:"linear-gradient(90deg,"+modeCol+","+modeCol+"99)",
                    width:(poolSz>0?Math.min(100,(actualQ/poolSz)*100):0)+"%",
                    transition:"width .4s cubic-bezier(.16,1,.3,1)",
                  }}/>
                </div>
              </div>
            </div>

            {/* â”€â”€ Start button (sticky feel) â”€â”€ */}
            <div style={{paddingBottom:24}}>
              <button onClick={startQuiz} disabled={poolSz===0}
                style={{
                  width:"100%", padding:"17px", borderRadius:18, border:"none",
                  background: poolSz===0 ? "var(--slate-200)"
                    : "linear-gradient("+modeGrad+")",
                  color: poolSz===0 ? "var(--slate-400)" : "#fff",
                  fontSize:16, fontWeight:800,
                  fontFamily:"'Sora',sans-serif",
                  cursor: poolSz===0 ? "not-allowed" : "pointer",
                  boxShadow: poolSz===0 ? "none" : "0 8px 28px "+modeCol+"50",
                  transition:"all .2s ease",
                  display:"flex", alignItems:"center", justifyContent:"center", gap:10,
                }}>
                <span style={{fontSize:20}}>
                  {isSmart?"ðŸ§ ":isFlash?"ðŸƒ":isExam?"ðŸ“":"âš¡"}
                </span>
                Start {isSmart?"Smart Quiz":isFlash?"Flashcards":isExam?"Exam":"Quiz"}
                <span style={{
                  background:"rgba(255,255,255,.2)", borderRadius:99,
                  padding:"3px 10px", fontSize:12, fontWeight:700,
                }}>{actualQ}Q</span>
              </button>
            </div>

          </div>
        </Page>
        <Toast msg={toast}/>
      </Shell>
    );
  }


  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  //  QUIZ / EXAM / FLASH
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  if (screen==="quiz") {
    if (!q) return (
      <Shell noNav>
        <div style={{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"}}>
          <div style={{color:"var(--slate-300)",fontSize:48,animation:"shimmer 1.5s ease infinite"}}>â³</div>
        </div>
      </Shell>
    );

    const isBk      = bookmarks.includes(q.id);
    const modMeta   = MOD_META[q.mod]||MOD_META["All Modules"];
    const BkBtn     = () => (
      <button onClick={()=>toggleBk(q.id)}
        style={{background:"none",border:"none",padding:"4px 6px",cursor:"pointer",
          fontSize:20,transition:"all .2s",
          opacity:isBk?1:.3,
          filter:isBk?"drop-shadow(0 0 6px #fbbf24)":"none"}}>ðŸ”–</button>
    );

    // â”€â”€ FLASHCARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if (cfg.mode==="flash") return (
      <Shell noNav bg="var(--slate-50)">
        {/* Header bar */}
        <div style={{background:"#fff",borderBottom:"1px solid var(--slate-100)",padding:"14px 16px"}}>
          <Page>
            <div style={{display:"flex",alignItems:"center",gap:12}}>
              <button onClick={()=>setScreen("home")}
                style={{width:36,height:36,borderRadius:11,background:"var(--slate-100)",
                  border:"none",display:"flex",alignItems:"center",justifyContent:"center",
                  cursor:"pointer",fontSize:16,color:"var(--slate-500)"}}>âœ•</button>
              <div style={{flex:1}}>
                <PBar val={idx+1} total={TOTAL} col="#8b5cf6" h={6}/>
                <div style={{display:"flex",justifyContent:"space-between",marginTop:5}}>
                  <span style={{fontSize:11,color:"var(--slate-400)"}}>Card {idx+1} of {TOTAL}</span>
                  <span style={{fontSize:11,color:"var(--slate-400)"}}>{Math.round((idx+1)/TOTAL*100)}%</span>
                </div>
              </div>
            </div>
          </Page>
        </div>

        <Page>
          <div style={{display:"flex",justifyContent:"space-between",alignItems:"center",
            margin:"16px 0 12px"}}>
            <ModChip mod={q.mod}/>
            <BkBtn/>
          </div>

          {/* 3-D flip card */}
          <div style={{perspective:1400,height:290,marginBottom:16,cursor:"pointer"}}
            onClick={()=>setFlipped(f=>!f)}>
            <div style={{position:"relative",width:"100%",height:"100%",
              transformStyle:"preserve-3d",transition:"transform .55s cubic-bezier(.4,0,.2,1)",
              transform:flipped?"rotateY(180deg)":""}}>

              {/* Front */}
              <div style={{position:"absolute",inset:0,backfaceVisibility:"hidden",
                WebkitBackfaceVisibility:"hidden",background:"#fff",borderRadius:24,
                padding:"26px 24px",display:"flex",flexDirection:"column",
                boxShadow:"0 10px 40px rgba(139,92,246,.15)",
                border:"1.5px solid rgba(139,92,246,.12)"}}>
                <div style={{display:"flex",alignItems:"center",gap:8,marginBottom:18}}>
                  <div style={{width:28,height:28,borderRadius:8,background:"rgba(139,92,246,.1)",
                    display:"flex",alignItems:"center",justifyContent:"center",fontSize:14}}>â“</div>
                  <span style={{fontFamily:"'Sora',sans-serif",fontWeight:700,fontSize:11,
                    color:"#8b5cf6",letterSpacing:.8,textTransform:"uppercase"}}>Question</span>
                  <span style={{marginLeft:"auto",color:"var(--slate-300)",fontSize:11}}>tap to flip â†’</span>
                </div>
                <p style={{color:"var(--slate-800)",fontSize:17,fontWeight:600,lineHeight:1.7,
                  margin:0,flex:1,fontFamily:"'DM Sans',sans-serif"}}>{q.q}</p>
                <TopicTag topic={q.topic}/>
              </div>

              {/* Back */}
              <div style={{position:"absolute",inset:0,backfaceVisibility:"hidden",
                WebkitBackfaceVisibility:"hidden",
                background:"linear-gradient(160deg,#f0fdf4,#dcfce7)",
                borderRadius:24,padding:"26px 24px",display:"flex",flexDirection:"column",
                transform:"rotateY(180deg)",
                boxShadow:"0 10px 40px rgba(16,185,129,.15)",
                border:"1.5px solid rgba(16,185,129,.2)"}}>
                <div style={{display:"flex",alignItems:"center",gap:8,marginBottom:18}}>
                  <div style={{width:28,height:28,borderRadius:8,background:"rgba(16,185,129,.15)",
                    display:"flex",alignItems:"center",justifyContent:"center",fontSize:14}}>âœ…</div>
                  <span style={{fontFamily:"'Sora',sans-serif",fontWeight:700,fontSize:11,
                    color:"var(--green)",letterSpacing:.8,textTransform:"uppercase"}}>Answer</span>
                </div>
                <p style={{color:"#065f46",fontSize:20,fontWeight:700,margin:"0 0 14px",
                  fontFamily:"'Sora',sans-serif",lineHeight:1.4}}>
                  {q.type==="tf"?(q.a?"âœ… True":"âŒ False"):q.o[q.a]}
                </p>
                {q.exp&&<p style={{color:"#374151",fontSize:13,margin:0,lineHeight:1.65,
                  flex:1,fontFamily:"'DM Sans',sans-serif"}}>{q.exp}</p>}
              </div>
            </div>
          </div>

          <div style={{display:"flex",gap:10}}>
            <Btn variant="danger" size="md" full={false}
              style={{flex:1,borderRadius:16,padding:"14px"}}
              onClick={()=>{setFlipped(false);idx+1>=TOTAL?setScreen("home"):setIdx(i=>i+1);}}>
              ðŸ˜• Hard
            </Btn>
            <Btn variant="success" size="md" full={false}
              style={{flex:1,borderRadius:16,padding:"14px"}}
              onClick={()=>{setFlipped(false);idx+1>=TOTAL?setScreen("home"):setIdx(i=>i+1);}}>
              ðŸ˜Š Got it
            </Btn>
          </div>
        </Page>
        <Toast msg={toast}/>
      </Shell>
    );

    // â”€â”€ EXAM MODE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if (cfg.mode==="exam") {
      const ep = examLog[idx]?.picked??null;
      return (
        <Shell noNav bg="var(--slate-50)">
          <div style={{background:"linear-gradient(135deg,#f59e0b,#f97316)",padding:"18px 16px 36px"}}>
            <Page>
              <div style={{display:"flex",alignItems:"center",gap:12}}>
                <button onClick={()=>setScreen("home")}
                  style={{width:38,height:38,borderRadius:12,background:"rgba(255,255,255,.2)",
                    border:"none",display:"flex",alignItems:"center",justifyContent:"center",
                    color:"#fff",fontSize:18,cursor:"pointer"}}>â†</button>
                <div style={{flex:1}}>
                  <div style={{display:"flex",justifyContent:"space-between",marginBottom:6}}>
                    <span style={{color:"rgba(255,255,255,.9)",fontFamily:"'Sora',sans-serif",
                      fontWeight:700,fontSize:12}}>EXAM MODE</span>
                    <span style={{color:"rgba(255,255,255,.7)",fontSize:12}}>Q{idx+1} of {TOTAL}</span>
                  </div>
                  <PBar val={idx+1} total={TOTAL} col="rgba(255,255,255,.5)" h={5}/>
                </div>
                <BkBtn/>
              </div>
            </Page>
          </div>
          <Page style={{marginTop:-18}}>
            {/* Question card */}
            <div style={{background:"#fff",borderRadius:22,padding:"20px",
              boxShadow:"var(--shadow-md)",border:"1px solid var(--slate-100)",marginBottom:12}}>
              <div style={{display:"flex",flexWrap:"wrap",gap:8,marginBottom:14}}>
                <TopicTag topic={q.topic}/>
                <Tag color={q.diff===1?"var(--green)":q.diff===2?"var(--amber)":"var(--red)"}>
                  {["","Easy","Medium","Hard"][q.diff]}
                </Tag>
              </div>
              <p className="fr" key={idx}
                style={{color:"var(--slate-800)",fontSize:17,fontWeight:600,lineHeight:1.7,
                  margin:0,fontFamily:"'DM Sans',sans-serif"}}>{q.q}</p>
            </div>
            <Options q={q} locked={false} picked={null} onPick={pickExam} ep={ep} em={true}/>
            <div style={{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:14}}>
              <span style={{color:"var(--slate-400)",fontSize:12,fontFamily:"'DM Sans',sans-serif"}}>
                {ep!==null?"âœ“ Answer recorded":"Select an answer"}
              </span>
              <Btn onClick={examNext} disabled={ep===null} size="sm"
                style={{borderRadius:12,
                  background:ep!==null?"linear-gradient(135deg,#f59e0b,#f97316)":"var(--slate-100)",
                  color:ep!==null?"#fff":"var(--slate-400)"}}>
                {idx+1>=TOTAL?"Finish âœ“":"Next â†’"}
              </Btn>
            </div>
          </Page>
          <Toast msg={toast}/>
        </Shell>
      );
    }

    // â”€â”€ QUIZ MODE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    return (
      <Shell noNav bg="var(--slate-50)">
        {/* Top chrome */}
        <div style={{background:"#fff",borderBottom:"1px solid var(--slate-100)",padding:"14px 16px"}}>
          <Page>
            <div style={{display:"flex",alignItems:"center",gap:12}}>
              <button onClick={()=>setScreen("home")}
                style={{width:36,height:36,borderRadius:11,background:"var(--slate-100)",
                  border:"none",display:"flex",alignItems:"center",justifyContent:"center",
                  cursor:"pointer",fontSize:15,color:"var(--slate-500)"}}>âœ•</button>
              <div style={{flex:1}}>
                <PBar val={idx+1} total={TOTAL} col={modMeta.col} h={5}/>
                <div style={{display:"flex",justifyContent:"space-between",marginTop:4}}>
                  <span style={{fontSize:11,color:"var(--slate-400)"}}>
                    Q{idx+1}/{TOTAL} Â· {score} correct
                  </span>
                  <span style={{fontSize:11,color:"var(--slate-400)",
                    fontFamily:"'Sora',sans-serif",fontWeight:600}}>
                    {Math.round((idx+1)/TOTAL*100)}%
                  </span>
                </div>
              </div>
              <TimerRing total={TIMER[cfg.diff]} left={timeLeft}/>
            </div>
          </Page>
        </div>

        <Page>
          {/* Badges row */}
          <div style={{display:"flex",justifyContent:"space-between",alignItems:"center",
            margin:"14px 0 10px"}}>
            <div style={{display:"flex",gap:7,flexWrap:"wrap",alignItems:"center"}}>
              <ModChip mod={q.mod}/>
              <Tag color={q.diff===1?"var(--green)":q.diff===2?"var(--amber)":"var(--red)"}>
                {["","Easy","Medium","Hard"][q.diff]}
              </Tag>
              {cfg.mod==="smart"&&(errors[q.id]||0)>0&&(
                <Tag color="var(--rose)">âš ï¸ {errors[q.id]}Ã— missed</Tag>
              )}
            </div>
            <BkBtn/>
          </div>

          {/* Streak badge */}
          {streak>=2&&(
            <div className="pi" style={{display:"inline-flex",alignItems:"center",gap:6,
              background:"linear-gradient(135deg,#dc2626,#f97316)",color:"#fff",
              borderRadius:99,padding:"6px 16px",fontSize:12,fontWeight:800,marginBottom:8,
              fontFamily:"'Sora',sans-serif",boxShadow:"0 4px 16px rgba(239,68,68,.35)"}}>
              {streak>=5?"ðŸ”¥ðŸ”¥":"ðŸ”¥"} {streak}Ã— streak
            </div>
          )}

          <TopicTag topic={q.topic}/>

          {/* Question card */}
          <div style={{background:"#fff",borderRadius:22,padding:"20px 22px",
            margin:"10px 0",boxShadow:"var(--shadow-md)",border:"1px solid var(--slate-100)"}}>
            <p className="fr" key={idx}
              style={{color:"var(--slate-800)",fontSize:17,fontWeight:600,
                lineHeight:1.75,margin:0,fontFamily:"'DM Sans',sans-serif"}}>{q.q}</p>
          </div>

          {/* Options */}
          <Options q={q} locked={locked} picked={picked} onPick={lockAns}/>

          {/* Explanation */}
          {locked&&q.exp&&(
            <div className="fu" style={{background:"rgba(99,102,241,.05)",
              borderLeft:"4px solid #6366f1",borderRadius:"0 14px 14px 0",
              padding:"14px 16px",marginTop:10}}>
              <p style={{fontFamily:"'Sora',sans-serif",color:"#4f46e5",fontSize:10,
                fontWeight:800,letterSpacing:1,textTransform:"uppercase",margin:"0 0 6px"}}>
                ðŸ’¡ Explanation
              </p>
              <p style={{color:"var(--slate-600)",fontSize:13,lineHeight:1.65,
                margin:0,fontFamily:"'DM Sans',sans-serif"}}>{q.exp}</p>
            </div>
          )}

          {/* Feedback + next */}
          {locked&&(
            <div className="fu" style={{
              display:"flex",justifyContent:"space-between",alignItems:"center",
              borderRadius:18,padding:"14px 18px",marginTop:10,
              background: picked===q.a?"rgba(16,185,129,.07)":"rgba(239,68,68,.06)",
              border:"1.5px solid "+(picked===q.a?"rgba(16,185,129,.3)":"rgba(239,68,68,.25)"),
              boxShadow: picked===q.a?"0 4px 16px rgba(16,185,129,.12)":"0 4px 16px rgba(239,68,68,.1)",
            }}>
              <div style={{fontWeight:600,fontSize:14}}>
                {picked===null
                  ? <span style={{color:"var(--amber)"}}>â° Time's up!</span>
                  : picked===q.a
                    ? <span style={{color:"var(--green)"}}>âœ… Correct!{streak>=2?" Â· "+streak+"Ã— ðŸ”¥":""}</span>
                    : <span style={{color:"var(--red)"}}>
                        âŒ <span style={{color:"var(--slate-600)",fontWeight:500}}>
                          {q.type==="tf"?(q.a?"True":"False"):q.o[q.a]}
                        </span>
                      </span>
                }
              </div>
              <Btn onClick={goNext} size="sm" style={{borderRadius:12,minWidth:96,
                boxShadow:"none"}}>
                {idx+1>=TOTAL?"Results â†’":"Next â†’"}
              </Btn>
            </div>
          )}
        </Page>
        <Toast msg={toast}/>
      </Shell>
    );
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  //  RESULT
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  const pcol = pct>=.7?"var(--green)":pct>=.5?"var(--amber)":"var(--red)";
  const pbg  = pct>=.7?"linear-gradient(160deg,#f0fdf4,#dcfce7)"
              :pct>=.5?"linear-gradient(160deg,#fffbeb,#fef3c7)"
              :"linear-gradient(160deg,#fef2f2,#fee2e2)";
  const topicMap={};
  log.forEach(l=>{
    if(!topicMap[l.q.topic]) topicMap[l.q.topic]={c:0,t:0};
    topicMap[l.q.topic].t++; if(l.correct) topicMap[l.q.topic].c++;
  });

  return (
    <div>
      {confetti&&<Confetti/>}
      <Shell noNav>
        {/* Score hero */}
        <div style={{background:pbg, padding:"40px 16px 56px"}}>
          <Page>
            <div className="fu" style={{display:"flex",gap:22,alignItems:"center"}}>
              <ScoreDonut pct={pct} score={score} total={TOTAL}/>
              <div style={{flex:1}}>
                <h2 style={{fontFamily:"'Sora',sans-serif",color:"var(--slate-800)",
                  fontSize:22,fontWeight:800,margin:"0 0 6px",lineHeight:1.2}}>{grade}</h2>
                <div style={{color:"var(--slate-500)",fontSize:13,marginBottom:12}}>
                  {cfg.mod} Â· {D_LABEL[cfg.diff]} Â· {cfg.mode}
                </div>
                <div style={{display:"flex",flexWrap:"wrap",gap:8}}>
                  <Tag color="var(--slate-500)">â± {elapsed}s</Tag>
                  {cfg.mode==="quiz"&&<Tag color="var(--amber)">ðŸ”¥ {maxStr}Ã— best</Tag>}
                  <Tag color={pcol}>âœ“{score} âœ—{TOTAL-score}</Tag>
                </div>
                {pct===1&&(
                  <div className="pi" style={{marginTop:12,display:"inline-flex",
                    alignItems:"center",gap:6,
                    background:"linear-gradient(135deg,#fbbf24,#f97316)",color:"#fff",
                    borderRadius:99,padding:"6px 16px",fontSize:12,fontWeight:800,
                    fontFamily:"'Sora',sans-serif",
                    boxShadow:"0 6px 20px rgba(251,191,36,.4)"}}>
                    ðŸŽ‰ Perfect Score!
                  </div>
                )}
              </div>
            </div>
          </Page>
        </div>

        <Page style={{marginTop:-28}}>
          <div style={{display:"flex",flexDirection:"column",gap:14}}>

            {/* Answer map */}
            <div style={{background:"#fff",borderRadius:22,padding:"20px",
              boxShadow:"var(--shadow-md)",border:"1px solid var(--slate-100)"}}>
              <p style={{fontFamily:"'Sora',sans-serif",fontWeight:700,fontSize:11,
                letterSpacing:1.5,textTransform:"uppercase",color:"var(--slate-400)",
                margin:"0 0 14px"}}>Answer Map</p>
              <div style={{display:"flex",flexWrap:"wrap",gap:7}}>
                {log.map((l,i)=>{
                  const c=l.correct?"var(--green)":l.timeout?"var(--amber)":"var(--red)";
                  const bg=l.correct?"rgba(16,185,129,.1)":l.timeout?"rgba(245,158,11,.1)":"rgba(239,68,68,.09)";
                  return (
                    <div key={i} style={{width:34,height:34,borderRadius:11,
                      display:"flex",alignItems:"center",justifyContent:"center",
                      fontSize:13,fontWeight:700,background:bg,color:c,
                      border:"1.5px solid "+c+"40",
                      fontFamily:"'Sora',sans-serif"}}>
                      {l.correct?"âœ“":l.timeout?"â°":"âœ—"}
                    </div>
                  );
                })}
              </div>
            </div>

            {/* Topic breakdown */}
            <div style={{background:"#fff",borderRadius:22,padding:"20px",
              boxShadow:"var(--shadow-md)",border:"1px solid var(--slate-100)"}}>
              <p style={{fontFamily:"'Sora',sans-serif",fontWeight:700,fontSize:11,
                letterSpacing:1.5,textTransform:"uppercase",color:"var(--slate-400)",
                margin:"0 0 16px"}}>Topic Breakdown</p>
              <div style={{display:"flex",flexDirection:"column",gap:14}}>
                {Object.entries(topicMap).map(([tp,ts])=>{
                  const r=ts.c/ts.t, c=r>=.7?"var(--green)":r>=.5?"var(--amber)":"var(--red)";
                  return (
                    <div key={tp}>
                      <div style={{display:"flex",justifyContent:"space-between",
                        alignItems:"center",marginBottom:6}}>
                        <span style={{color:"var(--slate-600)",fontSize:13,fontWeight:500,
                          overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",
                          maxWidth:"70%"}}>{tp}</span>
                        <div style={{display:"flex",alignItems:"center",gap:8,flexShrink:0}}>
                          <span style={{color:"var(--slate-400)",fontSize:11}}>{ts.c}/{ts.t}</span>
                          <span style={{fontFamily:"'Sora',sans-serif",color:c,
                            fontWeight:700,fontSize:13}}>{Math.round(r*100)}%</span>
                        </div>
                      </div>
                      <PBar val={ts.c} total={ts.t} col={c} h={6}/>
                    </div>
                  );
                })}
              </div>
            </div>

            {/* Wrong review */}
            {log.some(l=>!l.correct)&&(
              <div>
                <Divider label={"Review Â· "+log.filter(l=>!l.correct).length+" incorrect"}/>
                <div style={{display:"flex",flexDirection:"column",gap:10,marginTop:12}}>
                  {log.filter(l=>!l.correct).map((l,i)=>(
                    <div key={i} style={{background:"#fff",borderRadius:18,padding:"16px",
                      boxShadow:"var(--shadow-sm)",
                      border:"1px solid var(--slate-100)",borderLeft:"4px solid var(--red)"}}>
                      <div style={{display:"flex",flexWrap:"wrap",gap:6,marginBottom:10}}>
                        <TopicTag topic={l.q.topic}/>
                        {l.timeout&&<Tag color="var(--amber)">â° Timeout</Tag>}
                      </div>
                      <p style={{color:"var(--slate-700)",fontSize:13,margin:"0 0 10px",
                        lineHeight:1.6,fontFamily:"'DM Sans',sans-serif"}}>{l.q.q}</p>
                      <div style={{background:"rgba(16,185,129,.07)",borderRadius:12,
                        padding:"10px 14px",border:"1px solid rgba(16,185,129,.2)"}}>
                        <div style={{color:"var(--green)",fontWeight:700,fontSize:13}}>
                          âœ… {l.q.type==="tf"?(l.q.a?"True":"False"):l.q.o[l.q.a]}
                        </div>
                        {l.q.exp&&(
                          <p style={{color:"var(--slate-500)",fontSize:12,margin:"6px 0 0",
                            lineHeight:1.6,fontFamily:"'DM Sans',sans-serif"}}>ðŸ’¡ {l.q.exp}</p>
                        )}
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            )}

            {/* Actions */}
            <div style={{display:"flex",gap:10,paddingBottom:4}}>
              <Btn onClick={startQuiz} style={{flex:2,borderRadius:16}}>ðŸ”„ Try Again</Btn>
              <Btn onClick={()=>setScreen("settings")} variant="secondary"
                style={{flex:1,borderRadius:16}}>âš™ï¸</Btn>
              <Btn onClick={()=>{setScreen("home");setTab("home");}} variant="secondary"
                style={{flex:1,borderRadius:16}}>ðŸ </Btn>
            </div>
          </div>
        </Page>
      </Shell>
      <Toast msg={toast}/>
    </div>
  );
}


    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(React.createElement(App, null));

    // Dismiss splash
    requestAnimationFrame(() => {
      document.getElementById('s-fill').style.width = '100%';
    });
    setTimeout(() => {
      const s = document.getElementById('splash');
      if (s) { s.style.opacity = '0'; setTimeout(() => s.remove(), 600); }
    }, 1300);
  </script>

  <!-- Service Worker + iOS install prompt -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js').catch(() => {});
      });
    }
    window.addEventListener('load', () => {
      const ios = /iphone|ipad|ipod/i.test(navigator.userAgent);
      if (ios && !window.navigator.standalone && !sessionStorage.getItem('ios-prompt')) {
        sessionStorage.setItem('ios-prompt', '1');
        const d = document.createElement('div');
        d.innerHTML = `<div style="position:fixed;bottom:24px;left:50%;transform:translateX(-50%);
          background:rgba(15,23,42,.97);backdrop-filter:blur(20px);color:#fff;border-radius:22px;
          padding:20px 22px;font-family:sans-serif;font-size:13px;text-align:center;z-index:99999;
          box-shadow:0 20px 60px rgba(0,0,0,.6);max-width:300px;width:88%;
          border:1px solid rgba(255,255,255,.12)">
          <div style="font-size:30px;margin-bottom:10px">ðŸ“²</div>
          <strong style="font-size:15px">Install on iPhone</strong><br><br>
          <span style="color:rgba(255,255,255,.65);line-height:1.7">
            Tap <strong style="color:#fff">Share â†‘</strong> then
            <strong style="color:#fff">"Add to Home Screen"</strong>
          </span><br>
          <button onclick="this.closest('div').parentElement.remove()"
            style="margin-top:16px;background:rgba(59,130,246,.25);
            border:1px solid rgba(59,130,246,.4);color:#fff;border-radius:99px;
            padding:9px 22px;cursor:pointer;font-size:13px;font-weight:600">Got it âœ“</button>
        </div>`;
        document.body.appendChild(d);
        setTimeout(() => d.remove(), 14000);
      }
    });
  </script>
</body>
</html>